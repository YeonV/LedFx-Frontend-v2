"use strict";(self.webpackChunkledfx=self.webpackChunkledfx||[]).push([[575],{"./src/pages/Devices/DeviceCard/DeviceCard.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return DeviceCard_stories}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),dist=__webpack_require__("./node_modules/react-router/dist/index.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),useTheme=__webpack_require__("./node_modules/@mui/material/styles/useTheme.js"),Card=__webpack_require__("./node_modules/@mui/material/Card/Card.js"),Button=__webpack_require__("./node_modules/@mui/material/Button/Button.js"),Settings=__webpack_require__("./node_modules/@mui/icons-material/Settings.js"),Visibility=__webpack_require__("./node_modules/@mui/icons-material/Visibility.js"),Tune=__webpack_require__("./node_modules/@mui/icons-material/Tune.js"),Build=__webpack_require__("./node_modules/@mui/icons-material/Build.js"),react_router_dom_dist=__webpack_require__("./node_modules/react-router-dom/dist/index.js"),Collapse=__webpack_require__("./node_modules/@mui/material/Collapse/Collapse.js"),ExpandMore=__webpack_require__("./node_modules/@mui/icons-material/ExpandMore.js"),IconButton=__webpack_require__("./node_modules/@mui/material/IconButton/IconButton.js"),Typography=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),SyncProblem=__webpack_require__("./node_modules/@mui/icons-material/esm/SyncProblem.js"),Pause=__webpack_require__("./node_modules/@mui/icons-material/esm/Pause.js"),PlayArrow=__webpack_require__("./node_modules/@mui/icons-material/esm/PlayArrow.js"),Clear=__webpack_require__("./node_modules/@mui/icons-material/esm/Clear.js"),Delete=__webpack_require__("./node_modules/@mui/icons-material/esm/Delete.js"),Popover=__webpack_require__("./src/components/Popover/Popover.tsx"),Dialog=__webpack_require__("./node_modules/@mui/material/Dialog/Dialog.js"),AppBar=__webpack_require__("./node_modules/@mui/material/AppBar/AppBar.js"),Toolbar=__webpack_require__("./node_modules/@mui/material/Toolbar/Toolbar.js"),NavigateBefore=__webpack_require__("./node_modules/@mui/icons-material/NavigateBefore.js"),Slide=__webpack_require__("./node_modules/@mui/material/Slide/Slide.js"),MenuItem=__webpack_require__("./node_modules/@mui/material/MenuItem/MenuItem.js"),ListItemIcon=__webpack_require__("./node_modules/@mui/material/ListItemIcon/ListItemIcon.js"),ToggleButtonGroup=__webpack_require__("./node_modules/@mui/material/ToggleButtonGroup/ToggleButtonGroup.js"),ToggleButton=__webpack_require__("./node_modules/@mui/material/ToggleButton/ToggleButton.js"),esm_Settings=__webpack_require__("./node_modules/@mui/icons-material/esm/Settings.js"),GridOn=__webpack_require__("./node_modules/@mui/icons-material/esm/GridOn.js"),esm_Visibility=__webpack_require__("./node_modules/@mui/icons-material/esm/Visibility.js"),VisibilityOff=__webpack_require__("./node_modules/@mui/icons-material/esm/VisibilityOff.js"),helpers=__webpack_require__("./src/utils/helpers.ts"),useStore=__webpack_require__("./src/store/useStore.ts"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),styled=__webpack_require__("./node_modules/@mui/material/styles/styled.js"),DialogTitle=__webpack_require__("./node_modules/@mui/material/DialogTitle/DialogTitle.js"),DialogContent=__webpack_require__("./node_modules/@mui/material/DialogContent/DialogContent.js"),Select=__webpack_require__("./node_modules/@mui/material/Select/Select.js"),DialogActions=__webpack_require__("./node_modules/@mui/material/DialogActions/DialogActions.js"),AddCircle=__webpack_require__("./node_modules/@mui/icons-material/AddCircle.js"),BladeFrame=__webpack_require__("./src/components/SchemaForm/components/BladeFrame.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["onClose","value","open"],classes={root:"".concat("_AddSegmentDialog","-root"),paper:"".concat("_AddSegmentDialog","-paper")},Root=(0,styled.ZP)("div")((function(_ref){var _ref2,theme=_ref.theme;return _ref2={},(0,defineProperty.Z)(_ref2,"&.".concat(classes.root),{margin:"1rem auto",backgroundColor:theme.palette.background.paper}),(0,defineProperty.Z)(_ref2,"& .".concat(classes.paper),{width:"80%",maxHeight:435}),_ref2}));function ConfirmationDialogRaw(props){var onClose=props.onClose,valueProp=props.value,open=props.open,other=(0,objectWithoutProperties.Z)(props,_excluded),_React$useState=react.useState(valueProp),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),value=_React$useState2[0],setValue=_React$useState2[1];return delete other.deviceList,(0,jsx_runtime.jsxs)(Dialog.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:open},other),{},{children:[(0,jsx_runtime.jsx)(DialogTitle.Z,{id:"confirmation-dialog-title",children:"Select a device"}),(0,jsx_runtime.jsx)(DialogContent.Z,{dividers:!0,children:(0,jsx_runtime.jsx)(BladeFrame.Z,{full:!0,children:(0,jsx_runtime.jsx)(Select.Z,{value:value,style:{width:"100%"},onChange:function handleChange(event){setValue(event.target.value)},children:Object.keys(props.deviceList).map((function(device){return(0,jsx_runtime.jsx)(MenuItem.Z,{value:props.deviceList[device].id,children:props.deviceList[device].config.name},props.deviceList[device].id)}))})})}),(0,jsx_runtime.jsxs)(DialogActions.Z,{children:[(0,jsx_runtime.jsx)(Button.Z,{autoFocus:!0,onClick:function handleCancel(){onClose()},color:"primary",children:"Cancel"}),(0,jsx_runtime.jsx)(Button.Z,{onClick:function handleOk(){onClose(value)},color:"primary",children:"Ok"})]})]}))}function ConfirmationDialog(_ref3){var virtual=_ref3.virtual,_ref3$config=_ref3.config,config=void 0===_ref3$config?{}:_ref3$config,_React$useState3=react.useState(!1),_React$useState4=(0,slicedToArray.Z)(_React$useState3,2),open=_React$useState4[0],setOpen=_React$useState4[1],deviceList=(0,useStore.Z)((function(state){return state.devices}))||{},virtuals=(0,useStore.Z)((function(state){return state.virtuals}))||{},updateSegments=(0,useStore.Z)((function(state){return state.updateSegments})),getVirtuals=(0,useStore.Z)((function(state){return state.getVirtuals})),highlightSegment=(0,useStore.Z)((function(state){return state.highlightSegment})),setEffect=(0,useStore.Z)((function(state){return state.setEffect}));return(0,jsx_runtime.jsx)(Root,{className:classes.root,children:deviceList&&Object.keys(deviceList).length>0?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.Z,{variant:"contained",color:"primary","aria-label":"Add",endIcon:(0,jsx_runtime.jsx)(AddCircle.Z,{}),onClick:function handleClickListItem(){setOpen(!0)},role:"listitem",children:"ADD SEGMENT"}),(0,jsx_runtime.jsx)(ConfirmationDialogRaw,{classes:{paper:classes.paper},config:config,id:"ringtone-menu",keepMounted:!0,open:open,onClose:function handleClose(newValue){if(setOpen(!1),newValue){var device=(0,objectSpread2.Z)({},deviceList[Object.keys(deviceList).find((function(d){return deviceList[d].id===newValue}))||0]);if(device&&device.config){var test=[].concat((0,toConsumableArray.Z)(virtual.segments),[[device.id,0,device.config.pixel_count-1,!1]]).filter((function(t){return 4===t.length}));updateSegments(virtual.id,test).then((function(){getVirtuals(),!1===virtual.active&&0===virtual.segments.length&&(device.active_virtuals&&device.active_virtuals[0]&&virtuals&&virtuals[device.active_virtuals[0]]&&virtuals[device.active_virtuals[0]].effect?setEffect(virtual.id,virtuals[device.active_virtuals[0]].effect.type,virtuals[device.active_virtuals[0]].effect.config,!0):setEffect(virtual.id,"rainbow",{},!0)),highlightSegment(virtual.id,device.id,0,device.config.pixel_count-1,!1)}))}}},value:"",deviceList:deviceList})]}):null})}try{AddSegmentDialog.displayName="AddSegmentDialog",AddSegmentDialog.__docgenInfo={description:"",displayName:"AddSegmentDialog",props:{virtual:{defaultValue:null,description:"",name:"virtual",required:!0,type:{name:"any"}},config:{defaultValue:{value:"{}"},description:"",name:"config",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Dialogs/_AddSegmentDialog.tsx#AddSegmentDialog"]={docgenInfo:AddSegmentDialog.__docgenInfo,name:"AddSegmentDialog",path:"src/components/Dialogs/_AddSegmentDialog.tsx#AddSegmentDialog"})}catch(__react_docgen_typescript_loader_error){}var ExpandLess=__webpack_require__("./node_modules/@mui/icons-material/esm/ExpandLess.js"),esm_ExpandMore=__webpack_require__("./node_modules/@mui/icons-material/esm/ExpandMore.js"),SwapHoriz=__webpack_require__("./node_modules/@mui/icons-material/esm/SwapHoriz.js"),index_module=__webpack_require__("./node_modules/use-debounce/dist/index.module.js"),Slider=__webpack_require__("./node_modules/@mui/material/Slider/Slider.js"),PixelSlider=function PixelSlider(_ref){var s=_ref.s,handleRangeSegment=_ref.handleRangeSegment,getDevices=(0,useStore.Z)((function(state){return state.getDevices})),devices=(0,useStore.Z)((function(state){return state.devices})),_useState=(0,react.useState)([s[1],s[2]]),_useState2=(0,slicedToArray.Z)(_useState,2),range=_useState2[0],setRange=_useState2[1];if((0,react.useEffect)((function(){getDevices()}),[getDevices]),(0,react.useEffect)((function(){setRange([s[1],s[2]])}),[s]),!devices[s[0]])return null;var pixelRange=[s[1],s[2]],throttled=(0,index_module.zl)((function handleChange(_event,newValue){newValue!==pixelRange&&handleRangeSegment(newValue[0],newValue[1])}),100),marks=[{value:0,label:1},{value:devices[s[0]].config.pixel_count-1,label:devices[s[0]].config.pixel_count}];return(0,jsx_runtime.jsx)(Slider.ZP,{value:range,marks:marks,valueLabelFormat:function valueLabelFormat(e){return e+1},min:0,max:devices[s[0]].config.pixel_count-1,onChange:function onChange(_event,n){setRange(n),throttled(_event,n)},"aria-labelledby":"range-slider",valueLabelDisplay:"auto"})},EditVirtuals_PixelSlider=PixelSlider;try{PixelSlider.displayName="PixelSlider",PixelSlider.__docgenInfo={description:"",displayName:"PixelSlider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Devices/EditVirtuals/PixelSlider.tsx#PixelSlider"]={docgenInfo:PixelSlider.__docgenInfo,name:"PixelSlider",path:"src/pages/Devices/EditVirtuals/PixelSlider.tsx#PixelSlider"})}catch(__react_docgen_typescript_loader_error){}var makeStyles=__webpack_require__("./node_modules/@mui/styles/makeStyles/makeStyles.js"),Segment_styles=(0,makeStyles.Z)((function(){return{segmentsWrapper:{display:"flex",borderBottom:"1px dashed #aaa",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0"},segmentsColOrder:{display:"flex",justifyContent:"space-between",alignItems:"center"},segmentsButtonUp:{borderTopRightRadius:0,borderBottomRightRadius:0,minWidth:"50px"},segmentsButtonDown:{borderTopLeftRadius:0,borderBottomLeftRadius:0,minWidth:"50px",marginRight:"1rem"},segmentsColPixelSlider:{flex:"0 1 70%"},segmentsColActions:{display:"flex",justifyContent:"space-between",alignItems:"center"},"@media (max-width: 600px)":{segmentsColPixelSlider:{order:3,width:"calc(100% - 2rem)",margin:"2rem auto 0 auto"},segmentsWrapper:{flexDirection:"column",alignItems:"flex-start"},segmentsColActions:{position:"absolute",right:"1rem"}}}})),Segment=function Segment(_ref){var s=_ref.s,i=_ref.i,virtual=_ref.virtual,segments=_ref.segments,calib=_ref.calib,getDevices=(0,useStore.Z)((function(state){return state.getDevices})),devices=(0,useStore.Z)((function(state){return state.devices})),title=devices&&devices[devices&&Object.keys(devices).find((function(d){return d===s[0]}))].config.name,classes=Segment_styles(),updateSegments=(0,useStore.Z)((function(state){return state.updateSegments})),highlightSegment=(0,useStore.Z)((function(state){return state.highlightSegment})),highlightOffSegment=(0,useStore.Z)((function(state){return state.highlightOffSegment})),getVirtuals=(0,useStore.Z)((function(state){return state.getVirtuals})),activeSegment=(0,useStore.Z)((function(state){return state.activeSegment})),setActiveSegment=(0,useStore.Z)((function(state){return state.setActiveSegment})),reorder=function reorder(direction){var newSegments="UP"===direction?(0,helpers.LF)(segments,i-1,i):(0,helpers.LF)(segments,i,i+1);updateSegments(virtual.id,newSegments).then((function(){getVirtuals(),calib&&(highlightSegment(virtual.id,newSegments["UP"===direction?i-1:i+1][0],newSegments["UP"===direction?i-1:i+1][1],newSegments["UP"===direction?i-1:i+1][2],newSegments["UP"===direction?i-1:i+1][3]),setActiveSegment("UP"===direction?i-1:i+1))}))};return(0,react.useEffect)((function(){getDevices()}),[getDevices]),(0,jsx_runtime.jsx)("div",{style:{padding:"0 1rem",background:calib&&i===activeSegment?"#ffffff18":""},children:(0,jsx_runtime.jsxs)("div",{className:classes.segmentsWrapper,children:[(0,jsx_runtime.jsxs)("div",{className:classes.segmentsColOrder,children:[(0,jsx_runtime.jsxs)("div",{style:{display:"flex"},children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(Button.Z,{disabled:0===i,color:"inherit",onClick:function onClick(){return reorder("UP")},size:"small",className:classes.segmentsButtonUp,children:(0,jsx_runtime.jsx)(ExpandLess.Z,{})})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(Button.Z,{disabled:i===virtual.segments.length-1,color:"inherit",onClick:function onClick(){return reorder("DOWN")},size:"small",className:classes.segmentsButtonDown,children:(0,jsx_runtime.jsx)(esm_ExpandMore.Z,{})})})]}),(0,jsx_runtime.jsxs)("div",{style:{minWidth:"120px"},children:[(0,jsx_runtime.jsx)(Typography.Z,{color:"textSecondary",children:title}),(0,jsx_runtime.jsx)(Typography.Z,{color:"textSecondary",children:s[1]===s[2]?s[1]+1:"[ ".concat(s[1]+1," - ").concat(s[2]+1," ]")})]})]}),(0,jsx_runtime.jsx)("div",{className:classes.segmentsColPixelSlider,children:(0,jsx_runtime.jsx)(EditVirtuals_PixelSlider,{s:s,handleRangeSegment:function handleRangeSegment(start,end){var newSegments=segments.map((function(seg,index){return index===i?[seg[0],start,end,seg[3]]:seg}));updateSegments(virtual.id,newSegments).then((function(){getVirtuals(),calib&&(highlightSegment(virtual.id,newSegments[i][0],newSegments[i][1],newSegments[i][2],newSegments[i][3]),setActiveSegment(i))}))}})}),(0,jsx_runtime.jsxs)("div",{className:classes.segmentsColActions,children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(Button.Z,{variant:s[3]?"contained":"outlined",color:s[3]?"primary":"inherit",endIcon:(0,jsx_runtime.jsx)(SwapHoriz.Z,{}),onClick:function handleInvert(){var newSegments=segments.map((function(seg,index){return index===i?[seg[0],seg[1],seg[2],!seg[3]]:seg}));updateSegments(virtual.id,newSegments).then((function(){getVirtuals(),calib&&(highlightSegment(virtual.id,newSegments[i][0],newSegments[i][1],newSegments[i][2],newSegments[i][3]),setActiveSegment(i))}))},style:{margin:"0 1rem 0 1.5rem"},children:"Flip"})}),(0,jsx_runtime.jsx)(Popover.Z,{variant:"outlined",color:"primary",onConfirm:function handleDeleteSegment(){var newSegments=segments.filter((function(_seg,index){return index!==i}));updateSegments(virtual.id,newSegments).then((function(){getVirtuals(),calib&&(highlightOffSegment(virtual.id),setActiveSegment(-1))}))},style:{padding:"5px"}})]})]})})},EditVirtuals_Segment=Segment;try{Segment.displayName="Segment",Segment.__docgenInfo={description:"",displayName:"Segment",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Devices/EditVirtuals/Segment.tsx#Segment"]={docgenInfo:Segment.__docgenInfo,name:"Segment",path:"src/pages/Devices/EditVirtuals/Segment.tsx#Segment"})}catch(__react_docgen_typescript_loader_error){}var EditVirtuals_styles=(0,makeStyles.Z)((function(){return{appBar:{position:"relative",marginBottom:"1rem"},title:{flex:1},dialog:{},segmentTitle:{display:"flex",borderBottom:"1px dashed #aaa",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0",margin:"0 1rem"},segmentButtonWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0",margin:"0 1rem"},cloudEffectCard:{cursor:"pointer",width:280}}})),Box=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),index_esm=__webpack_require__("./node_modules/react-zoom-pan-pinch/dist/index.esm.js"),M_styles=(0,makeStyles.Z)((function(){return{gridCell:{cursor:"copy",border:"1px solid #666",background:"#111",width:100,height:100,"&:hover":{background:"#999"}},gridCellContainer:{background:"#111",display:"flex",justifyContent:"center",alignItems:"center"},gridCellInner:{display:"flex",flexWrap:"wrap",height:"100%",width:"100%"},pixel:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",height:"98px",background:"#444",width:"98px",border:"5px solid #111",boxSizing:"border-box",padding:"8px",borderRadius:"10px"},centered:{display:"flex",width:"100%",justifyContent:"space-between"}}})),MCell={deviceId:"",pixel:0},getMaxRange=function getMaxRange(direction,row,col,rowN,colN){var maxRange=0;return direction.includes("right")?(maxRange=colN*rowN-(row*colN+col),direction.includes("flip")&&(maxRange=row*colN+colN-col)):direction.includes("left")?(maxRange=row*colN+col+1,direction.includes("flip")&&(maxRange=(rowN-row-1)*colN+col+1)):direction.includes("bottom")?(maxRange=colN*rowN-(rowN*col+(rowN-row-1)),direction.includes("flip")&&(maxRange=rowN*col+(rowN-row))):direction.includes("top")&&(maxRange=rowN*col+row+1,direction.includes("flip")&&(maxRange=colN*rowN-(rowN*col+(rowN-row-1)))),maxRange},clone=function clone(input){return JSON.parse(JSON.stringify(input))};try{getMaxRange.displayName="getMaxRange",getMaxRange.__docgenInfo={description:"Calculates the maximum available pixel given the input data",displayName:"getMaxRange",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Devices/EditVirtuals/EditMatrix/M.utils.tsx#getMaxRange"]={docgenInfo:getMaxRange.__docgenInfo,name:"getMaxRange",path:"src/pages/Devices/EditVirtuals/EditMatrix/M.utils.tsx#getMaxRange"})}catch(__react_docgen_typescript_loader_error){}try{clone.displayName="clone",clone.__docgenInfo={description:"deep clone",displayName:"clone",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Devices/EditVirtuals/EditMatrix/M.utils.tsx#clone"]={docgenInfo:clone.__docgenInfo,name:"clone",path:"src/pages/Devices/EditVirtuals/EditMatrix/M.utils.tsx#clone"})}catch(__react_docgen_typescript_loader_error){}var Alert=__webpack_require__("./node_modules/@mui/material/Alert/Alert.js"),MWrapper=function MWrapper(_ref){var children=_ref.children;return(0,jsx_runtime.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",maxHeight:"80vh"},children:[(0,jsx_runtime.jsxs)(Alert.Z,{severity:"info",sx:{width:500,marginBottom:2},children:[(0,jsx_runtime.jsx)("strong",{children:"Concept Draft"}),(0,jsx_runtime.jsxs)("ul",{style:{padding:"0 1rem"},children:[(0,jsx_runtime.jsx)("li",{children:"Use Mousewheel to Zoom"}),(0,jsx_runtime.jsx)("li",{children:"Use left-click with drag&drop to move around"}),(0,jsx_runtime.jsx)("li",{children:"Use right-click to assign Pixels"})]})]}),children]})},EditMatrix_MWrapper=MWrapper;try{MWrapper.displayName="MWrapper",MWrapper.__docgenInfo={description:"",displayName:"MWrapper",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Devices/EditVirtuals/EditMatrix/MWrapper.tsx#MWrapper"]={docgenInfo:MWrapper.__docgenInfo,name:"MWrapper",path:"src/pages/Devices/EditVirtuals/EditMatrix/MWrapper.tsx#MWrapper"})}catch(__react_docgen_typescript_loader_error){}var Rotate90DegreesCw=__webpack_require__("./node_modules/@mui/icons-material/esm/Rotate90DegreesCw.js"),SwapVert=__webpack_require__("./node_modules/@mui/icons-material/esm/SwapVert.js"),Save=__webpack_require__("./node_modules/@mui/icons-material/esm/Save.js"),Stack=__webpack_require__("./node_modules/@mui/material/Stack/Stack.js"),ledfx=__webpack_require__("./src/api/ledfx.ts"),MControls=function MControls(_ref){var rowN=_ref.rowN,colN=_ref.colN,setRowNumber=_ref.setRowNumber,setColNumber=_ref.setColNumber,virtual=_ref.virtual,m=_ref.m,setM=_ref.setM;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(Stack.Z,{direction:"row",width:500,justifyContent:"space-between",children:["Rows:",(0,jsx_runtime.jsx)(Box.Z,{width:400,children:(0,jsx_runtime.jsx)(Slider.ZP,{min:1,max:50,value:rowN,onChange:function onChange(e,newRowNumber){return"number"==typeof newRowNumber&&setRowNumber(newRowNumber)}})}),rowN]}),(0,jsx_runtime.jsxs)(Stack.Z,{direction:"row",width:500,justifyContent:"space-between",children:["Columns:",(0,jsx_runtime.jsx)(Box.Z,{width:400,children:(0,jsx_runtime.jsx)(Slider.ZP,{min:1,max:50,value:colN,onChange:function onChange(e,newColNumber){return"number"==typeof newColNumber&&setColNumber(newColNumber)}})}),colN]}),(0,jsx_runtime.jsxs)(Stack.Z,{direction:"row",width:500,justifyContent:"space-between",margin:"1rem 0",children:[(0,jsx_runtime.jsxs)(Stack.Z,{direction:"row",justifyContent:"flex-start",children:[(0,jsx_runtime.jsx)(Button.Z,{style:{marginRight:8},onClick:function onClick(){return setM((0,helpers.p4)(m))},children:(0,jsx_runtime.jsx)(Rotate90DegreesCw.Z,{})}),(0,jsx_runtime.jsx)(Button.Z,{style:{marginRight:8},onClick:function onClick(){var toReverse=JSON.parse(JSON.stringify(m));setM(toReverse.reverse())},children:(0,jsx_runtime.jsx)(SwapVert.Z,{})}),(0,jsx_runtime.jsx)(Button.Z,{style:{marginRight:32},onClick:function onClick(){for(var toReverse=JSON.parse(JSON.stringify(m)),index=0;index<toReverse.length;index+=1)toReverse[index]=toReverse[index].reverse();setM(toReverse)},children:(0,jsx_runtime.jsx)(SwapHoriz.Z,{})})]}),(0,jsx_runtime.jsxs)(Stack.Z,{direction:"row",justifyContent:"flex-start",children:[(0,jsx_runtime.jsx)(Popover.Z,{style:{marginRight:8},color:"inherit",variant:"outlined",onConfirm:function onConfirm(){setM(Array(rowN).fill(Array(colN).fill(MCell)))}}),(0,jsx_runtime.jsx)(Button.Z,{onClick:function onClick(){return(0,ledfx._)("/api/virtuals","POST",{config:(0,objectSpread2.Z)((0,objectSpread2.Z)({},virtual.config),{},{rows:rowN}),matrix:m,id:virtual.id})},startIcon:(0,jsx_runtime.jsx)(Save.Z,{}),children:"Save"})]})]})]})},EditMatrix_MControls=MControls;try{MControls.displayName="MControls",MControls.__docgenInfo={description:"",displayName:"MControls",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Devices/EditVirtuals/EditMatrix/MControls.tsx#MControls"]={docgenInfo:MControls.__docgenInfo,name:"MControls",path:"src/pages/Devices/EditVirtuals/EditMatrix/MControls.tsx#MControls"})}catch(__react_docgen_typescript_loader_error){}var Chip=__webpack_require__("./node_modules/@mui/material/Chip/Chip.js"),Divider=__webpack_require__("./node_modules/@mui/material/Divider/Divider.js");var right=__webpack_require__.p+"static/media/right.8775cfd22ed2818e1b16f081069c2923.svg";var right_snake=__webpack_require__.p+"static/media/right-snake.6983b692e38db714bf79b160724c257d.svg";var right_flip=__webpack_require__.p+"static/media/right-flip.ee0c2c4f7beeb1dcafbae79eaa805136.svg";var right_snake_flip=__webpack_require__.p+"static/media/right-snake-flip.f96ec7bde3c5a4cf0c2eca7baef5c9de.svg";var bottom=__webpack_require__.p+"static/media/bottom.a21e0d9f6acb05338a47156a20180f84.svg";var bottom_flip=__webpack_require__.p+"static/media/bottom-flip.3f4daf4d6d88070442ddb922d8960a2f.svg";var bottom_snake=__webpack_require__.p+"static/media/bottom-snake.edf71a8cc42801fc8b4a3434004bb8f6.svg";var bottom_snake_flip=__webpack_require__.p+"static/media/bottom-snake-flip.06492dd29f4a94e351cdee23b75c0b65.svg";var left=__webpack_require__.p+"static/media/left.6c63e1c7ab3b6eb5b529b2615d0b42b6.svg";var left_snake=__webpack_require__.p+"static/media/left-snake.d8ae12ecf500a501893152586ada57c5.svg";var left_flip=__webpack_require__.p+"static/media/left-flip.808e4757266de216d8a82803b30d9edb.svg";var left_snake_flip=__webpack_require__.p+"static/media/left-snake-flip.b0583a65e4b60342e3cdad0f6b0287f6.svg";var assets_top=__webpack_require__.p+"static/media/top.536d9db34ef3c838ecc2aeffa8888c06.svg";var top_snake=__webpack_require__.p+"static/media/top-snake.ce42f1179932f64a49fefceb2d82e532.svg";var top_flip=__webpack_require__.p+"static/media/top-flip.0b9db35d6f95c25e7514433a48e7532b.svg";var top_snake_flip=__webpack_require__.p+"static/media/top-snake-flip.137043ab44b03dd6cc1169a753ca8b29.svg",MFillSelector=function MFillSelector(_ref){var direction=_ref.direction,_onChange=_ref.onChange;return(0,jsx_runtime.jsx)(BladeFrame.Z,{title:"Fill Direction",full:!1,style:{marginBottom:"1rem"},children:(0,jsx_runtime.jsxs)(Select.Z,{value:direction,variant:"standard",fullWidth:!0,MenuProps:{PaperProps:{style:{maxHeight:300}}},onChange:function onChange(e){return _onChange(e.target.value)},children:[(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"right",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Linear",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Right",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Down",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:right,alt:"rightSnake"})]})}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"right-flip",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Linear",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Right",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Up",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:right_flip,alt:"rightFlip"})]})}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"right-snake",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Snake",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Right",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Down",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:right_snake,alt:"rightSnake"})]})}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"right-snake-flip",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Snake",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Right",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Up",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:right_snake_flip,alt:"rightSnakeFlip"})]})}),(0,jsx_runtime.jsx)(Divider.Z,{}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"bottom",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Linear",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Down",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Right",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:bottom,alt:"bottomSnake"})]})}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"bottom-flip",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Linear",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Down",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Left",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:bottom_flip,alt:"bottomSnakeFlip"})]})}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"bottom-snake",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Snake",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Down",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Right",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:bottom_snake,alt:"bottomSnake"})]})}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"bottom-snake-flip",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Snake",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Down",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Left",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:bottom_snake_flip,alt:"bottomSnakeFlip"})]})}),(0,jsx_runtime.jsx)(Divider.Z,{}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"left-flip",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Linear",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Left",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Down",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:left_flip,alt:"leftFlip"})]})}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"left",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Linear",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Left",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Up",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:left,alt:"left"})]})}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"left-snake",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Snake",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Left",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Up",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:left_snake,alt:"leftSnake"})]})}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"left-snake-flip",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Snake",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Left",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Down",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:left_snake_flip,alt:"leftSnakeFlip"})]})}),(0,jsx_runtime.jsx)(Divider.Z,{}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"top",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Linear",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Up",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Left",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:assets_top,alt:"top"})]})}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"top-flip",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Linear",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Up",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Right",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:top_flip,alt:"topFlip"})]})}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"top-snake",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Snake",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Up",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Left",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:top_snake,alt:"topSnake"})]})}),(0,jsx_runtime.jsx)(MenuItem.Z,{sx:{justifyContent:"space-between"},value:"top-snake-flip",children:(0,jsx_runtime.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,jsx_runtime.jsxs)("div",{children:["Snake",(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Up",variant:"outlined"}),(0,jsx_runtime.jsx)(Chip.Z,{size:"small",label:"Right",variant:"outlined"})]}),(0,jsx_runtime.jsx)("img",{width:"30px",src:top_snake_flip,alt:"topSnakeFlip"})]})})]})})},EditMatrix_MFillSelector=MFillSelector;try{MFillSelector.displayName="MFillSelector",MFillSelector.__docgenInfo={description:"",displayName:"MFillSelector",props:{direction:{defaultValue:null,description:"",name:"direction",required:!0,type:{name:"enum",value:[{value:'"bottom"'},{value:'"top"'},{value:'"left"'},{value:'"right"'},{value:'"right-snake"'},{value:'"right-flip"'},{value:'"right-snake-flip"'},{value:'"left-snake"'},{value:'"left-flip"'},{value:'"left-snake-flip"'},{value:'"top-snake"'},{value:'"top-flip"'},{value:'"top-snake-flip"'},{value:'"bottom-snake"'},{value:'"bottom-flip"'},{value:'"bottom-snake-flip"'}]}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Devices/EditVirtuals/EditMatrix/MFillSelector.tsx#MFillSelector"]={docgenInfo:MFillSelector.__docgenInfo,name:"MFillSelector",path:"src/pages/Devices/EditVirtuals/EditMatrix/MFillSelector.tsx#MFillSelector"})}catch(__react_docgen_typescript_loader_error){}var MDialogTitle=function MDialogTitle(_ref){var _m$currentCell$1$curr,currentCell=_ref.currentCell,m=_ref.m,classes=M_styles();return(0,jsx_runtime.jsx)(DialogTitle.Z,{children:(0,jsx_runtime.jsxs)("div",{className:classes.centered,children:[currentCell[1]>=0&&currentCell[0]>=0&&""!==(null===(_m$currentCell$1$curr=m[currentCell[1]][currentCell[0]])||void 0===_m$currentCell$1$curr?void 0:_m$currentCell$1$curr.deviceId)?"Edit":"Assign"," ","Pixel",(0,jsx_runtime.jsxs)(Typography.Z,{variant:"caption",align:"right",children:["Row: ",currentCell[1]+1,(0,jsx_runtime.jsx)("br",{}),"Column: ",currentCell[0]+1]})]})})},EditMatrix_MDialogTitle=MDialogTitle;try{MDialogTitle.displayName="MDialogTitle",MDialogTitle.__docgenInfo={description:"",displayName:"MDialogTitle",props:{currentCell:{defaultValue:null,description:"",name:"currentCell",required:!0,type:{name:"number[]"}},m:{defaultValue:null,description:"",name:"m",required:!0,type:{name:"any[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Devices/EditVirtuals/EditMatrix/MDialogTitle.tsx#MDialogTitle"]={docgenInfo:MDialogTitle.__docgenInfo,name:"MDialogTitle",path:"src/pages/Devices/EditVirtuals/EditMatrix/MDialogTitle.tsx#MDialogTitle"})}catch(__react_docgen_typescript_loader_error){}var Switch=__webpack_require__("./node_modules/@mui/material/Switch/Switch.js"),MSwitch=function MSwitch(_ref){var group=_ref.group,setGroup=_ref.setGroup;return(0,jsx_runtime.jsxs)(BladeFrame.Z,{title:"Group",style:{justifyContent:"space-between",paddingRight:2,marginBottom:"1rem"},children:[(0,jsx_runtime.jsx)(Typography.Z,{children:"Assign multiple"}),(0,jsx_runtime.jsx)(Switch.Z,{checked:group,onClick:function onClick(){return setGroup(!group)}})]})},EditMatrix_MSwitch=MSwitch;try{MSwitch.displayName="MSwitch",MSwitch.__docgenInfo={description:"",displayName:"MSwitch",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Devices/EditVirtuals/EditMatrix/MSwitch.tsx#MSwitch"]={docgenInfo:MSwitch.__docgenInfo,name:"MSwitch",path:"src/pages/Devices/EditVirtuals/EditMatrix/MSwitch.tsx#MSwitch"})}catch(__react_docgen_typescript_loader_error){}var MSlider=function MSlider(_ref){var group=_ref.group,devices=_ref.devices,currentDevice=_ref.currentDevice,selectedPixel=_ref.selectedPixel,handleSliderChange=_ref.handleSliderChange;return(0,jsx_runtime.jsx)(BladeFrame.Z,{title:"Pixel".concat(group?"s":""),full:!1,style:{marginBottom:"1rem"},children:(0,jsx_runtime.jsx)(Slider.ZP,{marks:[{value:0,label:"0"},{value:devices[currentDevice].config.pixel_count,label:devices[currentDevice].config.pixel_count}],valueLabelDisplay:"auto",min:0,max:devices[currentDevice].config.pixel_count,value:selectedPixel,onChange:handleSliderChange})})},EditMatrix_MSlider=MSlider;try{MSlider.displayName="MSlider",MSlider.__docgenInfo={description:"",displayName:"MSlider",props:{group:{defaultValue:null,description:"",name:"group",required:!0,type:{name:"boolean"}},devices:{defaultValue:null,description:"",name:"devices",required:!0,type:{name:"any"}},selectedPixel:{defaultValue:null,description:"",name:"selectedPixel",required:!0,type:{name:"number | number[]"}},currentDevice:{defaultValue:null,description:"",name:"currentDevice",required:!0,type:{name:"any"}},handleSliderChange:{defaultValue:null,description:"",name:"handleSliderChange",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Devices/EditVirtuals/EditMatrix/MSlider.tsx#MSlider"]={docgenInfo:MSlider.__docgenInfo,name:"MSlider",path:"src/pages/Devices/EditVirtuals/EditMatrix/MSlider.tsx#MSlider"})}catch(__react_docgen_typescript_loader_error){}var EditMatrix_M=function EditMatrix(_ref){var virtual=_ref.virtual,classes=M_styles(),deviceRef=(0,react.useRef)(null),devices=(0,useStore.Z)((function(state){return state.devices})),_useState=(0,react.useState)(""),_useState2=(0,slicedToArray.Z)(_useState,2),currentDevice=_useState2[0],setCurrentDevice=_useState2[1],_useState3=(0,react.useState)(4),_useState4=(0,slicedToArray.Z)(_useState3,2),rowN=_useState4[0],setRowNumber=_useState4[1],_useState5=(0,react.useState)(6),_useState6=(0,slicedToArray.Z)(_useState5,2),colN=_useState6[0],setColNumber=_useState6[1],_useState7=(0,react.useState)([-1,-1]),_useState8=(0,slicedToArray.Z)(_useState7,2),currentCell=_useState8[0],setCurrentCell=_useState8[1],_useState9=(0,react.useState)(!1),_useState10=(0,slicedToArray.Z)(_useState9,2),open=_useState10[0],setOpen=_useState10[1],_useState11=(0,react.useState)(!1),_useState12=(0,slicedToArray.Z)(_useState11,2),group=_useState12[0],setGroup=_useState12[1],_useState13=(0,react.useState)(0),_useState14=(0,slicedToArray.Z)(_useState13,2),selectedPixel=_useState14[0],setSelectedPixel=_useState14[1],_useState15=(0,react.useState)("right"),_useState16=(0,slicedToArray.Z)(_useState15,2),direction=_useState16[0],setDirection=_useState16[1],_useState17=(0,react.useState)(Array(rowN).fill(Array(colN).fill(MCell))),_useState18=(0,slicedToArray.Z)(_useState17,2),m=_useState18[0],setM=_useState18[1],closeClear=function closeClear(){setOpen(!1),setCurrentDevice(""),setSelectedPixel(0),setGroup(!1)};return(0,react.useEffect)((function(){group?"number"==typeof selectedPixel&&setSelectedPixel([selectedPixel,selectedPixel+1]):"number"!=typeof selectedPixel&&setSelectedPixel(selectedPixel[0])}),[group]),(0,react.useEffect)((function(){setM(Array(rowN).fill(Array(colN).fill(MCell)))}),[rowN,colN]),(0,jsx_runtime.jsxs)(EditMatrix_MWrapper,{children:[(0,jsx_runtime.jsx)(EditMatrix_MControls,{rowN:rowN,colN:colN,setRowNumber:setRowNumber,setColNumber:setColNumber,virtual:virtual,m:m,setM:setM}),(0,jsx_runtime.jsx)(index_esm.d$,{centerZoomedOut:!0,minScale:.1,initialScale:100*colN<window.innerWidth||100*rowN<.8*window.innerHeight?1:.1,children:(0,jsx_runtime.jsx)(index_esm.Uv,{children:(0,jsx_runtime.jsxs)("div",{className:classes.gridCellContainer,style:{width:100*colN,height:100*rowN},children:[(0,jsx_runtime.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:m.map((function(yzrow,currentRowIndex){return(0,jsx_runtime.jsx)("div",{style:{display:"flex"},children:yzrow.map((function(yzcolumn,currentColIndex){return(0,jsx_runtime.jsx)(Box.Z,{className:classes.gridCell,onContextMenu:function onContextMenu(e){e.preventDefault(),setCurrentCell([currentColIndex,currentRowIndex]),setCurrentDevice(""!==yzcolumn.deviceId?yzcolumn.deviceId:""),setSelectedPixel(yzcolumn.pixel||0),setOpen(!0)},children:""!==yzcolumn.deviceId&&(0,jsx_runtime.jsxs)("div",{className:classes.pixel,children:[(0,jsx_runtime.jsx)(Typography.Z,{variant:"caption",children:devices[yzcolumn.deviceId].config.name}),(0,jsx_runtime.jsx)(Typography.Z,{variant:"caption",children:yzcolumn.pixel})]})},"col-".concat(currentColIndex))}))},"row-".concat(currentRowIndex))}))}),(0,jsx_runtime.jsxs)(Dialog.Z,{onClose:function onClose(){return closeClear()},open:open,PaperProps:{sx:{width:"100%",maxWidth:320}},children:[(0,jsx_runtime.jsx)(EditMatrix_MDialogTitle,{currentCell:currentCell,m:m}),(0,jsx_runtime.jsxs)(DialogContent.Z,{children:[(0,jsx_runtime.jsx)(BladeFrame.Z,{title:"Device",style:{marginBottom:"1rem"},children:(0,jsx_runtime.jsx)(Select.Z,{value:currentDevice,onChange:function onChange(e){return setCurrentDevice(e.target.value||"")},inputRef:deviceRef,variant:"standard",fullWidth:!0,children:devices&&Object.keys(devices).map((function(d,i){return(0,jsx_runtime.jsx)(MenuItem.Z,{value:devices[d].id,children:devices[d].config.name},i)}))})}),currentDevice&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(EditMatrix_MSwitch,{group:group,setGroup:setGroup}),group&&(0,jsx_runtime.jsx)(EditMatrix_MFillSelector,{direction:direction,onChange:function handleDirectionChange(d){if(setDirection(d),"number"!=typeof selectedPixel){var _currentCell=(0,slicedToArray.Z)(currentCell,2),col=_currentCell[0],row=_currentCell[1],maxRange=getMaxRange(direction,row,col,rowN,colN);selectedPixel[1]-selectedPixel[0]>maxRange&&setSelectedPixel([selectedPixel[0],selectedPixel[0]+maxRange])}}}),(0,jsx_runtime.jsx)(EditMatrix_MSlider,{group:group,devices:devices,currentDevice:currentDevice,selectedPixel:selectedPixel,handleSliderChange:function handleSliderChange(e,newPixelRange,activeThumb){if("number"!=typeof newPixelRange){var _currentCell3=(0,slicedToArray.Z)(currentCell,2),col=_currentCell3[0],row=_currentCell3[1],maxRange=getMaxRange(direction,row,col,rowN,colN),distance=Math.abs(newPixelRange[1]-newPixelRange[0]),adjustedLeftThumb=newPixelRange[0],adjustedRightThumb=newPixelRange[1];distance>maxRange&&(0===activeThumb?adjustedRightThumb=adjustedLeftThumb+maxRange:adjustedLeftThumb=adjustedRightThumb-maxRange),setSelectedPixel("top"===direction?[adjustedRightThumb,adjustedLeftThumb]:[adjustedLeftThumb,adjustedRightThumb])}else setSelectedPixel(newPixelRange)}})]})]}),(0,jsx_runtime.jsxs)(DialogActions.Z,{children:[(0,jsx_runtime.jsx)(Button.Z,{onClick:function onClick(){return function clearPixel(){var updatedM=clone(m),_currentCell4=(0,slicedToArray.Z)(currentCell,2),col=_currentCell4[0];updatedM[_currentCell4[1]][col]={deviceId:"",pixel:0},setM(updatedM),closeClear()}()},children:"Clear"}),(0,jsx_runtime.jsx)(Button.Z,{onClick:function onClick(){return function assignPixels(){var updatedM=clone(m),_currentCell2=(0,slicedToArray.Z)(currentCell,2),col=_currentCell2[0],row=_currentCell2[1];if("number"==typeof selectedPixel)updatedM[row][col]={deviceId:currentDevice,pixel:selectedPixel};else for(var index=0;index<Math.abs(selectedPixel[1]-selectedPixel[0]);index+=1){var newM={deviceId:currentDevice,pixel:Math.min(selectedPixel[0],selectedPixel[1])+index};direction.includes("right")?direction.includes("flip")?updatedM[row-Math.floor((index+col)/colN)][(index+col)%colN]=newM:updatedM[row+Math.floor((index+col)/colN)][(index+col)%colN]=newM:direction.includes("bottom")?direction.includes("flip")?updatedM[(index+row)%rowN][col-Math.floor((index+row)/rowN)]=newM:updatedM[(index+row)%rowN][col+Math.floor((index+row)/rowN)]=newM:direction.includes("left")?direction.includes("flip")?updatedM[row+Math.abs(Math.floor((col-index)/colN))][(colN+(col-index)%colN)%colN]=newM:updatedM[row-Math.abs(Math.floor((col-index)/colN))][(colN+(col-index)%colN)%colN]=newM:direction.includes("top")&&(direction.includes("flip")?updatedM[(rowN+(row-index)%rowN)%rowN][col+Math.abs(Math.floor((row-index)/rowN))]=newM:updatedM[(rowN+(row-index)%rowN)%rowN][col-Math.abs(Math.floor((row-index)/rowN))]=newM)}if(direction.includes("right-snake"))if(direction.includes("flip"))for(var i=row;i>=0;i-=1){var currentRow=(0,toConsumableArray.Z)(updatedM[i]);(i+row)%2==1&&(updatedM[i]=currentRow.reverse())}else for(var _i=row;_i<rowN;_i+=1){var _currentRow=(0,toConsumableArray.Z)(updatedM[_i]);(_i+row)%2==1&&(updatedM[_i]=_currentRow.reverse())}if(direction.includes("bottom-snake"))if(direction.includes("flip")){for(var mat=clone(updatedM),temp=(0,helpers.p4)(mat),_i2=col;_i2>=0;_i2-=1){var currentCol=(0,toConsumableArray.Z)(temp[_i2]);(_i2+col)%2==1&&(temp[_i2]=currentCol.reverse())}updatedM=(0,helpers.p4)(temp)}else{for(var _mat=clone(updatedM),_temp=(0,helpers.p4)(_mat),_i3=col;_i3<colN;_i3+=1){var _currentCol=(0,toConsumableArray.Z)(_temp[_i3]);(_i3+col)%2==1&&(_temp[_i3]=_currentCol.reverse())}updatedM=(0,helpers.p4)(_temp)}if(direction.includes("left-snake"))if(direction.includes("flip"))for(var _i4=row;_i4<rowN;_i4+=1){var _currentRow2=(0,toConsumableArray.Z)(updatedM[_i4]);(_i4+row)%2==1&&(updatedM[_i4]=_currentRow2.reverse())}else for(var _i5=row;_i5>=0;_i5-=1){var _currentRow3=(0,toConsumableArray.Z)(updatedM[_i5]);(_i5+row)%2==1&&(updatedM[_i5]=_currentRow3.reverse())}if(direction.includes("top-snake"))if(direction.includes("flip")){for(var _mat2=clone(updatedM),_temp2=(0,helpers.p4)(_mat2),_i6=col;_i6<colN;_i6+=1){var _currentCol2=(0,toConsumableArray.Z)(_temp2[_i6]);(_i6+col)%2==1&&(_temp2[_i6]=_currentCol2.reverse())}updatedM=(0,helpers.p4)(_temp2)}else{for(var _mat3=clone(updatedM),_temp3=(0,helpers.p4)(_mat3),_i7=col;_i7>=0;_i7-=1){var _currentCol3=(0,toConsumableArray.Z)(_temp3[_i7]);(_i7+col)%2==1&&(_temp3[_i7]=_currentCol3.reverse())}updatedM=(0,helpers.p4)(_temp3)}setM(updatedM),closeClear()}()},children:"Save"})]})]})]})})})]})};try{M.displayName="M",M.__docgenInfo={description:"",displayName:"M",props:{virtual:{defaultValue:null,description:"",name:"virtual",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Devices/EditVirtuals/EditMatrix/M.tsx#M"]={docgenInfo:M.__docgenInfo,name:"M",path:"src/pages/Devices/EditVirtuals/EditMatrix/M.tsx#M"})}catch(__react_docgen_typescript_loader_error){}var BladeIcon=__webpack_require__("./src/components/Icons/BladeIcon/BladeIcon.tsx"),Transition=react.forwardRef((function Transition(props,ref){return(0,jsx_runtime.jsx)(Slide.Z,(0,objectSpread2.Z)({direction:"up",ref:ref},props))})),MuiMenuItem=react.forwardRef((function(props,ref){var children=props.children;return(0,jsx_runtime.jsx)(MenuItem.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({ref:ref},props),{},{children:children}))}));function EditVirtuals(_ref){var _virtual$segments,virtId=_ref.virtId,_ref$icon=_ref.icon,icon=void 0===_ref$icon?(0,jsx_runtime.jsx)(esm_Settings.Z,{}):_ref$icon,startIcon=_ref.startIcon,_ref$label=_ref.label,label=void 0===_ref$label?"":_ref$label,type=_ref.type,className=_ref.className,_ref$color=_ref.color,color=void 0===_ref$color?"inherit":_ref$color,_ref$variant=_ref.variant,variant=void 0===_ref$variant?"contained":_ref$variant,_ref$onClick=_ref.onClick,onClick=void 0===_ref$onClick?function(){}:_ref$onClick,innerKey=_ref.innerKey,_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),matrix=_useState2[0],setMatrix=_useState2[1],features=(0,useStore.Z)((function(state){return state.features})),currentVirtual=(0,useStore.Z)((function(state){return state.currentVirtual})),setCurrentVirtual=(0,useStore.Z)((function(state){return state.setCurrentVirtual})),calibrationMode=(0,useStore.Z)((function(state){return state.calibrationMode})),classes=EditVirtuals_styles(),showSnackbar=(0,useStore.Z)((function(state){return state.ui.showSnackbar})),getDevices=(0,useStore.Z)((function(state){return state.getDevices})),virtuals=(0,useStore.Z)((function(state){return state.virtuals})),setDialogOpenEditVirtual=(0,useStore.Z)((function(state){return state.setDialogOpenEditVirtual})),activeSegment=(0,useStore.Z)((function(state){return state.activeSegment})),highlightSegment=(0,useStore.Z)((function(state){return state.highlightSegment})),virtual=virtuals[currentVirtual||virtId],_React$useState=react.useState(!!currentVirtual||!1),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1],_React$useState3=react.useState(!0),_React$useState4=(0,slicedToArray.Z)(_React$useState3,2),calib=_React$useState4[0],setCalib=_React$useState4[1],handleClickOpen=function handleClickOpen(){setOpen(!0)},handleClose=function handleClose(){var output=(0,helpers.m_)(virtual.segments),overlap=Object.keys(output).find((function(k){return output[k].overlap}));overlap?showSnackbar("warning","Overlapping in ".concat(overlap," detected! Please Check your config")):(setOpen(!1),setDialogOpenEditVirtual(!1),setCurrentVirtual(null),onClick())};return(0,react.useEffect)((function(){getDevices()}),[getDevices]),(0,react.useEffect)((function(){currentVirtual&&"hidden"===type&&setOpen(!0)}),[currentVirtual]),(0,react.useEffect)((function(){return null!=virtual&&virtual.id&&open&&calibrationMode(null==virtual?void 0:virtual.id,"on"),function(){null!=virtual&&virtual.id&&open&&calibrationMode(null==virtual?void 0:virtual.id,"off")}}),[null==virtual?void 0:virtual.id,open]),virtual&&virtual.config?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["menuItem"===type?(0,jsx_runtime.jsxs)(MuiMenuItem,{className:className,onClick:function onClick(e){e.preventDefault(),handleClickOpen()},children:[(0,jsx_runtime.jsx)(ListItemIcon.Z,{children:icon}),label]},innerKey):"hidden"===type?null:(0,jsx_runtime.jsxs)(Button.Z,{variant:variant,startIcon:startIcon,color:color,onClick:function onClick(){handleClickOpen()},size:"small",className:className,children:[label,!startIcon&&icon]}),(0,jsx_runtime.jsxs)(Dialog.Z,{fullScreen:!0,open:open,onClose:handleClose,TransitionComponent:Transition,children:[(0,jsx_runtime.jsx)(AppBar.Z,{enableColorOnDark:!0,className:classes.appBar,children:(0,jsx_runtime.jsxs)(Toolbar.Z,{children:[(0,jsx_runtime.jsx)(Button.Z,{autoFocus:!0,color:"primary",variant:"contained",startIcon:(0,jsx_runtime.jsx)(NavigateBefore.Z,{}),onClick:handleClose,style:{marginRight:"1rem"},children:"back"}),features.matrix&&(0,jsx_runtime.jsxs)(ToggleButtonGroup.Z,{value:matrix,style:{marginRight:"1rem"},size:"small",exclusive:!0,onChange:function onChange(){return setMatrix(!matrix)},"aria-label":"mode",children:[(0,jsx_runtime.jsx)(ToggleButton.Z,{value:!1,children:(0,jsx_runtime.jsx)(BladeIcon.Z,{name:"mdi:led-strip"})}),(0,jsx_runtime.jsx)(ToggleButton.Z,{value:!0,children:(0,jsx_runtime.jsx)(GridOn.Z,{})})]}),(0,jsx_runtime.jsxs)(Typography.Z,{variant:"h6",className:classes.title,children:[virtual.config.name," "]}),(0,jsx_runtime.jsx)(IconButton.Z,{onClick:function onClick(){calibrationMode(null==virtual?void 0:virtual.id,calib?"off":"on"),!calib&&virtual.segments[activeSegment]&&highlightSegment(virtual.id,virtual.segments[activeSegment][0],virtual.segments[activeSegment][1],virtual.segments[activeSegment][2],virtual.segments[activeSegment][3]),setCalib(!calib)},children:calib?(0,jsx_runtime.jsx)(esm_Visibility.Z,{}):(0,jsx_runtime.jsx)(VisibilityOff.Z,{})})]})}),matrix?(0,jsx_runtime.jsx)(EditMatrix_M,{virtual:virtual}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:classes.segmentTitle,children:(0,jsx_runtime.jsx)(Typography.Z,{variant:"caption",children:"Segments-Settings"})}),(null===(_virtual$segments=virtual.segments)||void 0===_virtual$segments?void 0:_virtual$segments.length)>0&&virtual.segments.map((function(s,i){return(0,jsx_runtime.jsx)(EditVirtuals_Segment,{s:s,i:i,virtual:virtual,segments:virtual.segments,calib:calib},i)})),(0,jsx_runtime.jsx)("div",{className:classes.segmentButtonWrapper,children:(0,jsx_runtime.jsx)(ConfirmationDialog,{virtual:virtual})})]})]})]}):null}try{EditVirtuals.displayName="EditVirtuals",EditVirtuals.__docgenInfo={description:"",displayName:"EditVirtuals",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Devices/EditVirtuals/EditVirtuals.tsx#EditVirtuals"]={docgenInfo:EditVirtuals.__docgenInfo,name:"EditVirtuals",path:"src/pages/Devices/EditVirtuals/EditVirtuals.tsx#EditVirtuals"})}catch(__react_docgen_typescript_loader_error){}var PixelGraph=function PixelGraph(_ref){var _devices$virtuals$vir,_devices$virtuals$vir2,virtId=_ref.virtId,_ref$dummy=_ref.dummy,dummy=void 0!==_ref$dummy&&_ref$dummy,_ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$active=_ref.active,active=void 0!==_ref$active&&_ref$active,_ref$intGraphs=_ref.intGraphs,intGraphs=void 0!==_ref$intGraphs&&_ref$intGraphs,_ref$showMatrix=_ref.showMatrix,showMatrix=void 0!==_ref$showMatrix&&_ref$showMatrix,_useState=(0,react.useState)([]),_useState2=(0,slicedToArray.Z)(_useState,2),pixels=_useState2[0],setPixels=_useState2[1],pixelGraphs=(0,useStore.Z)((function(state){return state.pixelGraphs})),virtuals=(0,useStore.Z)((function(state){return state.virtuals})),devices=(0,useStore.Z)((function(state){return state.devices})),graphs=(0,useStore.Z)((function(state){return state.graphs})),rows=virtuals[virtId].is_device?(null===(_devices$virtuals$vir=devices[virtuals[virtId].is_device])||void 0===_devices$virtuals$vir||null===(_devices$virtuals$vir2=_devices$virtuals$vir.config)||void 0===_devices$virtuals$vir2?void 0:_devices$virtuals$vir2.rows)||virtuals[virtId].config.rows||1:virtuals[virtId].config.rows||1;return(0,react.useEffect)((function(){var handleWebsockets=function handleWebsockets(e){e.detail.id===virtId&&setPixels(e.detail.pixels)};return document.addEventListener("YZ",handleWebsockets),function(){document.removeEventListener("YZ",handleWebsockets)}}),[virtuals,pixelGraphs]),graphs||intGraphs?dummy?(0,jsx_runtime.jsx)("div",{style:{maxWidth:"520px",display:"flex",width:"100%",borderRadius:"10px",overflow:"hidden",margin:"0.5rem 0 0 0"},className:"".concat(className," ").concat(active?"active":""),children:(0,jsx_runtime.jsx)("div",{style:{backgroundColor:"#0002",height:"20px",flex:1,borderRadius:"0"}},1)}):pixels&&pixels[0]&&pixels[0].length&&rows>1&&showMatrix?(0,jsx_runtime.jsx)("div",{style:{maxWidth:"520px",display:"flex",flexDirection:"column-reverse",width:"100%",borderRadius:"10px 10px 0 0",overflow:"hidden",margin:"0.5rem 0 0 0"},className:"".concat(className,"  ").concat(active?"active":""),children:Array.from(Array(rows).keys()).map((function(row){return(0,jsx_runtime.jsx)("div",{style:{maxWidth:"520px",display:"flex",width:"100%",borderRadius:"0",overflow:"hidden",margin:"0"},className:"".concat(className,"  ").concat(active?"active":""),children:pixels[0].slice(row*pixels[0].length/rows,(row+1)*pixels[0].length/rows).map((function(_p,i){return(0,jsx_runtime.jsx)("div",{style:{height:"38px",flex:1,border:"1px solid black",margin:"2px",borderRadius:"5px",backgroundColor:active?"rgb(".concat(pixels[0][row*pixels[0].length/rows+i],",").concat(pixels[1][row*pixels[0].length/rows+i],",").concat(pixels[2][row*pixels[0].length/rows+i],")"):"#0002"}},i)}))},"row-".concat(row))}))}):pixels&&pixels[0]&&pixels[0].length?(0,jsx_runtime.jsx)("div",{style:{maxWidth:"520px",display:"flex",width:"100%",borderRadius:"10px",overflow:"hidden",margin:"0.5rem 0 0 0"},className:"".concat(className,"  ").concat(active?"active":""),children:pixels[0].map((function(_p,i){return(0,jsx_runtime.jsx)("div",{style:{height:"20px",flex:1,borderRadius:"0",backgroundColor:active?"rgb(".concat(pixels[0][i],",").concat(pixels[1][i],",").concat(pixels[2][i],")"):"#0002"}},i)}))}):(0,jsx_runtime.jsx)("div",{style:{maxWidth:"520px",display:"flex",width:"100%",borderRadius:"10px",overflow:"hidden",margin:"0.5rem 0 0 0"},className:"".concat(className," ").concat(active?"active":""),children:(0,jsx_runtime.jsx)("div",{style:{height:"20px",borderRadius:"0",flex:1,backgroundColor:"#0002"}},1)}):null},components_PixelGraph=PixelGraph;try{PixelGraph.displayName="PixelGraph",PixelGraph.__docgenInfo={description:"",displayName:"PixelGraph",props:{virtId:{defaultValue:null,description:"",name:"virtId",required:!0,type:{name:"string"}},dummy:{defaultValue:{value:"false"},description:"",name:"dummy",required:!1,type:{name:"boolean"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},active:{defaultValue:{value:"false"},description:"",name:"active",required:!1,type:{name:"boolean"}},intGraphs:{defaultValue:{value:"false"},description:"",name:"intGraphs",required:!1,type:{name:"boolean"}},showMatrix:{defaultValue:{value:"false"},description:"",name:"showMatrix",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/PixelGraph.tsx#PixelGraph"]={docgenInfo:PixelGraph.__docgenInfo,name:"PixelGraph",path:"src/components/PixelGraph.tsx#PixelGraph"})}catch(__react_docgen_typescript_loader_error){}var DeviceCard_styles=(0,makeStyles.Z)((function(){return{virtualCardPortraitW:{margin:"0.5rem",display:"flex",alignItems:"flex-start",flexDirection:"column",minWidth:"230px",maxWidth:"400px",width:"100%",height:"100%",position:"relative",borderRadius:10,borderColor:"transparent",textDecoration:"none","@media (max-width: 410px)":{margin:"0.25rem 0"}},virtualCardPortrait:{padding:"1rem 0.7rem 0.7rem 0.7rem",display:"flex",alignItems:"flex-start",flexDirection:"column",minWidth:"230px",maxWidth:"400px",width:"100%",height:"100%",position:"relative",borderRadius:10,borderColor:"transparent"},virtualIconWrapper:{width:"50px",height:"55px",marginRight:"0.5rem"},virtualIcon:{marginBottom:"4px",marginRight:"0.5rem",fontSize:"50px",position:"absolute",transformOrigin:"top left","&.graphs":{transformOrigin:"center left"},transition:"transform 0.3s ease-in-out",transitionDelay:"0s","&.extended":{transform:"scale(1.7) translateY(-4px);",transformOrigin:"top left",transition:"transform 0.3s ease-in-out",transitionDelay:"0s"},"&.extended.graphs":{transform:"scale(1.25)",transformOrigin:"center left",transition:"transform 0.3s ease-in-out",transitionDelay:"0s"},"& svg":{transform:"unset",width:"100%",marginTop:"3px",height:"100%"}},virtualCardContainer:{display:"flex",alignItems:"center",width:"100%",height:"100%",minHeight:"73px",padding:"0 0.3rem",justifyContent:"space-between",flexDirection:"row"},virtualSubline:{padding:"0 0.5rem"},iconMedia:{height:140,display:"flex",alignItems:"center",margin:"0 auto",fontSize:100,"& > span:before":{position:"relative"}},editButton:{minWidth:"unset"},editButtonMobile:{minWidth:"unset",flexGrow:1},buttonBarMobile:{width:"100%",height:"100%",textAlign:"right"},buttonBarMobileWrapper:{height:110,display:"flex",margin:0,padding:"0.5rem 80px 0.5rem 0.5rem",background:"rgba(0,0,0,0.93)",color:"#fff","& > div, & > button":{flexGrow:1,flexBasis:"30%"},"&.extended.graphs":{height:"auto",paddingTop:0,"& button":{fontSize:"smaller"}}},pixelbar:{opacity:1,transitionDuration:"0s",width:"100%"},pixelbarOut:{opacity:.2,transition:"opacity",transitionDuration:"1s"}}})),DeviceCard=function DeviceCard(_ref){var deviceName=_ref.deviceName,online=_ref.online,virtId=_ref.virtId,index=_ref.index,handleDeleteDevice=_ref.handleDeleteDevice,handleEditVirtual=_ref.handleEditVirtual,handleEditDevice=_ref.handleEditDevice,handleClearEffect=_ref.handleClearEffect,handlePlayPause=_ref.handlePlayPause,linkTo=_ref.linkTo,additionalStyle=_ref.additionalStyle,iconName=_ref.iconName,graphsActive=_ref.graphsActive,colorIndicator=_ref.colorIndicator,effectName=_ref.effectName,isPlaying=_ref.isPlaying,isStreaming=_ref.isStreaming,previewOnly=_ref.previewOnly,isEffectSet=_ref.isEffectSet,transitionTime=_ref.transitionTime,isDevice=_ref.isDevice,graphsMulti=_ref.graphsMulti,showMatrix=_ref.showMatrix,activateDevice=_ref.activateDevice,classes=DeviceCard_styles(),theme=(0,useTheme.Z)(),_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),fade=_useState2[0],_useState3=(_useState2[1],(0,react.useState)(isEffectSet||isStreaming)),_useState4=(0,slicedToArray.Z)(_useState3,2),isActive=_useState4[0],setIsActive=_useState4[1],_useState5=(0,react.useState)(!1),_useState6=(0,slicedToArray.Z)(_useState5,2),expanded=_useState6[0],setExpanded=_useState6[1],handleExpandClick=function handleExpandClick(){setExpanded(!expanded)};return(0,react.useEffect)((function(){setIsActive(isEffectSet||isStreaming)}),[isEffectSet,isStreaming]),(0,jsx_runtime.jsx)(react_router_dom_dist.OL,{to:linkTo,className:"".concat(classes.virtualCardPortraitW," ").concat(isEffectSet?"active":""," ").concat(online?"online":"offline"),style:(0,objectSpread2.Z)((0,objectSpread2.Z)({},additionalStyle),{},{width:"100%",background:theme.palette.background.paper}),children:(0,jsx_runtime.jsxs)(Card.Z,{className:classes.virtualCardPortrait,sx:{background:theme.palette.background.paper,"&:hover":{borderColor:theme.palette.text.disabled}},children:[(0,jsx_runtime.jsxs)("div",{className:classes.virtualCardContainer,children:[(0,jsx_runtime.jsx)("div",{className:classes.virtualIconWrapper,children:(0,jsx_runtime.jsx)(BladeIcon.Z,{colorIndicator:!1,name:iconName,className:"".concat(classes.virtualIcon," ").concat(graphsActive?"":"graphs"," ").concat(expanded?"extended":""),style:{zIndex:3,opacity:online?1:.3,color:expanded?"#fff":""},card:!0})}),(0,jsx_runtime.jsxs)("div",{className:classes.virtualSubline,children:[(0,jsx_runtime.jsx)(Typography.Z,{variant:"h6",style:{lineHeight:1,color:colorIndicator?theme.palette.primary.light:"inherit",opacity:online?1:.3},children:deviceName}),online?effectName?(0,jsx_runtime.jsxs)(Typography.Z,{variant:"body1",color:"textSecondary",style:{height:25,display:"flex",alignItems:"center"},children:[(0,jsx_runtime.jsx)("span",{className:"hideMobile",children:"Effect:"}),effectName,(0,jsx_runtime.jsx)(Button.Z,{variant:"text",size:"small",onClick:function onClick(e){e.preventDefault(),handlePlayPause()},style:{color:"#999",minWidth:"unset",zIndex:expanded?1:3},children:isPlaying?(0,jsx_runtime.jsx)(Pause.Z,{}):(0,jsx_runtime.jsx)(PlayArrow.Z,{})}),(0,jsx_runtime.jsx)(Button.Z,{size:"small",variant:"text",onClick:function onClick(e){e.preventDefault(),handleClearEffect(virtId)},style:{color:"#999",minWidth:"unset",zIndex:expanded?1:3},children:(0,jsx_runtime.jsx)(Clear.Z,{})})]}):isStreaming?(0,jsx_runtime.jsx)(Typography.Z,{variant:"body1",color:"textSecondary",style:{height:25},children:"Streaming..."}):(0,jsx_runtime.jsx)(Typography.Z,{variant:"body1",style:{color:theme.palette.text.disabled,height:25},children:"off"}):(0,jsx_runtime.jsxs)(Typography.Z,{variant:"body1",color:"textSecondary",style:{height:25,display:"flex",alignItems:"center"},children:[(0,jsx_runtime.jsx)(Typography.Z,{variant:"body1",component:"span",color:"textSecondary",style:{height:25,opacity:online?1:.3},children:"offline"}),(0,jsx_runtime.jsx)(Button.Z,{variant:"text",size:"small",onClick:function onClick(e){e.preventDefault(),isDevice&&activateDevice(isDevice)},style:{color:"inherit",marginLeft:"1rem",marginTop:"0rem",minWidth:"unset",zIndex:expanded?1:3},children:(0,jsx_runtime.jsx)(SyncProblem.Z,{})})]})]}),(0,jsx_runtime.jsx)("div",{children:previewOnly&&(0,jsx_runtime.jsx)(Button.Z,{variant:"text",disabled:!0,size:"small",children:(0,jsx_runtime.jsx)(Visibility.Z,{})})}),(0,jsx_runtime.jsx)(IconButton.Z,{sx:{transform:expanded?"rotate(180deg)":"rotate(0deg)",alignSelf:"flex-start",marginLeft:"auto",transition:theme.transitions.create("transform",{duration:theme.transitions.duration.shortest}),display:"block"},onClick:function onClick(e){e.preventDefault(),handleExpandClick()},"aria-expanded":expanded,"aria-label":"show more",style:{zIndex:3,color:"#999"},children:(0,jsx_runtime.jsx)(ExpandMore.Z,{className:"step-devices-two-".concat(index)})})]}),graphsMulti&&(0,jsx_runtime.jsx)("div",{style:{opacity:fade?.2:1,transitionDuration:"".concat(fade?transitionTime||1:transitionTime||0,"s"),width:"100%",transition:"opacity"},children:(0,jsx_runtime.jsx)(components_PixelGraph,{showMatrix:showMatrix,intGraphs:graphsActive,active:isActive,virtId:virtId||"",className:"step-devices-seven"})}),(0,jsx_runtime.jsx)("div",{style:{position:"absolute",left:0,top:0,bottom:0,right:0,zIndex:2},children:(0,jsx_runtime.jsx)(Collapse.Z,{in:expanded,timeout:"auto",unmountOnExit:!0,className:classes.buttonBarMobile,children:(0,jsx_runtime.jsxs)("div",{className:"".concat(classes.buttonBarMobileWrapper," ").concat(graphsActive?"":"graphs"," ").concat(expanded?"extended":""),onClick:function onClick(e){return e.preventDefault()},children:[(0,jsx_runtime.jsx)("div",{}),(0,jsx_runtime.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center"},children:[(0,jsx_runtime.jsx)(Popover.Z,{variant:"text",startIcon:(0,jsx_runtime.jsx)(Delete.Z,{}),label:"delete",color:"inherit",onConfirm:function onConfirm(){handleDeleteDevice(virtId),handleExpandClick()},className:"step-devices-three-".concat(index),style:{width:"100%"}}),isDevice?(0,jsx_runtime.jsx)(Button.Z,{variant:"text",color:"inherit",size:"small",startIcon:(0,jsx_runtime.jsx)(Build.Z,{}),className:"step-devices-four-".concat(index),onClick:function onClick(e){e.preventDefault(),handleEditDevice(isDevice),handleExpandClick()},children:"Edit Device"}):(0,jsx_runtime.jsx)(EditVirtuals,{label:"Edit Virtual",variant:"text",color:"inherit",virtId:virtId,icon:void 0,className:"step-devices-six",startIcon:(0,jsx_runtime.jsx)(Tune.Z,{}),type:void 0,innerKey:void 0,onClick:function onClick(){return handleExpandClick()}}),(0,jsx_runtime.jsx)(Button.Z,{variant:"text",size:"small",startIcon:(0,jsx_runtime.jsx)(Settings.Z,{}),color:"inherit",className:"step-devices-five-".concat(index),onClick:function onClick(e){e.preventDefault(),handleEditVirtual(virtId),handleExpandClick()},children:"Settings"})]})]})})})]})})};DeviceCard.defaultProps={deviceName:"My Wled",online:!0,effectName:void 0,virtId:"yz-quad",index:1,handleDeleteDevice:function handleDeleteDevice(){return console.log("DELETING DEVICE")},handleEditVirtual:function handleEditVirtual(){return console.log("EDITING VIRTUAL")},handleEditDevice:function handleEditDevice(){return console.log("EDITING DEVICE")},handleClearEffect:function handleClearEffect(){return console.log("CLEARING EFFECT")},handlePlayPause:function handlePlayPause(){return console.log("PLAY/PAUSE")},linkTo:"/",additionalStyle:{},iconName:"wled",colorIndicator:!0,isPlaying:!0,isStreaming:!1,previewOnly:!0,isEffectSet:!0,transitionTime:5,isDevice:"yz-quad",graphsActive:!0,showMatrix:!1};var _Default$parameters,_Default$parameters2,_Default$parameters2$,DeviceCard_DeviceCard=DeviceCard;try{DeviceCard.displayName="DeviceCard",DeviceCard.__docgenInfo={description:"Pixelgraphs will not connect via Websocket in Storybook",displayName:"DeviceCard",props:{deviceName:{defaultValue:null,description:"The Name of the device",name:"deviceName",required:!1,type:{name:"string"}},iconName:{defaultValue:null,description:"IconName. Refer to `Icon`",name:"iconName",required:!1,type:{name:"string"}},effectName:{defaultValue:null,description:"Name of the current Effect",name:"effectName",required:!0,type:{name:"string | undefined"}},isEffectSet:{defaultValue:null,description:"Flag if Effect is set",name:"isEffectSet",required:!1,type:{name:"boolean"}},online:{defaultValue:null,description:"Is device online",name:"online",required:!1,type:{name:"boolean"}},isPlaying:{defaultValue:null,description:"Play/Pause",name:"isPlaying",required:!1,type:{name:"boolean"}},isStreaming:{defaultValue:null,description:"Is streaming from other sources",name:"isStreaming",required:!1,type:{name:"boolean"}},previewOnly:{defaultValue:null,description:"Do not send to leds",name:"previewOnly",required:!1,type:{name:"boolean"}},transitionTime:{defaultValue:null,description:"TransitionTime of the Device",name:"transitionTime",required:!1,type:{name:"number"}},isDevice:{defaultValue:null,description:"DeviceId if its a device, else undefined if its a virtual",name:"isDevice",required:!1,type:{name:"string"}},graphsActive:{defaultValue:null,description:"Graphs active?",name:"graphsActive",required:!1,type:{name:"boolean"}},graphsMulti:{defaultValue:null,description:"Do not send to leds",name:"graphsMulti",required:!1,type:{name:"boolean"}},showMatrix:{defaultValue:null,description:"Show Matrix",name:"showMatrix",required:!1,type:{name:"boolean"}},colorIndicator:{defaultValue:null,description:"Colorize?",name:"colorIndicator",required:!1,type:{name:"boolean"}},virtId:{defaultValue:null,description:"VirtualId",name:"virtId",required:!1,type:{name:"string"}},index:{defaultValue:null,description:"Index",name:"index",required:!1,type:{name:"number"}},handleDeleteDevice:{defaultValue:null,description:"Handle Function",name:"handleDeleteDevice",required:!1,type:{name:"any"}},handleEditVirtual:{defaultValue:null,description:"Handle Function",name:"handleEditVirtual",required:!1,type:{name:"any"}},handleEditDevice:{defaultValue:null,description:"Handle Function",name:"handleEditDevice",required:!1,type:{name:"any"}},handleClearEffect:{defaultValue:null,description:"Handle Function",name:"handleClearEffect",required:!1,type:{name:"any"}},handlePlayPause:{defaultValue:null,description:"Handle Function",name:"handlePlayPause",required:!1,type:{name:"any"}},activateDevice:{defaultValue:null,description:"Handle Function",name:"activateDevice",required:!1,type:{name:"any"}},linkTo:{defaultValue:null,description:"Handle Function",name:"linkTo",required:!1,type:{name:"any"}},additionalStyle:{defaultValue:null,description:"onClick Link",name:"additionalStyle",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/Devices/DeviceCard/DeviceCard.tsx#DeviceCard"]={docgenInfo:DeviceCard.__docgenInfo,name:"DeviceCard",path:"src/pages/Devices/DeviceCard/DeviceCard.tsx#DeviceCard"})}catch(__react_docgen_typescript_loader_error){}var DeviceCard_stories={title:"UI Components/DeviceCard",component:DeviceCard_DeviceCard,decorators:[function(Story){return(0,jsx_runtime.jsx)(dist.VA,{children:Story()})}],parameters:{options:{showPanel:!0}}},Default=function Template(args){return(0,jsx_runtime.jsx)(DeviceCard_DeviceCard,(0,objectSpread2.Z)({},args))}.bind({});Default.args={deviceName:"My Wled",iconName:"wled",effectName:"Super Effect",isEffectSet:!0,isPlaying:!0,previewOnly:!0,colorIndicator:!0,isStreaming:!1,graphsActive:!0,handleDeleteDevice:void 0,handleEditVirtual:void 0,handleEditDevice:void 0,handleClearEffect:void 0,handlePlayPause:void 0,additionalStyle:{},transitionTime:5,virtId:"yz-quad",isDevice:"yz-quad",linkTo:"/",index:1},Default.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},Default.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:(0,objectSpread2.Z)({originalSource:"args => <DeviceCard {...args} />"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2$=_Default$parameters2.docs)||void 0===_Default$parameters2$?void 0:_Default$parameters2$.source)})});var __namedExportsOrder=["Default"]},"./src/components/SchemaForm/components/BladeFrame.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _home_runner_work_LedFx_Frontend_v2_LedFx_Frontend_v2_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mui/material/styles/styled.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),Root=(0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__.ZP)("div")((function(_ref){var theme=_ref.theme;return{minWidth:"23.5%",padding:"16px 1.2rem 6px 1.2rem",border:"1px solid",borderColor:theme.palette.divider,borderRadius:"10px",position:"relative",display:"flex",alignItems:"center",height:"auto",margin:"0.5rem 0","@media (max-width: 580px)":{width:"100% !important",margin:"0.5rem 0"},"& > label":{top:"-0.75rem",display:"flex",alignItems:"center",left:"1rem",padding:"0 0.3rem",position:"absolute",fontVariant:"all-small-caps",fontSize:"0.9rem",letterSpacing:"0.1rem",color:theme.palette.text.secondary,backgroundColor:theme.palette.background.paper,boxSizing:"border-box"}}})),BladeFrame=function BladeFrame(_ref2){var index=_ref2.index,title=_ref2.title,children=_ref2.children,_ref2$full=_ref2.full,full=void 0!==_ref2$full&&_ref2$full,_ref2$style=_ref2.style,style=void 0===_ref2$style?{width:"unset",order:0}:_ref2$style,_ref2$required=_ref2.required,required=void 0!==_ref2$required&&_ref2$required,_ref2$variant=_ref2.variant,variant=void 0===_ref2$variant?"outlined":_ref2$variant,className=_ref2.className,disabled=_ref2.disabled,_ref2$labelStyle=_ref2.labelStyle,labelStyle=void 0===_ref2$labelStyle?{}:_ref2$labelStyle;return"outlined"===variant?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(Root,{className:className||"",style:(0,_home_runner_work_LedFx_Frontend_v2_LedFx_Frontend_v2_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,_home_runner_work_LedFx_Frontend_v2_LedFx_Frontend_v2_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},style),{},{width:full?"100%":style.width}),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{style:(0,_home_runner_work_LedFx_Frontend_v2_LedFx_Frontend_v2_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},labelStyle),className:"MuiFormLabel-root".concat(disabled?" Mui-disabled":"","  step-effect-").concat(index),children:[title,required?"*":""]}),children]}):children};BladeFrame.defaultProps={index:void 0,title:void 0,children:void 0,full:!1,style:{width:"unset",order:0},required:!1,variant:"outlined",className:void 0,disabled:void 0,labelStyle:void 0},__webpack_exports__.Z=BladeFrame;try{BladeFrame.displayName="BladeFrame",BladeFrame.__docgenInfo={description:"",displayName:"BladeFrame",props:{title:{defaultValue:{value:"undefined"},description:"",name:"title",required:!1,type:{name:"string"}},index:{defaultValue:{value:"undefined"},description:"",name:"index",required:!1,type:{name:"number"}},full:{defaultValue:{value:"false"},description:"",name:"full",required:!1,type:{name:"boolean"}},style:{defaultValue:{value:"{\n    width: 'unset',\n    order: 0\n  }"},description:"",name:"style",required:!1,type:{name:"any"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},variant:{defaultValue:{value:"outlined"},description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"outlined"'},{value:'"contained"'},{value:'"inherit"'}]}},className:{defaultValue:{value:"undefined"},description:"",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"undefined"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},labelStyle:{defaultValue:{value:"undefined"},description:"",name:"labelStyle",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/SchemaForm/components/BladeFrame.tsx#BladeFrame"]={docgenInfo:BladeFrame.__docgenInfo,name:"BladeFrame",path:"src/components/SchemaForm/components/BladeFrame.tsx#BladeFrame"})}catch(__react_docgen_typescript_loader_error){}}}]);