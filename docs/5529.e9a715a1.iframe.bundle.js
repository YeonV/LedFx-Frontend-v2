"use strict";(self.webpackChunkledfx=self.webpackChunkledfx||[]).push([[5529],{"./src/api/ledfx.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>Ledfx});var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/axios/lib/axios.js"),immer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/immer/dist/immer.mjs"),is_electron__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/is-electron/index.js"),is_electron__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(is_electron__WEBPACK_IMPORTED_MODULE_2__),_store_useStore__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/store/useStore.ts");const isBrowser="undefined"!=typeof window,baseURL=is_electron__WEBPACK_IMPORTED_MODULE_2___default()()?"http://localhost:8888":isBrowser&&window.location.href.split("/#")[0].replace(/\/+$/,"")||"http://localhost:8888",storedURL=isBrowser?window.localStorage.getItem("ledfx-host"):null,api=axios__WEBPACK_IMPORTED_MODULE_0__.A.create({baseURL:storedURL||baseURL}),Ledfx=async function(path,method,body){let snackbar=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],responseType=arguments.length>4?arguments[4]:void 0;const{setState}=_store_useStore__WEBPACK_IMPORTED_MODULE_3__.A;try{let response=null;const config="blob"===responseType?{responseType:"blob"}:{};switch(method){case"PUT":response=await api.put(path,body,config);break;case"DELETE":response=await api.delete(path,config);break;case"POST":response=await api.post(path,body,config);break;default:response=await api.get(path,config)}return"blob"===responseType||(response.data&&response.data.payload&&snackbar&&(setState((0,immer__WEBPACK_IMPORTED_MODULE_1__.jM)(state=>{state.ui.snackbar={isOpen:!0,messageType:response.data.payload.type||"error",message:response.data.payload.reason||response.data.payload.message||JSON.stringify(response.data.payload)}})),response.data.status)||response.payload&&snackbar&&(setState((0,immer__WEBPACK_IMPORTED_MODULE_1__.jM)(state=>{state.ui.snackbar={isOpen:!0,messageType:response.payload.type||"error",message:response.payload.reason||response.payload.message||JSON.stringify(response.payload)}})),response.data.status))?response.data:200===response.status?(setState((0,immer__WEBPACK_IMPORTED_MODULE_1__.jM)(state=>{state.disconnected=!1})),response.data||response):setState((0,immer__WEBPACK_IMPORTED_MODULE_1__.jM)(state=>{state.ui.snackbar={isOpen:!0,messageType:"error",message:response.error||JSON.stringify(response)}}))}catch(error){if(error.message)return setState((0,immer__WEBPACK_IMPORTED_MODULE_1__.jM)(state=>{state.ui.snackbar={isOpen:!0,messageType:"error",message:JSON.stringify(error.message)}}));setState((0,immer__WEBPACK_IMPORTED_MODULE_1__.jM)(state=>{state.ui.snackbar={isOpen:!0,messageType:"error",message:JSON.stringify(error,null,2)}}))}return!0}},"./src/store/useStore.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>store_useStore});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/zustand/esm/react.mjs"),middleware=__webpack_require__("./node_modules/zustand/esm/middleware.mjs"),immer=__webpack_require__("./node_modules/immer/dist/immer.mjs"),is_electron=__webpack_require__("./node_modules/is-electron/index.js"),is_electron_default=__webpack_require__.n(is_electron);const isBrowser="undefined"!=typeof window,ui_storeGeneral=set=>{var _window,_window$location,_window$location$href;return{host:is_electron_default()()?"http://localhost:8888":isBrowser?null===(_window=window)||void 0===_window||null===(_window$location=_window.location)||void 0===_window$location||null===(_window$location$href=_window$location.href)||void 0===_window$location$href?void 0:_window$location$href.split("#")[0]:"http://localhost:8888",setHost:host=>{var _window2,_window2$localStorage;return console.log("setHost",host),isBrowser&&(null===(_window2=window)||void 0===_window2||null===(_window2$localStorage=_window2.localStorage)||void 0===_window2$localStorage||_window2$localStorage.setItem("ledfx-host",host.title?host.title:host)),set((0,immer.jM)(state=>{state.host=host}),!1,"general/host")},coreStatus:{},setCoreStatus:status=>set((0,immer.jM)(state=>{state.coreStatus=status}),!1,"general/setCoreStatus"),coreParams:{},setCoreParams:params=>set((0,immer.jM)(state=>{state.coreParams=params}),!1,"general/setCoreParams"),platform:"yz",setPlatform:platform=>set((0,immer.jM)(state=>{state.platform=platform}),!1,"general/setPlatform"),protoCall:"",setProtoCall:msg=>set((0,immer.jM)(state=>{state.protoCall=msg}),!1,"general/setPlatform"),disconnected:!1,setDisconnected:dis=>set((0,immer.jM)(state=>{state.disconnected=dis}),!1,"general/setStreamingToDevices"),streamingToDevices:[],setStreamingToDevices:devices=>{set((0,immer.jM)(state=>{state.streamingToDevices=devices}),!1,"general/setStreamingToDevices")},streaming:!1,setStreaming:streaming=>{set((0,immer.jM)(state=>{state.streaming=streaming}),!1,"general/setStreaming")},showComplex:!1,setShowComplex:val=>{set((0,immer.jM)(state=>{state.showComplex=val}),!1,"general/setShowComplex")},showGaps:!1,setShowGaps:val=>{set((0,immer.jM)(state=>{state.showGaps=val}),!1,"general/setShowGaps")},graphs:!0,toggleGraphs:()=>{set((0,immer.jM)(state=>{state.graphs=!state.graphs}),!1,"general/toggleGraphs")},graphsMulti:!0,toggleGraphsMulti:()=>{set((0,immer.jM)(state=>{state.graphsMulti=!state.graphsMulti}),!1,"general/toggleGraphsMulti")},showMatrix:!1,toggleShowMatrix:()=>{set((0,immer.jM)(state=>{state.showMatrix=!state.showMatrix}),!1,"general/toggleShowMatrix")},pixelGraphs:[],setPixelGraphs:virtuals=>set((0,immer.jM)(state=>{state.pixelGraphs=[...virtuals]}),!1,"ui/setPixelGraphs"),viewMode:"user",setViewMode:mode=>set((0,immer.jM)(state=>{state.viewMode=mode}),!1,"ui/setViewMode"),isLogged:!1,setIsLogged:logged=>set((0,immer.jM)(state=>{state.isLogged=logged}),!1,"general/setIsLogged"),intro:!0,setIntro:intro=>set((0,immer.jM)(state=>{state.intro=intro}),!1,"general/setIsLogged")}},ui_storeFeatures=set=>({features:{dev:!1,cloud:!1,wled:!1,integrations:!1,spotify:!1,spotifypro:!1,youtube:!1,webaudio:!1,waves:!1,streamto:!1,effectfilter:!1,transitions:!1,frequencies:!1,go:!1,dashboard:!1,dashboardDetailed:!1,scenetables:!1,scenechips:!1,sceneexternal:!1,scenemidi:!1,beta:!1,alpha:!1,matrix:!1,mqtt:!1,mqtt_hass:!1,gamepad:!1,matrix_cam:!1,wakelock:!1,melbankGraph:!1,sceneMostUsed:!1,scenePlaylist:!1,sceneRecent:!1,sceneScroll:!1,scenePlaylistBackend:!1,showPlaylistInBottomBar:!1,showFlowInBottomBar:!1,firetv:!1},showFeatures:{dev:!1,cloud:!1,wled:!1,integrations:!0,spotify:!1,spotifypro:!1,youtube:!1,webaudio:!1,waves:!1,streamto:!1,effectfilter:!1,transitions:!1,frequencies:!1,go:!1,dashboard:!1,dashboardDetailed:!1,scenetables:!1,scenechips:!1,sceneexternal:!1,scenemidi:!1,beta:!1,alpha:!1,matrix:!1,mqtt:!1,mqtt_hass:!1,gamepad:!1,matrix_cam:!1,wakelock:!1,melbankGraph:!1,sceneMostUsed:!1,scenePlaylist:!1,sceneRecent:!1,sceneScroll:!1,scenePlaylistBackend:!1,showPlaylistInBottomBar:!1,showFlowInBottomBar:!1,firetv:!1},setFeatures:(feat,use)=>set((0,immer.jM)(state=>{state.features[feat]=use}),!1,"ui/setFeature"),setShowFeatures:(feat,show)=>set((0,immer.jM)(state=>{state.showFeatures[feat]=show}),!1,"ui/setShowFeature")}),ui_storeTours=set=>({tours:{home:!1,devices:!1,device:!1,effect:!1,integrations:!1,scenes:!1,settings:!1,"2d-virtual":!1},setTour:tour=>set((0,immer.jM)(state=>{state.tours[tour]=!0}),!1,"ui/setTour"),setTourOpen:(tour,open)=>set((0,immer.jM)(state=>{state.tours[tour]=open}),!1,"ui/setTour")}),package_namespaceObject_rE="2.1.3-b24",ui_storeUI=set=>({currentTheme:"",setCurrentTheme:theme=>set((0,immer.jM)(state=>{state.ui.currentTheme=theme}),!1,"ui/currentTheme"),effectDescriptions:"Hide",setEffectDescriptions:mode=>set((0,immer.jM)(state=>{state.ui.effectDescriptions=mode}),!1,"ui/effectDescriptions"),virtual2dLimit:100,setVirtual2dLimit:limit=>set((0,immer.jM)(state=>{state.ui.virtual2dLimit=limit}),!1,"ui/virtual2dLimit"),fpsViewer:!1,setFpsViewer:fps=>set((0,immer.jM)(state=>{state.ui.fpsViewer=fps}),!1,"ui/fpsViewer"),mgX:50,setMgX:x=>set((0,immer.jM)(state=>{state.ui.mgX=x}),!1,"ui/mgX"),mgY:200,setMgY:y=>set((0,immer.jM)(state=>{state.ui.mgY=y}),!1,"ui/mgY"),mg:!1,setMg:mg=>set((0,immer.jM)(state=>{state.ui.mg=mg}),!1,"ui/mg"),pgsX:50,setPgsX:x=>set((0,immer.jM)(state=>{state.ui.pgsX=x}),!1,"ui/mgX"),pgsY:200,setPgsY:y=>set((0,immer.jM)(state=>{state.ui.pgsY=y}),!1,"ui/mgY"),pgs:!1,setPgs:mg=>set((0,immer.jM)(state=>{state.ui.pgs=mg}),!1,"ui/mg"),mp:!1,setMp:mp=>set((0,immer.jM)(state=>{state.ui.mp=mp}),!1,"ui/mp"),keybindingX:50,setKeybindingX:x=>set((0,immer.jM)(state=>{state.ui.keybindingX=x}),!1,"ui/keybindingX"),keybindingY:200,setKeybindingY:y=>set((0,immer.jM)(state=>{state.ui.keybindingY=y}),!1,"ui/keybindingY"),keybinding:!1,setKeybinding:keybinding=>set((0,immer.jM)(state=>{state.ui.keybinding=keybinding}),!1,"ui/keybinding"),sdX:50,setSdX:x=>set((0,immer.jM)(state=>{state.ui.sdX=x}),!1,"ui/sdX"),sdY:200,setSdY:y=>set((0,immer.jM)(state=>{state.ui.sdY=y}),!1,"ui/sdY"),sd:!1,setSd:sd=>set((0,immer.jM)(state=>{state.ui.sd=sd}),!1,"ui/sd"),globalColorWidgetX:50,setGlobalColorWidgetX:x=>set((0,immer.jM)(state=>{state.ui.globalColorWidgetX=x}),!1,"ui/globalColorWidgetX"),globalColorWidgetY:200,setGlobalColorWidgetY:y=>set((0,immer.jM)(state=>{state.ui.globalColorWidgetY=y}),!1,"ui/globalColorWidgetY"),globalColorWidget:!1,setGlobalColorWidget:globalColorWidget=>set((0,immer.jM)(state=>{state.ui.globalColorWidget=globalColorWidget}),!1,"ui/globalColorWidget"),changeTheme:!1,reloadTheme:()=>set((0,immer.jM)(state=>{state.ui.changeTheme=!state.ui.changeTheme}),!1,"ui/changeTheme"),latestTag:package_namespaceObject_rE,setLatestTag:tag=>set((0,immer.jM)(state=>{state.ui.latestTag=tag}),!1,"setLatestTag"),darkMode:!0,setDarkMode:dark=>set((0,immer.jM)(state=>{state.ui.darkMode=dark}),!1,"ui/darkmode"),snackbar:{isOpen:!1,messageType:"error",message:"NO MESSAGE"},showSnackbar:(messageType,message)=>set((0,immer.jM)(state=>{state.ui.snackbar={isOpen:!0,message,messageType}}),!1,"ui/showSnackbar"),clearSnackbar:()=>set((0,immer.jM)(state=>{state.ui.snackbar.isOpen=!1}),!1,"ui/clearSnackbar"),bars:{leftBar:{open:!1},smartBar:{open:!1},smartBarPad:{open:!1},bottomBar:[]},setLeftBarOpen:open=>set((0,immer.jM)(state=>{state.ui.bars.leftBar.open=open}),!1,"ui/setLeftBarOpen"),setBottomBarOpen:page=>set((0,immer.jM)(state=>{-1===state.ui.bars.bottomBar.indexOf(page)?state.ui.bars.bottomBar=[...state.ui.bars.bottomBar,page]:state.ui.bars.bottomBar=state.ui.bars.bottomBar.filter(p=>p!==page)}),!1,"ui/setBottomBarOpen"),setSmartBarOpen:open=>set((0,immer.jM)(state=>{state.ui.bars.smartBar.open=open}),!1,"ui/setSmartBarOpen"),setSmartBarPadOpen:open=>set((0,immer.jM)(state=>{state.ui.bars.smartBarPad.open=open}),!1,"ui/setSmartBarOpen"),settingsExpanded:"false",setSettingsExpanded:setting=>set((0,immer.jM)(state=>{state.ui.settingsExpanded=setting}),!1,"ui/settingsExpanded"),sceneActiveTags:[],toggletSceneActiveTag:tag=>set((0,immer.jM)(state=>{state.ui.sceneActiveTags=state.ui.sceneActiveTags.includes(tag)?state.ui.sceneActiveTags.filter(t=>t!==tag):[...state.ui.sceneActiveTags,tag]}),!1,"ui/settingsExpanded"),pendingMatrixLayout:null,setPendingMatrixLayout:layout=>set((0,immer.jM)(state=>{state.ui.pendingMatrixLayout=layout}),!1,"ui/pendingMatrixLayout")}),ui_storeUser=set=>({starred:{core:!1,client:!1,build:!1},trophies:{fan:0},setStarred:starred=>set((0,immer.jM)(state=>{state.user.starred=starred}),!1,"setStarred"),setStar:(repo,starred)=>set((0,immer.jM)(state=>{state.user.starred[repo]=starred}),!1,"setStarred"),setTrophies:(name,trophy)=>set((0,immer.jM)(state=>{state.user.trophies[name]=trophy}),!1,"setStarred")}),ui_storeDialogs=set=>({hostManager:!1,setHostManager:open=>set((0,immer.jM)(state=>{state.hostManager=open}),!1,"api/dialog/nohost"),userClosedQrConnector:!1,setUserClosedQrConnector:closed=>set((0,immer.jM)(state=>{state.userClosedQrConnector=closed}),!1,"api/dialog/QrScanner"),dialogs:{qrConnector:{open:!1,edit:!1},nohost:{open:!1,edit:!1},addScene:{open:!1,edit:!1,sceneKey:"",editData:""},addDevice:{open:!1,edit:{}},addVirtual:{open:!1,edit:{}},editVirtual:{open:!1,edit:{}},addIntegration:{open:!1,edit:{}},addWled:{open:[]},lessPixels:{open:!1,edit:{}},effectType:{open:!1,edit:!1},filedrop:{open:!1,edit:!1}},assistant:{wled:!0,wledSegments:!0,openRgb:!0,launchpad:!0},setAssistant:(kind,val)=>set((0,immer.jM)(state=>{state.assistant[kind]=val}),!1,"api/dialog/nohost"),setAddWLed:open=>set((0,immer.jM)(state=>{state.dialogs.addWled={open}}),!1,"api/dialog/nohost"),setDialogOpen:(open,edit)=>set((0,immer.jM)(state=>{state.dialogs.nohost={open,edit:edit||!1}}),!1,"api/dialog/nohost"),setDialogOpenQrConnector:(open,edit)=>set((0,immer.jM)(state=>{state.dialogs.qrConnector={open,edit:edit||!1}}),!1,"api/dialog/QrConnector"),setDialogOpenFileDrop:(open,edit)=>set((0,immer.jM)(state=>{state.dialogs.filedrop={open,edit:edit||!1}}),!1,"api/dialog/FileDrop"),setDialogOpenAddScene:(open,edit,sceneKey,editData)=>set((0,immer.jM)(state=>{state.dialogs.addScene={open,edit:edit||!1,sceneKey:sceneKey||"",editData:editData||""}}),!1,"api/dialog/AddScene"),setDialogOpenAddDevice:(open,edit)=>set((0,immer.jM)(state=>{state.dialogs.addDevice={open,edit}}),!1,"api/dialog/AddDevice"),setDialogOpenAddVirtual:(open,edit)=>set((0,immer.jM)(state=>{state.dialogs.addVirtual={open,edit}}),!1,"api/dialog/AddVirtual"),setDialogOpenEditVirtual:(open,edit)=>set((0,immer.jM)(state=>{state.dialogs.editVirtual={open,edit}}),!1,"api/dialog/EditVirtual"),setDialogOpenAddIntegration:(open,edit)=>set((0,immer.jM)(state=>{state.dialogs.addIntegration={open,edit}}),!1,"api/dialog/AddIntegration"),setDialogOpenLessPixels:(open,edit)=>set((0,immer.jM)(state=>{state.dialogs.lessPixels={open,edit}}),!1,"api/dialog/LessPixels"),setDialogOpenEffectType:open=>set((0,immer.jM)(state=>{state.dialogs.effectType={open,edit:!1}}),!1,"api/dialog/EffectType")}),ui_storeSpotify=()=>({spotifyEmbedUrl:"https://open.spotify.com/embed/playlist/4sXMBGaUBF2EjPvrq2Z3US?",spotifyAuthToken:"",player:null,swSize:"small",swX:50,swY:200,swWidth:300,spNetworkTime:1e3,spAuthenticated:!1,spotifyData:{},spotifyDevice:{},spotifyDevices:[],spotifytriggers:{},spTriggersList:[],spActTriggers:[],playlist:[],me:{},spotifyState:{},spotifyVol:0,spotifyPos:null,spotify:null,currentTrack:"",sendSpotifyTrack:!1,spotifyTexter:{fallback:!0,gradient:"linear-gradient(90deg, rgb(255, 0, 0) 0%, rgb(255, 120, 0) 14%, rgb(255, 200, 0) 28%, rgb(0, 255, 0) 42%, rgb(0, 199, 140) 56%, rgb(0, 0, 255) 70%, rgb(128, 0, 128) 84%, rgb(255, 0, 178) 98%)",option_2:!1,flip:!1,blur:0,flip_horizontal:!1,speed_option_1:2,resize_method:"Fast",gradient_roll:0,alpha:!1,value_option_1:.5,font:"Blade-5x8",use_gradient:!1,diag:!1,test:!1,impulse_decay:.1,mirror:!1,flip_vertical:!1,text_effect:"Side Scroll",multiplier:1,brightness:1,text_color:"#ff0000",background_brightness:1,rotate:0,dump:!1,option_1:!1,height_percent:100,background_color:"#000000"}}),ui_storeQLC=()=>({QLCEmbedUrl:"http://localhost:9999/",QLCData:{},QLCPos:void 0,qlc:void 0,QLCtriggers:{},qlcTriggersList:[],QLCActTriggers:[],qlcWidgets:[],qlc_widgets:{},event_types:{},createQlcListener:{}}),ui_storeWebAudio=set=>({webAud:!1,setWebAud:newState=>{set((0,immer.jM)(state=>{state.webAud=newState}),!1,"webaudio/setWebAud")},webAudName:"",setWebAudName:newState=>{set((0,immer.jM)(state=>{state.webAudName=newState}),!1,"webaudio/setWebAudName")},clientDevice:null,clientDevices:null,setClientDevice:newState=>{set((0,immer.jM)(state=>{state.clientDevice=newState}),!1,"webaudio/setClientDevice")},setClientDevices:newState=>{set((0,immer.jM)(state=>{state.clientDevices=newState}),!1,"webaudio/setClientDevices")},usePerDeviceDelay:!1,setUsePerDeviceDelay:newState=>{set((0,immer.jM)(state=>{state.usePerDeviceDelay=newState}),!1,"webaudio/setUsePerDeviceDelay")},perDeviceDelay:{},setPerDeviceDelay:newState=>{set((0,immer.jM)(state=>{state.perDeviceDelay=newState}),!1,"webaudio/setPerDeviceDelay")}}),ui_storeCloud=set=>({loginDialog:!1,setLoginDialog:open=>{set((0,immer.jM)(state=>{state.loginDialog=open}),!1,"cloud/setLoginDialog")}}),ui_storeYoutube=set=>({youtubeURL:"https://www.youtube.com/watch?v=s6Yyb3N9IuA&list=PLD579BDF7F8D8BFE0",setYoutubeURL:url=>{set((0,immer.jM)(state=>{state.youtube.youtubeURL=url}),!1,"youtube/setYoutubeURL")}});var ledfx=__webpack_require__("./src/api/ledfx.ts");const api_storeDevices=set=>({devices:{},openRgbDevices:[],launchpadDevice:"",getDevices:async()=>{const resp=await(0,ledfx.U)("/api/devices");resp&&resp.devices&&set((0,immer.jM)(state=>{state.devices=resp.devices}),!1,"api/gotDevices")},getDevice:async deviceId=>{const resp=await(0,ledfx.U)("/api/devices/".concat(deviceId));return resp&&resp.data?{key:deviceId,id:deviceId,name:resp.data.name,config:resp.data,virtuals:resp.data.virtuals,active_virtuals:resp.data.active_virtuals}:{}},addDevice:async config=>await(0,ledfx.U)("/api/devices","POST",config),activateDevice:async deviceId=>{const resp=await(0,ledfx.U)("/api/devices/".concat(deviceId),"POST",{});resp&&(set((0,immer.jM)(state=>{state.paused=resp.paused}),!1,"api/gotPausedState"),resp&&resp.virtuals&&set((0,immer.jM)(state=>{state.virtuals=resp.virtuals}),!1,"api/gotVirtuals"))},updateDevice:async(deviceId,config)=>await(0,ledfx.U)("/api/devices/".concat(deviceId),"PUT",config)}),api_storeVirtuals=set=>({virtualOrder:[],setVirtualOrder:order=>{set((0,immer.jM)(s=>{s.virtualOrder=order}),!1,"setVirtualOrder")},newBlender:"",setNewBlender:v=>set((0,immer.jM)(state=>{state.newBlender=v}),!1,"api/setNewBlender"),virtuals:{},activeSegment:-1,setActiveSegment:v=>set((0,immer.jM)(state=>{state.activeSegment=v}),!1,"api/setCurrentVirtual"),currentVirtual:null,setCurrentVirtual:v=>set((0,immer.jM)(state=>{state.currentVirtual=v}),!1,"api/setCurrentVirtual"),getVirtuals:async()=>{const resp=await(0,ledfx.U)("/api/virtuals");resp&&(set((0,immer.jM)(state=>{state.paused=resp.paused}),!1,"api/gotPausedState"),resp&&resp.virtuals&&set((0,immer.jM)(state=>{state.virtuals=resp.virtuals}),!1,"api/gotVirtuals"))},addVirtual:async config=>await(0,ledfx.U)("/api/virtuals","POST",config),updateVirtual:async(virtId,active)=>await(0,ledfx.U)("/api/virtuals/".concat(virtId),"PUT",{active}),deleteVirtual:async virtId=>await(0,ledfx.U)("/api/virtuals/".concat(virtId),"DELETE"),clearEffect:async virtId=>await(0,ledfx.U)("/api/virtuals/".concat(virtId,"/effects"),"DELETE"),setEffect:async(virtId,type,config,active,fallback)=>{const resp=await(0,ledfx.U)("/api/virtuals/".concat(virtId,"/effects"),"POST",{type,config,active,fallback});resp&&resp.effect&&set((0,immer.jM)(state=>{state.virtuals[virtId].effect={type:resp.effect.type,name:resp.effect.name,config:resp.effect.config}}),!1,"api/setEffect")},setEffectFallback:virtId=>{(0,ledfx.U)("/api/virtuals/".concat(virtId,"/fallback"))},removeEffectfromHistory:async(type,virtId)=>{await(0,ledfx.U)("/api/virtuals/".concat(virtId,"/effects/delete"),"POST",{type}),set((0,immer.jM)(state=>{state.virtuals[virtId].effect={type:null,name:"",config:null}}),!1,"api/removeEffectfromHistory")},updateEffect:async(virtId,type,config,active,fallback)=>{const resp=await(0,ledfx.U)("/api/virtuals/".concat(virtId,"/effects"),"PUT",{type,config,active,fallback});resp&&resp.status&&"success"===resp.status&&resp&&resp.effect&&set((0,immer.jM)(state=>{state.virtuals[virtId].effect={type:resp.effect.type,name:resp.effect.name,config:resp.effect.config}}),!1,"api/updateEffect")},copyTo:async(virtId,target)=>{const resp=await(0,ledfx.U)("/api/virtuals_tools/".concat(virtId),"PUT",{tool:"copy",target});return!(!resp||!resp.status||"success"!==resp.status)},updateSegments:async(virtId,segments)=>{const resp=await(0,ledfx.U)("/api/virtuals/".concat(virtId),"POST",{segments:[...segments]});resp&&resp.status&&"success"===resp.status&&resp&&resp.effect&&set((0,immer.jM)(state=>{state.virtuals[virtId].effect={type:resp.effect.type,name:resp.effect.name,config:resp.effect.config}}),!1,"api/updateVirtualsSegments")},highlightSegment:async(virtId,device,start,stop,flip)=>{const resp=await(0,ledfx.U)("/api/virtuals_tools/".concat(virtId),"PUT",{tool:"highlight",device,start,stop,flip});return!(!resp||!resp.status||"success"!==resp.status)},highlightOffSegment:async virtId=>{const resp=await(0,ledfx.U)("/api/virtuals_tools/".concat(virtId),"PUT",{tool:"highlight",state:!1});return!(!resp||!resp.status||"success"!==resp.status)},calibrationMode:async(virtId,mode)=>{const resp=await(0,ledfx.U)("/api/virtuals_tools/".concat(virtId),"PUT",{tool:"calibration",mode});return!(!resp||!resp.status||"success"!==resp.status)},oneShotAll:async(color,ramp,hold,fade)=>{const resp=await(0,ledfx.U)("/api/virtuals_tools","POST",{tool:"oneshot",color,ramp,hold,fade});return!(!resp||!resp.status||"success"!==resp.status)},oneShot:async(virtId,color,ramp,hold,fade)=>{const resp=await(0,ledfx.U)("/api/virtuals_tools/".concat(virtId),"PUT",{tool:"oneshot",color,ramp,hold,fade});return!(!resp||!resp.status||"success"!==resp.status)}}),api_storeScenes=set=>({scenes:{},mostUsedScenes:{},recentScenes:[],count:{},scenePL:[],sceneUseIntervals:!1,scenePLintervals:[0],scenePLplay:!1,scenePLrepeat:!1,scenePLactiveIndex:-1,scenePLinterval:2,sceneOrder:[],setSceneOrder:order=>{set((0,immer.jM)(s=>{s.sceneOrder=order}),!1,"setSceneOrder")},setSceneOrderUp:sceneId=>{let target=null;const sceneOrder=store_useStore.getState().sceneOrder,current=sceneOrder.find(s=>s.sceneId===sceneId)||null;if(!current||current.order<1)return;if(target=sceneOrder.find(s=>s.order===(null==current?void 0:current.order)-1)||null,!target)return;const newSceneOrder=sceneOrder.map(o=>o.sceneId===sceneId?(0,objectSpread2.A)((0,objectSpread2.A)({},o),{},{order:target.order}):o.sceneId===target.sceneId?(0,objectSpread2.A)((0,objectSpread2.A)({},o),{},{order:current.order}):o);set((0,immer.jM)(s=>{s.sceneOrder=newSceneOrder}),!1,"setSceneOrderUp")},setSceneOrderDown:sceneId=>{let target=null;const sceneOrder=store_useStore.getState().sceneOrder,current=sceneOrder.find(s=>s.sceneId===sceneId)||null;if(!current||current.order>=sceneOrder.length-1)return;if(target=sceneOrder.find(s=>s.order===(null==current?void 0:current.order)+1)||null,!target)return;const newSceneOrder=sceneOrder.map(o=>o.sceneId===sceneId?(0,objectSpread2.A)((0,objectSpread2.A)({},o),{},{order:target.order}):o.sceneId===target.sceneId?(0,objectSpread2.A)((0,objectSpread2.A)({},o),{},{order:current.order}):o);set((0,immer.jM)(s=>{s.sceneOrder=newSceneOrder}),!1,"setSceneOrderDown")},toggleSceneUseIntervals:()=>{set((0,immer.jM)(s=>{s.sceneUseIntervals=!s.sceneUseIntervals}),!1,"toggleSceneUseIntervals")},toggleScenePLplay:()=>{set((0,immer.jM)(s=>{s.scenePLplay=!s.scenePLplay}),!1,"toggleScenePLplay")},toggleScenePLrepeat:()=>{set((0,immer.jM)(s=>{s.scenePLrepeat=!s.scenePLrepeat}),!1,"toggleScenePLrepeat")},setScenePLinterval:seconds=>{set((0,immer.jM)(s=>{s.scenePLinterval=seconds}),!1,"setScenePLinterval")},setScenePLintervals:intervals=>{set((0,immer.jM)(s=>{s.scenePLintervals=intervals}),!1,"setScenePlIntervals")},setMostUsedScenes:(key,count)=>{set((0,immer.jM)(s=>{s.mostUsedScenes[key]=(0,objectSpread2.A)((0,objectSpread2.A)({},s.scenes[key]),{},{used:count})}),!1,"setMostUsedScenes")},clearMostUsedScenes:()=>{set((0,immer.jM)(s=>{s.mostUsedScenes={}}),!1,"clearMostUsedScenes")},setScenePL:scenes=>{set((0,immer.jM)(s=>{s.scenePL=scenes}),!1,"setScenePLactiveIndex")},setScenePLactiveIndex:index=>{set((0,immer.jM)(s=>{s.scenePLactiveIndex=index}),!1,"setScenePLactiveIndex")},addScene2PL:sceneId=>{set((0,immer.jM)(s=>{s.scenePL=[...s.scenePL,sceneId]}),!1,"addScene2PL")},removeScene2PL:id=>{set((0,immer.jM)(s=>{s.scenePL=s.scenePL.filter((p,i)=>i!==id)}),!1,"removeScene2PL")},getScenes:async()=>{const resp=await(0,ledfx.U)("/api/scenes");return resp&&resp.scenes?(set((0,immer.jM)(s=>{s.scenes=resp.scenes}),!1,"gotScenes"),resp.scenes):null},getScene:async id=>{const resp=await(0,ledfx.U)("/api/scenes/"+id);return resp&&resp.scene?resp.scene:null},addScene:async(name,scene_image,scene_tags,scene_puturl,scene_payload,scene_midiactivate,virtuals)=>virtuals?await(0,ledfx.U)("/api/scenes","POST",{name,scene_image,scene_tags,scene_puturl,scene_payload,scene_midiactivate,virtuals}):await(0,ledfx.U)("/api/scenes","POST",{name,scene_image,scene_tags,scene_puturl,scene_payload,scene_midiactivate}),updateScene:async(name,id,scene_image,scene_tags,scene_puturl,scene_payload,scene_midiactivate,virtuals)=>virtuals?await(0,ledfx.U)("/api/scenes","POST",{name,id,scene_image,scene_tags,scene_puturl,scene_payload,scene_midiactivate,virtuals}):await(0,ledfx.U)("/api/scenes","POST",{name,id,scene_image,scene_tags,scene_puturl,scene_payload,scene_midiactivate}),renameScene:async(name,id)=>await(0,ledfx.U)("/api/scenes","PUT",{name,id,action:"rename"}),activateScene:async id=>(set((0,immer.jM)(s=>{s.recentScenes=s.recentScenes?s.recentScenes.indexOf(id)>-1?[id,...s.recentScenes.filter(t=>t!==id)]:[id,...s.recentScenes].slice(0,5):[id]}),!1,"setScenes"),set((0,immer.jM)(s=>{s.count[id]=(s.count[id]||0)+1}),!1,"setScenes"),await(0,ledfx.U)("/api/scenes","PUT",{id,action:"activate"})),activateSceneIn:async(id,ms)=>await(0,ledfx.U)("/api/scenes","PUT",{id,action:"activate_in",ms}),deleteScene:async name=>await(0,ledfx.U)("/api/scenes","DELETE",{data:{id:name}}),captivateScene:async(scene_puturl,scene_payload)=>await(0,ledfx.U)(scene_puturl,"PUT",JSON.parse(scene_payload))}),api_storeIntegrations=set=>({integrations:{},getIntegrations:async()=>{const resp=await(0,ledfx.U)("/api/integrations");resp&&resp.integrations&&set((0,immer.jM)(s=>{s.integrations=resp.integrations}),!1,"gotIntegrations")},addIntegration:async config=>await(0,ledfx.U)("/api/integrations","POST",config),updateIntegration:async config=>await(0,ledfx.U)("/api/integrations","POST",config),toggleIntegration:async config=>await(0,ledfx.U)("/api/integrations","PUT",config),deleteIntegration:async id=>await(0,ledfx.U)("/api/integrations","DELETE",{data:{id}})}),api_storeIntegrationsSpotify=set=>({getSpTriggers:async()=>{const resp=await(0,ledfx.U)("/api/integrations",set,"GET");resp&&set((0,immer.jM)(state=>{state.spotify.spotify=resp.spotify}),!1,"spotify/getTriggers")},addSpSongTrigger:async _ref=>{let{scene_id,song_id,song_name,song_position}=_ref;await(0,ledfx.U)("/api/integrations/spotify/spotify","POST",{scene_id,song_id,song_name,song_position})},editSpSongTrigger:async _ref2=>{let{scene_id,song_id,song_name,song_position}=_ref2;await(0,ledfx.U)("/api/integrations/spotify/spotify","PUT",{scene_id,song_id,song_name,song_position})},toggleSpTrigger:(SpotifyId,config)=>(0,ledfx.U)("/api/integrations/spotify/".concat(SpotifyId),"PUT",config),deleteSpTrigger:async config=>{await(0,ledfx.U)("/api/integrations/spotify/spotify","DELETE",config)}}),api_storePresets=set=>({presets:{},getPresets:async virtId=>{const resp=await(0,ledfx.U)("/api/virtuals/".concat(virtId,"/presets"));return resp&&"success"===resp.status&&set((0,immer.jM)(s=>{s.presets={ledfx_presets:resp.ledfx_presets,user_presets:resp.user_presets,default_presets:resp.ledfx_presets,custom_presets:resp.user_presets}}),!1,"gotPresets"),resp},addPreset:async(virtId,name)=>{const body={name};return await(0,ledfx.U)("/api/virtuals/".concat(virtId,"/presets"),"POST",body)},activatePreset:async(virtId,category,effectType,presetId)=>{const body={category,effect_id:effectType,preset_id:presetId};return await(0,ledfx.U)("/api/virtuals/".concat(virtId,"/presets"),"PUT",body)},deletePreset:async(virtId,presetId)=>await(0,ledfx.U)("/api/virtuals/".concat(virtId,"/presets"),"DELETE",{preset_id:presetId,category:"user_presets"})}),api_storeConfig=set=>({schemas:{},getSchemas:async()=>{const resp=await(0,ledfx.U)("/api/schema");resp&&set((0,immer.jM)(s=>{s.schemas=resp}),!1,"gotSchemas")},config:{},getSystemConfig:async()=>{const resp=await(0,ledfx.U)("/api/config");resp&&resp.host?set((0,immer.jM)(state=>{state.config=(0,objectSpread2.A)((0,objectSpread2.A)({},resp),{ledfx_presets:void 0,devices:void 0,virtuals:void 0,integrations:void 0,scenes:void 0})}),!1,"api/gotSystemConfig"):set((0,immer.jM)(state=>{state.dialogs.nohost.open=!0}),!1,"api/failedSystemConfig")},getFullConfig:async()=>{const resp=await(0,ledfx.U)("/api/config");return resp&&resp.host?(0,objectSpread2.A)((0,objectSpread2.A)({},resp),{ledfx_presets:void 0}):set((0,immer.jM)(state=>{state.dialogs.nohost.open=!0}),!1,"api/getFullConfig")},getLedFxPresets:async()=>{const resp=await(0,ledfx.U)("/api/config");if(resp&&resp.host){if(resp.ledfx_presets)return resp.ledfx_presets;if(resp.default_presets)return resp.default_presets}return set((0,immer.jM)(state=>{state.dialogs.nohost.open=!0}),!1,"api/getLedFxPresets")},getUserPresets:async()=>{const resp=await(0,ledfx.U)("/api/config");return resp&&resp.host?(set((0,immer.jM)(state=>{state.config.user_presets=resp.user_presets||resp.custom_presets}),!1,"api/getUserPresets"),resp.user_presets):set((0,immer.jM)(state=>{state.dialogs.nohost.open=!0}),!1,"api/getUserPresets")},setSystemConfig:async config=>await(0,ledfx.U)("/api/config","PUT",config),deleteSystemConfig:async()=>await(0,ledfx.U)("/api/config","DELETE"),importSystemConfig:async config=>await(0,ledfx.U)("/api/config","POST",config)}),utils_nameToIcon={Desk:"mdi:desk",Desktop:"mdi:desktop-classic",Monitor:"mdi:monitor",TV:"mdi:television",Kitchen:"mdi:stove",Fridge:"mdi:fridge",Bed:"mdi:bed",Radiator:"mdi:radiator",Heater:"mdi:radiator",Cinema:"mdi:theater",Water:"mdi:water-pump",Matrix:"mdi:table-large",Wardrobe:"mdi:wardrobe",Cupboard:"mdi:cupboard",Speaker:"mdi:speaker",Chair:"mdi:chair-rolling",Couch:"mdi:sofa",Sofa:"mdi:sofa",Cloud:"mdi:cloud",Roof:"mdi:home-roof",Cat:"mdi:cat",Dog:"mdi:dog",Bat:"mdi:bat",Elephant:"mdi:elephant",Fish:"mdi:fish",Dolphin:"mdi:dolphin",Duck:"mdi:duck",Panda:"mdi:panda",Kangaroo:"mdi:kangaroo",Snake:"mdi:snake",Rabbit:"mdi:rabbit",Plant:"mdi:flower",Flower:"mdi:flower",Tree:"mdi:tree",Palm:"mdi:palm-tree",Xmas:"mdi:pine-tree",Christmas:"mdi:pine-tree",DJ:"mdi:album",EQ:"mdi:equalizer",Headphones:"mdi:headphones",Car:"mdi:car",Halloween:"mdi:halloween",Bath:"mdi:bathtub",Balcony:"mdi:balcony",Cradle:"mdi:cradle",Guitar:"mdi:guitar-acoustic",Bugle:"mdi:bugle",Saxophone:"mdi:saxophone",Violin:"mdi:violin",Trumpet:"mdi:trumpet",Bride:"mdi:bride",Castle:"mdi:castle",Rocket:"mdi:rocket",Billiards:"mdi:billiards",Bowling:"mdi:bowling","Logo-III-Y":"yz:logo3y","Logo-III-Z":"yz:logo3z","Logo-III-Top":"yz:logo3top","Logo-III-Left":"yz:logo3left","Logo-III-Right":"yz:logo3right","Logo-III":"yz:logo3","Logo-II-Y":"yz:logo2y","Logo-II-Z":"yz:logo2z","Logo-II-Top":"yz:logo2top","Logo-II-Bottom":"yz:logo2bot","Logo-II":"yz:logo2"},api_storeActions=set=>({scanForOpenRgbDevices:async()=>{const resp=await(0,ledfx.U)("/api/find_openrgb","GET",{});resp&&"success"===resp.status&&resp.devices&&(set((0,immer.jM)(state=>{state.openRgbDevices=resp.devices}),!1,"api/scanForDevices"),resp.devices.map(async d=>await(0,ledfx.U)("/api/devices","POST",{type:"openrgb",config:{icon_name:0===d.type?"mdi:chip":2===d.type?"mdi:expansion-card-variant":5===d.type?"mdi:keyboard":6===d.type?d.name.includes("Razer")?"razer:mouse":"mouse":8===d.type?"mdi:headphones":9===d.type?"mdi:headphones-bluetooth":10===d.type?"sportsEsports":12===d.type?"mdi:speaker-wireless":"mdi:led-strip",center_offset:0,refresh_rate:64,openrgb_id:d.id,pixel_count:d.leds,port:6742,name:d.name,ip_address:"127.0.0.1"}})))},scanForLaunchpadDevices:async()=>{const resp=await(0,ledfx.U)("/api/find_launchpad","GET",{});return!(!resp||"success"!==resp.status||!resp.data)&&(set((0,immer.jM)(state=>{state.launchpadDevice=resp.data}),!1,"api/scanForDevices"),await(0,ledfx.U)("/api/devices","POST",{type:"launchpad",config:{center_offset:0,refresh_rate:64,pixel_count:resp.data.pixels,rows:resp.data.rows,icon_name:"launchpad",create_segments:"Launchpad X"===resp.data.name,name:resp.data.name}}))},scanForDevices:async()=>{const resp=await(0,ledfx.U)("/api/find_devices","POST",{name_to_icon:utils_nameToIcon});resp&&"success"===resp.status||set((0,immer.jM)(state=>{state.dialogs.nohost.open=!0}),!1,"api/scanForDevices")},paused:!1,togglePause:async()=>{const resp=await(0,ledfx.U)("/api/virtuals","PUT",{});resp&&void 0!==resp.paused&&set((0,immer.jM)(s=>{s.paused=resp.paused}),!1,"gotPaused")},shutdown:async()=>await(0,ledfx.U)("/api/power","POST",{timeout:0,action:"shutdown"}),restart:async()=>await(0,ledfx.U)("/api/power","POST",{timeout:0,action:"restart"}),getInfo:async()=>await(0,ledfx.U)("/api/info"),getUpdateInfo:async snackbar=>await(0,ledfx.U)("/api/check_for_updates","GET",{},snackbar),getPing:async virtId=>await(0,ledfx.U)("/api/ping/".concat(virtId)),getImage:async function(path_url){let thumbnail=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(path_url.includes("file:///")||path_url.includes("builtin://")||path_url.startsWith("http://")||path_url.startsWith("https://")))return await(0,ledfx.U)("/api/get_image","POST",{path_url});{const path=path_url.replaceAll("file:///",""),blob=await(0,ledfx.U)("api/assets/".concat(thumbnail?"thumbnail":"download"),"POST",{path},!1,"blob");if(blob)return new Promise(resolve=>{const reader=new FileReader;reader.onloadend=()=>{const base64=reader.result.split(",")[1];resolve({image:base64,type:blob.type||"image/png"})},reader.readAsDataURL(blob)})}},getGifFrames:async path_url=>await(0,ledfx.U)("/api/get_gif_frames","POST",{path_url})}),api_storeColors=set=>({colors:{colors:{user:{},builtin:{}},gradients:{user:{},builtin:{}}},getColors:async()=>{const resp=await(0,ledfx.U)("/api/colors",set);resp&&set((0,immer.jM)(s=>{s.colors=resp}),!1,"gotColors")},addColor:async config=>await(0,ledfx.U)("/api/colors","POST",(0,objectSpread2.A)({},config)),deleteColors:async colorkey=>await(0,ledfx.U)("/api/colors","DELETE",{data:colorkey})}),ui_storeSpotifyActions=set=>({setSpotifyState:spState=>set((0,immer.jM)(state=>{state.spotify.spotifyState=spState}),!1,"spotify/setSpotifyState"),setSpEmbedUrl:url=>set((0,immer.jM)(state=>{state.spotify.spotifyEmbedUrl=url}),!1,"spotify/setSpotifyEmbedUrl"),setSpAuthToken:token=>set((0,immer.jM)(state=>{state.spotify.spotifyAuthToken=token}),!1,"spotify/setSpotifyAuthToken"),setPlayer:player=>set((0,immer.jM)(state=>{state.spotify.player=player}),!1,"spotify/setPlayer"),getVolume:null,setGetVolume:val=>set((0,immer.jM)(state=>{state.getVolume=val}),!1,"spotify/setPlayer"),setSwSize:x=>set((0,immer.jM)(state=>{state.spotify.swSize=x||"small"}),!1,"spotify/setSwSize"),setSwX:x=>set((0,immer.jM)(state=>{state.spotify.swX=x||50}),!1,"spotify/setSwX"),setSwY:y=>set((0,immer.jM)(state=>{state.spotify.swY=y||200}),!1,"spotify/setSwY"),setSwWidth:width=>set((0,immer.jM)(state=>{state.spotify.swWidth=width}),!1,"spotify/setSwWidth"),setSpVol:vol=>set((0,immer.jM)(state=>{state.spotify.spotifyVol=vol}),!1,"spotify/setSpotifyVol"),setSpPos:pos=>{set((0,immer.jM)(state=>{state.spotify.spotifyPos=pos}),!1,"spotify/setSpotifyPos")},setSpAuthenticated:val=>set((0,immer.jM)(state=>{state.spotify.spAuthenticated=val}),!1,"spotify/setSpAuthenticated"),setSpData:(type,data)=>set((0,immer.jM)(state=>{state.spotify.spotifyData[type]=data}),!1,"spotify/setSpotifyData"),setSpDevice:id=>set((0,immer.jM)(state=>{state.spotify.spotifyDevice=id}),!1,"spotify/setSpotifyDevice"),setSpDevices:devices=>set((0,immer.jM)(state=>{state.spotify.spotifyDevices=devices}),!1,"spotify/setSpotifyDevice"),setSpNetworkTime:async delay=>{set((0,immer.jM)(state=>{state.spotify.spNetworkTime=delay}),!1,"spotify/setDelay")},setSpActTriggers:async ids=>{set((0,immer.jM)(state=>{state.spotify.spActTriggers=ids}),!1,"spotify/setTriggers")},removeSpActTriggers:async id=>{set((0,immer.jM)(state=>{state.spotify.spActTriggers=state.spotify.spActTriggers.filter(f=>f.id!==id)}),!1,"spotify/delTriggers")},addToSpTriggerList:async(newTrigger,type)=>{switch(type){case"create":set((0,immer.jM)(state=>{state.spotify.spTriggersList=[...newTrigger]}),!1,"spotify/addToTriggerList");break;case"update":set((0,immer.jM)(state=>{state.spotify.spTriggersList=state.spotify.spTriggersList.map(each=>each.id===newTrigger.id?newTrigger:each)}),!1,"spotify/addToTriggerList")}},setPlaylist:playerlist=>set((0,immer.jM)(state=>{state.spotify.playlist=playerlist}),!1,"spotify/setPlayer"),setMe:me=>set((0,immer.jM)(state=>{state.spotify.me=me}),!1,"spotify/setMe"),setCurrentTrack:track=>set((0,immer.jM)(state=>{state.spotify.currentTrack=track}),!1,"spotify/setCurrentTrack"),setSendSpotifyTrack:val=>set((0,immer.jM)(state=>{state.spotify.sendSpotifyTrack=val}),!1,"spotify/setSendSpotifyTrack"),setSpTexter:texter=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter=(0,objectSpread2.A)((0,objectSpread2.A)({},state.spotify.spotifyTexter),texter)}),!1,"spotify/setSpTexter"),setSpTexterTextColor:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.text_color=value}),!1,"spotify/setSpTexterValue"),setSpTexterFallback:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.fallback=value}),!1,"spotify/setSpTexterValue"),setSpTexterBackground:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.background_color=value}),!1,"spotify/setSpTexterValue"),setSpTexterFlipVertical:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.flip_vertical=value}),!1,"spotify/setSpTexterValue"),setSpTexterFlipHorizontal:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.flip_horizontal=value}),!1,"spotify/setSpTexterValue"),setSpTexterGradient:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.gradient=value}),!1,"spotify/setSpTexterValue"),setSpTexterUseGradient:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.use_gradient=value}),!1,"spotify/setSpTexterValue"),setSpTexterAlpha:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.alpha=value}),!1,"spotify/setSpTexterValue"),setSpTexterGradientRoll:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.gradient_roll=value}),!1,"spotify/setSpTexterValue"),setSpTexterRotate:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.rotate=value}),!1,"spotify/setSpTexterValue"),setSpTexterHeightPercent:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.height_percent=value}),!1,"spotify/setSpTexterValue"),setSpTexterBrightness:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.brightness=value}),!1,"spotify/setSpTexterValue"),setSpTexterBackgroundBrightness:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.background_brightness=value}),!1,"spotify/setSpTexterValue"),setSpTexterSpeed:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.speed_option_1=value}),!1,"spotify/setSpTexterValue"),setSpTexterFont:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.font=value}),!1,"spotify/setSpTexterValue"),setSpTexterTextEffect:value=>set((0,immer.jM)(state=>{state.spotify.spotifyTexter.text_effect=value}),!1,"spotify/setSpTexterValue")}),ui_storeQLCActions=set=>({setQLCEmbedUrl:url=>set((0,immer.jM)(state=>{state.qlc.QLCEmbedUrl=url}),!1,"qlc/setQLCEmbedUrl"),setQLCPos:pos=>set((0,immer.jM)(state=>{state.qlc.QLCPos=pos}),!1,"qlc/setQLCPos"),setQLCData:(type,data)=>set((0,immer.jM)(state=>{state.qlc.QLCData[type]=data}),!1,"qlc/setQLCData"),getQLCTriggers:async()=>{const resp=await(0,ledfx.U)("/api/integrations",set,"GET");resp&&set((0,immer.jM)(state=>{state.qlc.qlc=resp.qlc}),!1,"qlc/getTriggers")},setQLCActTriggers:async ids=>{set((0,immer.jM)(state=>{state.qlc.QLCActTriggers=ids}),!1,"qlc/setTriggers")},removeQLCActTriggers:async id=>{set((0,immer.jM)(state=>{state.qlc.QLCActTriggers=state.qlc.QLCActTriggers.filter(f=>f.id!==id)}),!1,"qlc/delTriggers")},addToQLCTriggerList:async(newTrigger,type)=>{switch(type){case"create":set((0,immer.jM)(state=>{state.qlc.qlcTriggersList=[...newTrigger]}),!1,"qlc/addToTriggerList");break;case"update":set((0,immer.jM)(state=>{state.qlc.qlcTriggersList=[newTrigger]}),!1,"qlc/addToTriggerList")}},getQLCWidgets:async()=>{const resp=await(0,ledfx.U)("/api/integrations/qlc/qlc");resp&&set((0,immer.jM)(state=>{state.qlc.qlcWidgets=resp}),!1,"qlc/getWidgets")},addQLCSongTrigger:async _ref=>{let{event_type,event_filter,qlc_payload}=_ref;await(0,ledfx.U)("/api/integrations/qlc/qlc","POST",{event_type,event_filter,qlc_payload})},toggleQLCTrigger:(QLCId,config)=>(0,ledfx.U)("/api/integrations/qlc/".concat(QLCId),"PUT",config),deleteQLCTrigger:async config=>{await(0,ledfx.U)("/api/integrations/qlc/qlc","DELETE",config)}}),ui_storeNotifications=set=>({updateNotificationInterval:1440,setUpdateNotificationInterval:ms=>set((0,immer.jM)(state=>{state.updateNotificationInterval=ms}),!1,"setUpdateNotificationInterval")}),defaultMapping={0:{mode:"command",command:"play/pause"},9:{mode:"command",command:"padscreen"},12:{mode:"command",command:"brightness-up"},13:{mode:"command",command:"brightness-down"}},ui_storePad=set=>({mapping:{0:defaultMapping,1:defaultMapping,2:defaultMapping,3:defaultMapping},analogBrightness:{0:!1,1:!1,2:!1,3:!1},blocked:!1,setMapping:mapping=>set((0,immer.jM)(state=>{state.mapping=mapping}),!1,"setMapping"),setAnalogBrightness:analogBrightness=>set((0,immer.jM)(state=>{state.analogBrightness=analogBrightness}),!1,"setAnalogBrightness"),setBlocked:blocked=>set((0,immer.jM)(state=>{state.blocked=blocked}),!1,"setBlocked")}),lpCommonColors={red:5,orange:9,lime:21,darkred:7,darkolivegreen:23,yellow:13,black:0,darkorange:60},lpColors={"#616161":0,"#b3b3b3":1,"#dddddd":2,"#ffffff":3,"#ffb3b3":4,"#ff6161":5,"#dd6161":6,"#b36161":7,"#fff3d5":8,"#ffb361":9,"#dd8c61":10,"#b37661":11,"#ffeea1":12,"#ffff61":13,"#dddd61":14,"#b3b361":15,"#ddffa1":16,"#c2ff61":17,"#a1dd61":18,"#81b361":19,"#c2ffb3":20,"#61ff61":21,"#61dd61":22,"#61b361":23,"#c2ffc2":24,"#61ff8c":25,"#61dd76":26,"#61b36b":27,"#c2ffcc":28,"#61ffcc":29,"#61dda1":30,"#61b381":31,"#c2fff3":32,"#61ffe9":33,"#61ddc2":34,"#61b396":35,"#c2f3ff":36,"#61eeff":37,"#61c7dd":38,"#61a1b3":39,"#c2ddff":40,"#61c7ff":41,"#61a1dd":42,"#6181b3":43,"#a18cff":44,"#6161ff":45,"#6161dd":46,"#6161b3":47,"#ccb3ff":48,"#a161ff":49,"#8161dd":50,"#7661b3":51,"#ffb3ff":52,"#ff61ff":53,"#dd61dd":54,"#b361b3":55,"#ffb3d5":56,"#ff61c2":57,"#dd61a1":58,"#b3618c":59,"#ff7661":60,"#e9b361":61,"#ddc261":62,"#a1a161":63,"#61b261":64,"#61b38c":65,"#618cd5":66,"#6162ff":67,"#61b3b3":68,"#8c61f3":69,"#ccb3c2":70,"#8c7681":71,"#ff6261":72,"#f3ffa1":73,"#eefc61":74,"#ccff61":75,"#76dd61":76,"#61ffcd":77,"#61e9ff":78,"#61a1ff":79,"#8c61ff":80,"#cc61fc":81,"#ee8cdd":82,"#a17661":83,"#ffa161":84,"#cbe558":85,"#d5ff8c":86,"#61ff62":87,"#b3ffa1":88,"#ccfcd5":89,"#b3fff6":90,"#cce4ff":91,"#a1c2f6":92,"#d5c2f9":93,"#f98cff":94,"#ff61cc":95,"#ffc261":96,"#f3ee61":97,"#e3fe60":98,"#ddcc61":99,"#b3a161":100,"#61ba76":101,"#76c28c":102,"#8181a1":103,"#818ccc":104,"#ccaa81":105,"#dd6261":106,"#f9b3a1":107,"#f9ba76":108,"#fff38c":109,"#e9f9a1":110,"#d5ee76":111,"#8181a2":112,"#f9f9d5":113,"#ddfce4":114,"#e9e9ff":115,"#e4d5ff":116,"#b3b3b4":117,"#d5d5d5":118,"#f9ffff":119,"#e96161":120,"#aa6161":121,"#81f661":122,"#61b461":123,"#f3ee62":124,"#b3a162":125,"#eec261":126,"#c27661":127},createLedFunctions=(solid_mode,flash_mode,pulse_mode,colors)=>({ledOff:buttonNumber=>[solid_mode,buttonNumber,0],ledOn:function(buttonNumber,color){let mode=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"solid";return["pulse"===mode?pulse_mode:"flash"===mode?flash_mode:solid_mode,buttonNumber,"number"==typeof color?color:colors[color]]},ledSolid:(buttonNumber,color)=>[solid_mode,buttonNumber,"number"==typeof color?color:colors[color]],ledFlash:(buttonNumber,color)=>[flash_mode,buttonNumber,"number"==typeof color?color:colors[color]],ledPulse:(buttonNumber,color)=>[pulse_mode,buttonNumber,"number"==typeof color?color:colors[color]]}),rgbFunction=(buttonNumber,r,g,b)=>[240,0,32,41,2,12,3,3,buttonNumber,Math.floor(r/2),Math.floor(g/2),Math.floor(b/2),247],LaunchpadMK2={buttonNumbers:[[11,12,13,14,15,16,17,18,19],[21,22,23,24,25,26,27,28,29],[31,32,33,34,35,36,37,38,39],[41,42,43,44,45,46,47,48,49],[51,52,53,54,55,56,57,58,59],[61,62,63,64,65,66,67,68,69],[71,72,73,74,75,76,77,78,79],[81,82,83,84,85,86,87,88,89],[-1,-1,-1,-1,-1,-1,-1,-1,-1]],colors:lpColors,commonColors:lpCommonColors,globalColors:{sceneActiveType:"90",sceneActiveColor:"1E",sceneInactiveType:"90",sceneInactiveColor:"3C",commandType:"90",commandColor:"63"},command:{programmer:[240,0,32,41,2,12,14,1,247],live:[240,0,32,41,2,12,14,0,247],standalone:[240,0,32,41,2,12,16,0,247],daw:[240,0,32,41,2,12,16,1,247],ledOn:[144,"buttonNumber","color"],ledFlash:[145,"buttonNumber","color"],ledPulse:[146,"buttonNumber","color"],rgb:[240,0,32,41,2,12,3,3,"buttonNumber","r","g","b",247]},fn:(0,objectSpread2.A)((0,objectSpread2.A)({},createLedFunctions(144,145,146,lpColors)),{},{rgb:rgbFunction})},lpsColors={"#FF0000":15,"#FFA500":47,"#00FF00":60,"#8B0000":13,"#526F50":28,"#FFFF00":62,"#000000":12,"#FF7F00":63},LaunchpadS={buttonNumbers:[[112,113,114,115,116,117,118,119,120],[96,97,98,99,100,101,102,103,104],[80,81,82,83,84,85,86,87,88],[64,65,66,67,68,69,70,71,72],[48,49,50,51,52,53,54,55,56],[32,33,34,35,36,37,38,39,40],[16,17,18,19,20,21,22,23,24],[0,1,2,3,4,5,6,7,8],[-1,-1,-1,-1,-1,-1,-1,-1,-1]],colors:lpsColors,commonColors:{red:15,orange:47,lime:60,darkred:13,darkolivegreen:28,yellow:62,black:12,darkorange:63},globalColors:{sceneActiveType:"90",sceneActiveColor:"3C",sceneInactiveType:"90",sceneInactiveColor:"0F",commandType:"90",commandColor:"3E"},command:{ledOn:[144,"buttonNumber","color"]},fn:(colors=lpsColors,{ledOff:buttonNumber=>[144,buttonNumber,12],ledOn:(buttonNumber,color)=>[144,buttonNumber,"number"==typeof color?color:colors[color]]})};var colors;const MidiDevices={Launchpad:{X:{buttonNumbers:[[11,12,13,14,15,16,17,18,19],[21,22,23,24,25,26,27,28,29],[31,32,33,34,35,36,37,38,39],[41,42,43,44,45,46,47,48,49],[51,52,53,54,55,56,57,58,59],[61,62,63,64,65,66,67,68,69],[71,72,73,74,75,76,77,78,79],[81,82,83,84,85,86,87,88,89],[91,92,93,94,95,96,97,98,99]],colors:lpColors,commonColors:lpCommonColors,globalColors:{sceneActiveType:"rgb",sceneActiveColor:"rgb(0, 255, 0)",sceneInactiveType:"rgb",sceneInactiveColor:"rgb(255, 0, 0)",commandType:"rgb",commandColor:"rgb(255, 255, 0)"},command:{programmer:[240,0,32,41,2,12,14,1,247],live:[240,0,32,41,2,12,14,0,247],standalone:[240,0,32,41,2,12,16,0,247],daw:[240,0,32,41,2,12,16,1,247],ledOn:[144,"buttonNumber","color"],ledFlash:[145,"buttonNumber","color"],ledPulse:[146,"buttonNumber","color"],rgb:[240,0,32,41,2,12,3,3,"buttonNumber","r","g","b",247],text:[240,0,32,41,2,12,7,1,7,0,37,72,97,99,107,101,100,32,98,121,32,66,108,97,100,101,33,247],stopText:[240,0,32,41,2,12,7,247]},fn:(0,objectSpread2.A)((0,objectSpread2.A)({},createLedFunctions(144,145,146,lpColors)),{},{rgb:rgbFunction,text:function(text,r,g,b,loop){return[240,0,32,41,2,12,7,loop?1:0,arguments.length>5&&void 0!==arguments[5]?arguments[5]:7,1,Math.floor(r/2),Math.floor(g/2),Math.floor(b/2),...text.split("").map(char=>char.charCodeAt(0)),247]}})},MK2:LaunchpadMK2,S:LaunchpadS},Launchkey:{MK3:{buttonNumbers:[[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[36,37,38,39,44,45,46,47,-1],[40,41,42,43,48,49,50,51,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1]],colors:lpColors,commonColors:lpCommonColors,globalColors:{sceneActiveType:"rgb",sceneActiveColor:"rgb(0, 255, 0)",sceneInactiveType:"rgb",sceneInactiveColor:"rgb(255, 0, 0)",commandType:"rgb",commandColor:"rgb(255, 255, 0)"},command:{standalone:[159,12,0],daw:[159,12,127],ledOn:[153,"buttonNumber","color"],ledFlash:[154,"buttonNumber","color"],ledPulse:[155,"buttonNumber","color"],text:[240,0,32,41,2,15,4,"row","character","character",247],stopText:[240,0,32,41,2,15,6,247]},fn:(0,objectSpread2.A)((0,objectSpread2.A)({},createLedFunctions(153,154,155,lpColors)),{},{text:text=>[240,0,32,41,2,15,4,...text.split("").map(char=>char.charCodeAt(0)),247]})},MiniMK3:{buttonNumbers:[[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[36,37,38,39,44,45,46,47,-1],[40,41,42,43,48,49,50,51,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1]],colors:lpColors,commonColors:lpCommonColors,globalColors:{sceneActiveType:"rgb",sceneActiveColor:"rgb(0, 255, 0)",sceneInactiveType:"rgb",sceneInactiveColor:"rgb(255, 0, 0)",commandType:"rgb",commandColor:"rgb(255, 255, 0)"},command:{standalone:[159,12,0],daw:[159,12,127],ledOn:[153,"buttonNumber","color"],ledFlash:[154,"buttonNumber","color"],ledPulse:[155,"buttonNumber","color"]},fn:(0,objectSpread2.A)({},createLedFunctions(153,154,155,lpColors))}}},baseMapping={};for(let row=1;row<=9;row++)for(let col=1;col<=9;col++){const key=parseInt("".concat(row).concat(col));baseMapping[key]={buttonNumber:key}}const storeMidi_defaultMapping=(0,objectSpread2.A)((0,objectSpread2.A)({},baseMapping),{}),ui_storeMidi=(set,get)=>({getColorFromValue:value=>{if("undefined"===value)return;const state=get(),colors=MidiDevices[state.midiType][state.midiModel].colors,numericValue=parseInt(value,16);return Object.keys(colors).find(key=>colors[key]===numericValue)||void 0},getUiBtnNo:inputInt=>{const state=get(),midiDevice=MidiDevices[state.midiType][state.midiModel];for(let i=0;i<midiDevice.buttonNumbers.length;i++)for(let j=0;j<midiDevice.buttonNumbers[i].length;j++)if(midiDevice.buttonNumbers[i][j]===inputInt)return midiDevice.buttonNumbers[i][j];return null},blockMidiHandler:!1,setBlockMidiHandler:block=>set((0,immer.jM)(state=>{state.blockMidiHandler=block}),!1,"setBlockMidiHandler"),midiType:"Launchpad",setMidiType:type=>set((0,immer.jM)(state=>{state.midiType=type}),!1,"setMidiType"),midiModel:"X",setMidiModel:model=>set((0,immer.jM)(state=>{state.midiModel=model}),!1,"setMidiModel"),midiInputs:[],setMidiInputs:inputs=>set((0,immer.jM)(state=>{state.midiInputs=inputs}),!1,"setMidiInputs"),midiOutputs:[],setMidiOutputs:outputs=>set((0,immer.jM)(state=>{state.midiOutputs=outputs}),!1,"setMidiOutputs"),midiInput:"",setMidiInput:input=>set((0,immer.jM)(state=>{state.midiInput=input}),!1,"setMidiInput"),midiOutput:"",setMidiOutput:output=>set((0,immer.jM)(state=>{state.midiOutput=output}),!1,"setMidiOutput"),midiInitialized:!1,initMidi:()=>set((0,immer.jM)(state=>{state.midiInitialized=!state.midiInitialized}),!1,"setMidiInitialized"),midiColors:{commandColor:"63",sceneActiveColor:"1E",sceneInactiveColor:"3C",commandType:"90",sceneActiveType:"90",sceneInactiveType:"90",pressedButtonColor:null},setMidiCommandType:type=>set((0,immer.jM)(state=>{state.midiColors.commandType=type}),!1,"setMidiCommandType"),setMidiSceneActiveType:type=>set((0,immer.jM)(state=>{state.midiColors.sceneActiveType=type}),!1,"setMidiSceneActiveType"),setMidiSceneInactiveType:type=>set((0,immer.jM)(state=>{state.midiColors.sceneInactiveType=type}),!1,"setMidiSceneInactiveType"),setMidiCommandColor:color=>set((0,immer.jM)(state=>{state.midiColors.commandColor=color}),!1,"setMidiCommandColor"),setMidiSceneActiveColor:color=>set((0,immer.jM)(state=>{state.midiColors.sceneActiveColor=color}),!1,"setMidiSceneActiveColor"),setMidiSceneInactiveColor:color=>set((0,immer.jM)(state=>{state.midiColors.sceneInactiveColor=color}),!1,"setMidiSceneInactiveColor"),setPressedButtonColor:color=>set((0,immer.jM)(state=>{state.midiColors.pressedButtonColor=color}),!1,"setPressedButtonColor"),midiMapping:{0:storeMidi_defaultMapping},setMidiMapping:midiMapping=>set((0,immer.jM)(state=>{state.midiMapping=midiMapping}),!1,"setMidiMapping"),setMidiMappingButtonNumbers:inputArray=>set((0,immer.jM)(state=>{if(9!==inputArray.length||!inputArray.every(row=>9===row.length))throw new Error("Input must be a 9x9 array");const updatedMapping=(0,objectSpread2.A)({},state.midiMapping);updatedMapping[0]=(0,objectSpread2.A)({},state.midiMapping[0]);for(let row=0;row<9;row++)for(let col=0;col<9;col++){const key=10*(row+1)+(col+1);updatedMapping[0][key]?updatedMapping[0][key]=(0,objectSpread2.A)((0,objectSpread2.A)({},updatedMapping[0][key]),{},{buttonNumber:inputArray[row][col]}):updatedMapping[0][key]={buttonNumber:inputArray[row][col]}}state.midiMapping=updatedMapping}),!1,"updateMidiMapping"),midiEvent:{name:"",note:"",button:-1},setMidiEvent:midiEvent=>set((0,immer.jM)(state=>{state.midiEvent=midiEvent}),!1,"setMidiEvent")}),ui_storeVideo=set=>({videoMapper:{wledIp:"",calibrating:!1},points:[],setPoints:points=>set((0,immer.jM)(state=>{state.points=points}),!1,"setPoints"),addPoint:point=>set((0,immer.jM)(state=>{state.points.push(point)}),!1,"addPoint"),setWledIp:wledIp=>set((0,immer.jM)(state=>{state.videoMapper.wledIp=wledIp}),!1,"setWledIp"),setCalibrating:calibrating=>set((0,immer.jM)(state=>{state.videoMapper.calibrating=calibrating}),!1,"setCalibrating")}),storeUIpersist=()=>({infoAlerts:{scenes:!0,devices:!0,user:!0,gamepad:!0,matrix:!0,camera:!0,matrixGroups:!0,pixelMode:!0,groupMode:!0},expander:{scenesRecent:!1,scenesMostUsed:!1},warnings:{lessPixels:!0},blenderAutomagic:!0,showHex:!1,pixelGraphSettings:{smoothing:!1,round:!0,space:!0,stretch:!0,variants:"canvas"}}),storeUIpersistActions=set=>({setInfoAlerts:(key,val)=>set((0,immer.jM)(state=>{state.uiPersist.infoAlerts[key]=val}),!1,"uiPersist/setInfoAlerts"),setWarnings:(key,val)=>set((0,immer.jM)(state=>{state.uiPersist.warnings[key]=val}),!1,"uiPersist/setWarnings"),setBlenderAutomagic:val=>set((0,immer.jM)(state=>{state.uiPersist.blenderAutomagic=val}),!1,"ui/blenderAutomagic"),setShowHex:show=>set((0,immer.jM)(state=>{state.uiPersist.showHex=show}),!1,"ui/showHex"),setPixelGraphSettings:(key,val)=>set((0,immer.jM)(state=>{state.uiPersist.pixelGraphSettings[key]=val}),!1,"uiPersist/setPixelGraphSettings"),setExpander:(key,val)=>set((0,immer.jM)(state=>{state.uiPersist.expander[key]=val}),!1,"uiPersist/setExpander")}),ui_storeSongDectector=set=>({song:"",setSong:url=>{set((0,immer.jM)(state=>{state.song=url}),!1,"songDetector/setSong")}});var helpers=__webpack_require__("./src/utils/helpers.ts"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");const _excluded=["deprecatedValue"],_excluded2=["variants"],migrations={11:(0,immer.jM)(draft=>{draft.uiPersist=draft.uiPersist||{},draft.uiPersist.testZustand={test:!0}}),12:(0,immer.jM)(draft=>{draft.uiPersist&&delete draft.uiPersist.testZustand}),14:state=>{const{deprecatedValue}=state,rest=(0,objectWithoutProperties.A)(state,_excluded);return(0,objectSpread2.A)((0,objectSpread2.A)({},rest),{},{existingValue:state.anotherValue+1})},15:state=>(0,objectSpread2.A)((0,objectSpread2.A)({},state),{},{newValue:state.existingValue+1,newFunction:()=>console.log("New Function")}),16:state=>(0,objectSpread2.A)({},state),17:state=>(0,objectSpread2.A)({},state),18:state=>(0,objectSpread2.A)({},state),19:state=>{const _state$uiPersist$pixe=state.uiPersist.pixelGraphSettings,{variants}=_state$uiPersist$pixe,rest=(0,objectWithoutProperties.A)(_state$uiPersist$pixe,_excluded2);return(0,objectSpread2.A)((0,objectSpread2.A)({},state),{},{uiPersist:(0,objectSpread2.A)((0,objectSpread2.A)({},state.uiPersist),{},{pixelGraphSettings:(0,objectSpread2.A)({},rest)})})},20:state=>(0,objectSpread2.A)((0,objectSpread2.A)({},state),{},{uiPersist:(0,objectSpread2.A)((0,objectSpread2.A)({},state.uiPersist),{},{pixelGraphSettings:(0,objectSpread2.A)((0,objectSpread2.A)({},state.uiPersist.pixelGraphSettings),{},{variants:"canvas"})})}),21:state=>(0,objectSpread2.A)((0,objectSpread2.A)({},state),{},{updateScene:async(name,id,scene_image,scene_tags,scene_puturl,scene_payload,scene_midiactivate,virtuals)=>virtuals?await(0,ledfx.U)("/api/scenes","POST",{name,id,scene_image,scene_tags,scene_puturl,scene_payload,scene_midiactivate,virtuals}):await(0,ledfx.U)("/api/scenes","POST",{name,id,scene_image,scene_tags,scene_puturl,scene_payload,scene_midiactivate})}),22:state=>(0,objectSpread2.A)((0,objectSpread2.A)({},state),{},{usePerDeviceDelay:!1,setUsePerDeviceDelay:newState=>{store_useStore.setState((0,immer.jM)(state=>{state.usePerDeviceDelay=newState}),!1,"webaudio/setUsePerDeviceDelay")},perDeviceDelay:{},setPerDeviceDelay:newState=>{store_useStore.setState((0,immer.jM)(state=>{state.perDeviceDelay=newState}),!1,"webaudio/setPerDeviceDelay")}}),23:(0,immer.jM)(draft=>{draft.config=draft.config||{},draft.config.startup_scene_id=""}),24:(0,immer.jM)(draft=>{draft.config&&(draft.config.hosts=draft.config.hosts||[])}),25:(0,immer.jM)(draft=>{draft.uiPersist&&draft.uiPersist.assistant&&(draft.uiPersist.assistant.groupMode=!0)}),26:(0,immer.jM)(draft=>{draft.dialogs&&(draft.dialogs.qrConnector={open:!1,edit:!1}),draft.userClosedQrConnector=!1}),27:(0,immer.jM)(draft=>{if(draft.virtuals)for(const virtId in draft.virtuals){var _draft$virtuals$virtI;const effect=null===(_draft$virtuals$virtI=draft.virtuals[virtId])||void 0===_draft$virtuals$virtI?void 0:_draft$virtuals$virtI.effect;effect&&""===effect.type&&0===Object.keys(effect.config).length&&(draft.virtuals[virtId].effect.type=null,draft.virtuals[virtId].effect.config=null)}}),28:(0,immer.jM)(draft=>{draft.isExternalEditorOpen=!1,draft.virtualEditorIsDirty=!1,draft.virtualEditorSnapshot=null}),29:(0,immer.jM)(draft=>{draft.playlists={},draft.currentPlaylist=null,draft.playlistRuntimeState=null,draft.playlistOrder=[]}),30:(0,immer.jM)(draft=>{draft.ui&&(draft.ui.globalColorWidgetX=50,draft.ui.globalColorWidgetY=200,draft.ui.globalColorWidget=!1)}),31:(0,immer.jM)(draft=>{draft.presets?draft.presets.default_presets||draft.presets.custom_presets?(draft.presets.ledfx_presets=draft.presets.default_presets||{},draft.presets.user_presets=draft.presets.custom_presets||{}):(draft.presets.ledfx_presets={},draft.presets.user_presets={}):draft.presets={ledfx_presets:{},user_presets:{}},draft.features&&(draft.features.scenePlaylistBackend=!1,draft.features.showPlaylistInBottomBar=!1,draft.features.showFlowInBottomBar=!1),draft.showFeatures&&(draft.showFeatures.scenePlaylistBackend=!1,draft.showFeatures.showPlaylistInBottomBar=!1,draft.showFeatures.showFlowInBottomBar=!1)})},ui_storeMatrix=set=>({isExternalEditorOpen:!1,virtualEditorIsDirty:!1,virtualEditorSnapshot:null,externalStudioRef:null,setExternalEditorOpen:isOpen=>set((0,immer.jM)(state=>{state.isExternalEditorOpen=isOpen}),!1,"setExternalEditorOpen"),setVirtualEditorIsDirty:isDirty=>set((0,immer.jM)(state=>{state.virtualEditorIsDirty=isDirty}),!1,"setVirtualEditorIsDirty"),setVirtualEditorSnapshot:snapshot=>set((0,immer.jM)(state=>{state.virtualEditorSnapshot=snapshot}),!1,"setVirtualEditorSnapshot"),setExternalStudioRef:win=>set({externalStudioRef:win})}),api_storePlaylist=set=>({playlists:{},currentPlaylist:null,playlistRuntimeState:null,playlistOrder:[],sceneStartTime:Date.now(),onPlaylistStarted:data=>{set((0,immer.jM)(state=>{((state,data)=>{state.currentPlaylist=data.playlist_id,state.playlistRuntimeState||(state.playlistRuntimeState={}),state.playlistRuntimeState.active_playlist=data.playlist_id,state.playlistRuntimeState.index=data.index,state.playlistRuntimeState.scene_id=data.scene_id,state.playlistRuntimeState.effective_duration_ms=data.effective_duration_ms,state.playlistRuntimeState.paused=!1,state.sceneStartTime=Date.now()})(state,data)}),!1,"playlist/started"),store_useStore.getState().getPlaylistState()},onPlaylistAdvanced:data=>{set((0,immer.jM)(state=>{((state,data)=>{state.playlistRuntimeState&&(state.playlistRuntimeState.index=data.index,state.playlistRuntimeState.scene_id=data.scene_id,state.playlistRuntimeState.effective_duration_ms=data.effective_duration_ms,state.sceneStartTime=Date.now())})(state,data)}),!1,"playlist/advanced"),0===data.index&&store_useStore.getState().getPlaylistState()},onPlaylistStopped:()=>{set((0,immer.jM)(state=>{(state=>{state.currentPlaylist=null,state.playlistRuntimeState=null})(state)}),!1,"playlist/stopped")},onPlaylistPaused:data=>{set((0,immer.jM)(state=>{((state,data)=>{state.playlistRuntimeState&&(state.playlistRuntimeState.paused=!0,state.playlistRuntimeState.remaining_ms=data.remaining_ms)})(state,data)}),!1,"playlist/paused")},onPlaylistResumed:data=>{set((0,immer.jM)(state=>{((state,data)=>{state.playlistRuntimeState&&(state.playlistRuntimeState.paused=!1,state.playlistRuntimeState.remaining_ms=data.remaining_ms)})(state,data)}),!1,"playlist/resumed")},setPlaylistOrder:order=>{set((0,immer.jM)(state=>{state.playlistOrder=order}),!1,"setPlaylistOrder")},setCurrentPlaylist:playlistId=>{set((0,immer.jM)(state=>{state.currentPlaylist=playlistId}),!1,"setCurrentPlaylist")},getPlaylists:async()=>{const resp=await(0,ledfx.U)("/api/playlists");return resp&&resp.playlists&&set((0,immer.jM)(state=>{state.playlists=resp.playlists}),!1,"api/gotPlaylists"),resp},getPlaylist:async playlistId=>{var _resp$data;const resp=await(0,ledfx.U)("/api/playlists/".concat(playlistId));return resp&&null!==(_resp$data=resp.data)&&void 0!==_resp$data&&_resp$data.playlist&&set((0,immer.jM)(state=>{state.playlists[playlistId]=resp.data.playlist}),!1,"api/gotSinglePlaylist"),resp},createPlaylist:async config=>{var _resp$data2;const resp=await(0,ledfx.U)("/api/playlists","POST",config);return resp&&null!==(_resp$data2=resp.data)&&void 0!==_resp$data2&&_resp$data2.playlist&&set((0,immer.jM)(state=>{state.playlists[resp.data.playlist.id]=resp.data.playlist}),!1,"api/createdPlaylist"),resp},updatePlaylist:async(playlistId,name,config)=>{var _resp$data3;const updatedConfig=(0,objectSpread2.A)((0,objectSpread2.A)({},config),{},{name,id:playlistId}),resp=await(0,ledfx.U)("/api/playlists","POST",updatedConfig);return resp&&null!==(_resp$data3=resp.data)&&void 0!==_resp$data3&&_resp$data3.playlist&&set((0,immer.jM)(state=>{state.playlists[playlistId]=resp.data.playlist}),!1,"api/updatedPlaylist"),resp},deletePlaylist:async playlistId=>{const resp=await(0,ledfx.U)("/api/playlists/".concat(playlistId),"DELETE");return resp&&"success"===resp.status&&set((0,immer.jM)(state=>{delete state.playlists[playlistId],state.currentPlaylist===playlistId&&(state.currentPlaylist=null,state.playlistRuntimeState=null)}),!1,"api/deletedPlaylist"),resp},startPlaylist:async(playlistId,mode,timing)=>{var _resp$data4;const controlRequest=(0,objectSpread2.A)((0,objectSpread2.A)({action:"start",id:playlistId},mode&&{mode}),timing&&{timing}),resp=await(0,ledfx.U)("/api/playlists","PUT",controlRequest);return resp&&null!==(_resp$data4=resp.data)&&void 0!==_resp$data4&&_resp$data4.state&&set((0,immer.jM)(state=>{state.currentPlaylist=playlistId,state.playlistRuntimeState=resp.data.state}),!1,"api/startedPlaylist"),resp},stopPlaylist:async()=>{const resp=await(0,ledfx.U)("/api/playlists","PUT",{action:"stop"});return resp&&"success"===resp.status&&set((0,immer.jM)(state=>{state.currentPlaylist=null,state.playlistRuntimeState=null}),!1,"api/stoppedPlaylist"),resp},pausePlaylist:async()=>{var _resp$data5;const resp=await(0,ledfx.U)("/api/playlists","PUT",{action:"pause"});return resp&&null!==(_resp$data5=resp.data)&&void 0!==_resp$data5&&_resp$data5.state&&set((0,immer.jM)(state=>{state.playlistRuntimeState=resp.data.state}),!1,"api/pausedPlaylist"),resp},resumePlaylist:async()=>{var _resp$data6;const resp=await(0,ledfx.U)("/api/playlists","PUT",{action:"resume"});return resp&&null!==(_resp$data6=resp.data)&&void 0!==_resp$data6&&_resp$data6.state&&set((0,immer.jM)(state=>{state.playlistRuntimeState=resp.data.state}),!1,"api/resumedPlaylist"),resp},nextPlaylistItem:async()=>{var _resp$data7;const resp=await(0,ledfx.U)("/api/playlists","PUT",{action:"next"});return resp&&null!==(_resp$data7=resp.data)&&void 0!==_resp$data7&&_resp$data7.state&&set((0,immer.jM)(state=>{state.playlistRuntimeState=resp.data.state}),!1,"api/nextPlaylistItem"),resp},previousPlaylistItem:async()=>{var _resp$data8;const resp=await(0,ledfx.U)("/api/playlists","PUT",{action:"prev"});return resp&&null!==(_resp$data8=resp.data)&&void 0!==_resp$data8&&_resp$data8.state&&set((0,immer.jM)(state=>{state.playlistRuntimeState=resp.data.state}),!1,"api/previousPlaylistItem"),resp},getPlaylistState:async()=>{var _resp$data9;const resp=await(0,ledfx.U)("/api/playlists","PUT",{action:"state"});return resp&&null!==(_resp$data9=resp.data)&&void 0!==_resp$data9&&_resp$data9.state&&set((0,immer.jM)(state=>{state.playlistRuntimeState=resp.data.state,resp.data.state.active_playlist&&(state.currentPlaylist=resp.data.state.active_playlist)}),!1,"api/gotPlaylistState"),resp},addItemToPlaylist:async(playlistId,item)=>{const state=store_useStore.getState(),playlist=state.playlists[playlistId];if(!playlist)return null;const updatedItems=Array.isArray(playlist.items)?[...playlist.items,item]:[item];return state.updatePlaylist(playlistId,playlist.name,{items:updatedItems})},removeItemFromPlaylist:async(playlistId,itemIndex)=>{const state=store_useStore.getState(),playlist=state.playlists[playlistId];if(!playlist||!Array.isArray(playlist.items))return null;const updatedItems=playlist.items.filter((_,index)=>index!==itemIndex);return state.updatePlaylist(playlistId,playlist.name,{items:updatedItems})},reorderPlaylistItems:async(playlistId,fromIndex,toIndex)=>{const state=store_useStore.getState(),playlist=state.playlists[playlistId];if(!playlist||!Array.isArray(playlist.items))return null;const items=[...playlist.items],[movedItem]=items.splice(fromIndex,1);return items.splice(toIndex,0,movedItem),state.updatePlaylist(playlistId,playlist.name,{items})},updatePlaylistMode:async(playlistId,mode)=>{const state=store_useStore.getState(),playlist=state.playlists[playlistId];return playlist?state.updatePlaylist(playlistId,playlist.name,{mode}):null},startPlaylistWithMode:async(playlistId,runtimeMode,timing)=>{var _resp$data0;const controlRequest=(0,objectSpread2.A)((0,objectSpread2.A)({action:"start",id:playlistId},runtimeMode&&{mode:runtimeMode}),timing&&{timing}),resp=await(0,ledfx.U)("/api/playlists","PUT",controlRequest);return resp&&null!==(_resp$data0=resp.data)&&void 0!==_resp$data0&&_resp$data0.state&&set((0,immer.jM)(state=>{state.currentPlaylist=playlistId,state.playlistRuntimeState=resp.data.state}),!1,"api/startedPlaylistWithMode"),resp}}),api_storeAssets=set=>({assets:[],assetsFixed:[],cacheStats:null,getAssets:async()=>{const resp=await(0,ledfx.U)("/api/assets");resp&&resp.assets&&set((0,immer.jM)(state=>{state.assets=resp.assets}),!1,"api/getAssets")},getAssetsFixed:async()=>{const resp=await(0,ledfx.U)("/api/assets_fixed");return resp&&resp.assets&&set((0,immer.jM)(state=>{state.assetsFixed=resp.assets}),!1,"api/getAssetsFixed"),resp},uploadAsset:async(file,filename)=>{const formData=new FormData;formData.append("file",file),formData.append("path",filename);return await(0,ledfx.U)("/api/assets","POST",formData)},deleteAsset:async filename=>{const encodedFilename=encodeURIComponent(filename),resp=await(0,ledfx.U)("/api/assets?path=".concat(encodedFilename),"DELETE");return resp&&(console.log("Asset deleted:",filename),set((0,immer.jM)(state=>{state.assets=state.assets.filter(asset=>asset.path!==filename)}),!1,"api/deleteAsset")),resp},getCacheStats:async()=>{const resp=await(0,ledfx.U)("/api/cache/images");return resp&&set((0,immer.jM)(state=>{state.cacheStats=resp}),!1,"api/getCacheStats"),resp},clearCache:async url=>{const endpoint=url?"/api/cache/images?url=".concat(encodeURIComponent(url)):"/api/cache/images",resp=await(0,ledfx.U)(endpoint,"DELETE");return resp&&"success"===resp.status&&set((0,immer.jM)(state=>{!url&&state.cacheStats?(state.cacheStats.entries=[],state.cacheStats.total_count=0,state.cacheStats.total_size=0):url&&state.cacheStats&&(state.cacheStats.entries=state.cacheStats.entries.filter(entry=>entry.url!==url),state.cacheStats.total_count=state.cacheStats.entries.length,state.cacheStats.total_size=state.cacheStats.entries.reduce((sum,entry)=>sum+entry.file_size,0))}),!1,"api/clearCache"),resp},refreshCacheImage:async url=>{const resp=await(0,ledfx.U)("/api/cache/images/refresh","POST",{url});return resp&&"success"===resp.status&&set((0,immer.jM)(state=>{state.cacheStats&&(state.cacheStats.entries=state.cacheStats.entries.filter(entry=>entry.url!==url),state.cacheStats.total_count=state.cacheStats.entries.length,state.cacheStats.total_size=state.cacheStats.entries.reduce((sum,entry)=>sum+entry.file_size,0))}),!1,"api/refreshCacheImage"),resp}}),useStore=(0,react.v)((0,middleware.lt)((0,middleware.Zr)((0,middleware.kg)({hackedBy:"Blade"},(set,get)=>(0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)((0,objectSpread2.A)({ui:ui_storeUI(set),uiPersist:storeUIpersist(),spotify:ui_storeSpotify(),qlc:ui_storeQLC(),user:ui_storeUser(set)},ui_storeMatrix(set)),storeUIpersistActions(set)),ui_storePad(set)),ui_storeMidi(set,get)),ui_storeVideo(set)),ui_storeNotifications(set)),ui_storeTours(set)),ui_storeSpotifyActions(set)),ui_storeQLCActions(set)),ui_storeGeneral(set)),ui_storeDialogs(set)),ui_storeFeatures(set)),ui_storeWebAudio(set)),ui_storeYoutube(set)),ui_storeSongDectector(set)),api_storeColors(set)),api_storeDevices(set)),api_storeVirtuals(set)),api_storeScenes(set)),api_storeIntegrations(set)),api_storePresets(set)),api_storeConfig(set)),api_storeActions(set)),api_storeIntegrationsSpotify(set)),api_storePlaylist(set)),api_storeAssets(set)),ui_storeCloud(set))),{name:"ledfx-storage",version:helpers.XA,migrate:(persistedState,version)=>{(0,helpers.Rm)("infoConfig Migrator","Migrating from version ".concat(version," to ").concat(helpers.XA));let state=persistedState;for(let i=version+1;i<=helpers.XA;i++)migrations[i]&&(state=migrations[i](state));return state},partialize:state=>Object.fromEntries(Object.entries(state).filter(_ref=>{let[key]=_ref;return!["dialogs","disconnected","ui","spotify","pixelGraphs","externalStudioRef"].includes(key)}))}))),store_useStore=(useStore.getState(),useStore)}}]);