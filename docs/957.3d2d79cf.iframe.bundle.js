(()=>{let canvas,ctx;self.onmessage=event=>{if("canvas"in event.data)canvas=event.data.canvas,ctx=canvas.getContext("2d"),ctx.imageSmoothingEnabled=!1;else if("pixels"in event.data){const{pixels,rows,cols}=event.data;canvas.width=cols,canvas.height=rows;const imageData=ctx.createImageData(cols,rows);for(let i=0;i<pixels.length;i++){const x=i%cols,index=4*(Math.floor(i/cols)*cols+x),color=pixels[i];imageData.data[index]=color.r,imageData.data[index+1]=color.g,imageData.data[index+2]=color.b,imageData.data[index+3]=255}ctx.putImageData(imageData,0,0)}}})();