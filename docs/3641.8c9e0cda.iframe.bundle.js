"use strict";(self.webpackChunkledfx=self.webpackChunkledfx||[]).push([[3641],{"./node_modules/@mui/material/esm/DialogContentText/DialogContentText.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>DialogContentText_DialogContentText});var react=__webpack_require__("./node_modules/react/index.js"),clsx=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),composeClasses=__webpack_require__("./node_modules/@mui/utils/esm/composeClasses/composeClasses.js"),rootShouldForwardProp=__webpack_require__("./node_modules/@mui/material/esm/styles/rootShouldForwardProp.js"),styled=__webpack_require__("./node_modules/@mui/material/esm/styles/styled.js"),DefaultPropsProvider=__webpack_require__("./node_modules/@mui/material/esm/DefaultPropsProvider/DefaultPropsProvider.js"),Typography=__webpack_require__("./node_modules/@mui/material/esm/Typography/Typography.js"),generateUtilityClasses=__webpack_require__("./node_modules/@mui/utils/esm/generateUtilityClasses/generateUtilityClasses.js"),generateUtilityClass=__webpack_require__("./node_modules/@mui/utils/esm/generateUtilityClass/generateUtilityClass.js");function getDialogContentTextUtilityClass(slot){return(0,generateUtilityClass.Ay)("MuiDialogContentText",slot)}(0,generateUtilityClasses.A)("MuiDialogContentText",["root"]);var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const DialogContentTextRoot=(0,styled.Ay)(Typography.A,{shouldForwardProp:prop=>(0,rootShouldForwardProp.A)(prop)||"classes"===prop,name:"MuiDialogContentText",slot:"Root"})({}),DialogContentText_DialogContentText=react.forwardRef(function DialogContentText(inProps,ref){const props=(0,DefaultPropsProvider.b)({props:inProps,name:"MuiDialogContentText"}),{children,className,...ownerState}=props,classes=(ownerState=>{const{classes}=ownerState,composedClasses=(0,composeClasses.A)({root:["root"]},getDialogContentTextUtilityClass,classes);return{...classes,...composedClasses}})(ownerState);return(0,jsx_runtime.jsx)(DialogContentTextRoot,{component:"p",variant:"body1",color:"textSecondary",ref,ownerState,className:(0,clsx.A)(classes.root,className),...props,classes})})},"./src/components/SchemaForm/SchemaForm/SchemaForm.tsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>SchemaForm_SchemaForm});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/react/index.js"),styled=__webpack_require__("./node_modules/@mui/material/esm/styles/styled.js"),Select=__webpack_require__("./node_modules/@mui/material/esm/Select/Select.js"),ListSubheader=__webpack_require__("./node_modules/@mui/material/esm/ListSubheader/ListSubheader.js"),MenuItem=__webpack_require__("./node_modules/@mui/material/esm/MenuItem/MenuItem.js"),Autocomplete=__webpack_require__("./node_modules/@mui/material/esm/Autocomplete/Autocomplete.js"),TextField=__webpack_require__("./node_modules/@mui/material/esm/TextField/TextField.js"),Divider=__webpack_require__("./node_modules/@mui/material/esm/Divider/Divider.js"),FormControlLabel=__webpack_require__("./node_modules/@mui/material/esm/FormControlLabel/FormControlLabel.js"),Switch=__webpack_require__("./node_modules/@mui/material/esm/Switch/Switch.js"),DialogContentText=__webpack_require__("./node_modules/@mui/material/esm/DialogContentText/DialogContentText.js"),Info=__webpack_require__("./node_modules/@mui/icons-material/esm/Info.js"),createSvgIcon=__webpack_require__("./node_modules/@mui/material/esm/utils/createSvgIcon.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Mic=(0,createSvgIcon.A)((0,jsx_runtime.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72z"}),"Mic"),Speaker=(0,createSvgIcon.A)((0,jsx_runtime.jsx)("path",{d:"M17 2H7c-1.1 0-2 .9-2 2v16c0 1.1.9 1.99 2 1.99L17 22c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-5 2c1.1 0 2 .9 2 2s-.9 2-2 2c-1.11 0-2-.9-2-2s.89-2 2-2m0 16c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Speaker");var BladeBoolean=__webpack_require__("./src/components/SchemaForm/components/Boolean/BladeBoolean.tsx"),BladeSelect=__webpack_require__("./src/components/SchemaForm/components/String/BladeSelect.tsx"),BladeSlider=__webpack_require__("./src/components/SchemaForm/components/Number/BladeSlider.tsx"),BladeFrame=__webpack_require__("./src/components/SchemaForm/components/BladeFrame.tsx"),GradientPicker=__webpack_require__("./src/components/SchemaForm/components/GradientPicker/GradientPicker.tsx"),useStore=__webpack_require__("./src/store/useStore.ts");const classes={bladeSchemaForm:"".concat("SchemaForm","-bladeSchemaForm"),FormListHeaders:"".concat("SchemaForm","-FormListHeaders"),bladeSelect:"".concat("SchemaForm","-bladeSelect")},Root=(0,styled.Ay)("div")(_ref=>{let{theme}=_ref;return{["& .".concat(classes.bladeSchemaForm)]:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"},["& .".concat(classes.FormListHeaders)]:{background:theme.palette.secondary.main,color:"#fff"},["& .".concat(classes.bladeSelect)]:{"& .MuiSelect-select":{display:"flex",alignItems:"center"}}}}),SchemaForm=_ref2=>{let{schema,model,hideToggle,onModelChange,type}=_ref2;const[hideDesc,setHideDesc]=(0,react.useState)(!0),perDeviceDelay=(0,useStore.A)(state=>null==state?void 0:state.perDeviceDelay),setPerDeviceDelay=(0,useStore.A)(state=>state.setPerDeviceDelay),usePerDeviceDelay=(0,useStore.A)(state=>null==state?void 0:state.usePerDeviceDelay),yzSchema=schema&&schema.properties&&Object.keys(schema.properties).map(sk=>(0,objectSpread2.A)((0,objectSpread2.A)({},schema.properties[sk]),{},{id:sk,required:schema.required&&-1!==schema.required.indexOf(sk),permitted:!schema.permitted_keys||schema.permitted_keys.indexOf(sk)>-1})).sort((a,_b)=>a.required?-1:1).sort((a,_b)=>"name"===a.id?-1:1);function onlyUnique(value,index,self){return self.indexOf(value)===index}return(0,jsx_runtime.jsxs)(Root,{children:[(0,jsx_runtime.jsx)("div",{className:classes.bladeSchemaForm,children:yzSchema&&yzSchema.map((s,i)=>{var _s$enum;switch(s.type){case"boolean":return(0,jsx_runtime.jsx)(BladeBoolean.A,{hideDesc,index:i,model,model_id:s.id,required:s.required,style:{margin:"0.5rem 0",flexBasis:"49%"},schema:s,onClick:(model_id,value)=>{const c={};return c[model_id]=value,onModelChange?onModelChange(c):null}},s.id);case"string":{var _audio_groups,_audio_groups2;const group={};let audio_groups=[];if("audio_device"===s.id){var _schema$properties$au2;for(const[key,value]of Object.entries(null===(_schema$properties$au=schema.properties.audio_device)||void 0===_schema$properties$au?void 0:_schema$properties$au.enum)){var _schema$properties$au;"string"==typeof value&&(group[null==value?void 0:value.split(":")[0]]||(group[value.split(":")[0]]={}),group[value.split(":")[0]][key]=value.split(":")[1])}audio_groups=Object.values(null===(_schema$properties$au2=schema.properties.audio_device)||void 0===_schema$properties$au2?void 0:_schema$properties$au2.enum).map(d=>d.split(":")[0]).filter(onlyUnique)}return null!==(_audio_groups=audio_groups)&&void 0!==_audio_groups&&_audio_groups.length?(0,jsx_runtime.jsx)(BladeFrame.A,{style:{order:-1},title:"Audio Device",full:!0,children:(0,jsx_runtime.jsx)(Select.A,{value:model&&model.audio_device||0,fullWidth:!0,onChange:e=>{const c={};return c.audio_device=parseInt(e.target.value,10),onModelChange?onModelChange(c):null},className:classes.bladeSelect,id:"grouped-select",children:null===(_audio_groups2=audio_groups)||void 0===_audio_groups2?void 0:_audio_groups2.flatMap((c,ind)=>[(0,jsx_runtime.jsx)(ListSubheader.A,{className:classes.FormListHeaders,color:"primary",children:c},"audio-header-".concat(ind)),...Object.keys(group[c]).map(e=>(0,jsx_runtime.jsxs)(MenuItem.A,{value:e,children:[group[c][e].indexOf("[Loopback]")>-1?(0,jsx_runtime.jsx)(Speaker,{style:{marginRight:"10px"}}):(0,jsx_runtime.jsx)(Mic,{style:{marginRight:"10px"}}),group[c][e].replace("[Loopback]","")]},e))])})},s.id):!("mqtt_hass"===type&&"name"===s.id||"mqtt_hass"===type&&"description"===s.id)&&(0,jsx_runtime.jsx)(BladeSelect.A,{children:void 0,hideDesc,type,model,disabled:!s.permitted,wrapperStyle:{margin:"0.5rem 0",width:"49%",flexBasis:"unset"},textStyle:{width:"100%"},schema:s,required:s.required,model_id:s.id,index:i,onChange:(model_id,value)=>{const c={};return c[model_id]=value,onModelChange?onModelChange(c):null}},s.id)}case"number":return(0,jsx_runtime.jsx)(BladeSlider.A,{step:void 0,hideDesc,disabled:!s.permitted,model_id:s.id,model,required:s.required,schema:s,onChange:(model_id,value)=>{const c={};return c[model_id]=value,onModelChange?onModelChange(c):null}},s.id);case"integer":return(0,jsx_runtime.jsx)(BladeSlider.A,{full:"delay_ms"===s.id,hideDesc,disabled:!s.permitted,step:1,model_id:s.id,model,required:s.required,schema:s,textfield:!1,marks:void 0,index:void 0,style:{margin:"0.5rem 0",width:"49%"},onChange:(model_id,value)=>{var _schema$properties$au3;const c={};var _schema$properties$au4;(c[model_id]=value,"delay_ms"===model_id&&usePerDeviceDelay&&model.audio_device&&value!==perDeviceDelay[null===(_schema$properties$au3=schema.properties.audio_device)||void 0===_schema$properties$au3?void 0:_schema$properties$au3.enum[model.audio_device]])&&setPerDeviceDelay((0,objectSpread2.A)((0,objectSpread2.A)({},perDeviceDelay),{},{[null===(_schema$properties$au4=schema.properties.audio_device)||void 0===_schema$properties$au4?void 0:_schema$properties$au4.enum[model.audio_device]]:value}));return onModelChange?onModelChange(c):null}},s.id);case"int":return(null==s||null===(_s$enum=s.enum)||void 0===_s$enum?void 0:_s$enum.length)>10?(0,jsx_runtime.jsx)(BladeSlider.A,{hideDesc,disabled:!s.permitted,marks:null==s?void 0:s.enum,step:void 0,model_id:s.id,model,required:s.required,schema:s,textfield:!1,style:{margin:"0.5rem 0",width:"49%"},onChange:(model_id,value)=>{const c={};return c[model_id]=value,onModelChange?onModelChange(c):null}},s.id):(0,jsx_runtime.jsx)(BladeSlider.A,{hideDesc,disabled:!s.permitted,marks:null==s?void 0:s.enum,step:void 0,model_id:s.id,model,required:s.required,schema:s,textfield:!1,style:{margin:"0.5rem 0",width:"49%"},onChange:(model_id,value)=>{const c={};return c[model_id]=value,onModelChange?onModelChange(c):null}},s.id);case"color":return(0,jsx_runtime.jsx)(GradientPicker.A,{pickerBgColor:model[s.id]||s.default||"#000000",title:s.title,index:i,isGradient:s.isGradient||!1,wrapperStyle:{margin:"0.5rem 0",width:"49%"},colors:void 0,handleAddGradient:()=>{},sendColorToVirtuals:color=>{const c={};return c[s.id]=color,onModelChange?onModelChange(c):null},showHex:!1},s.id);case"autocomplete":return(0,jsx_runtime.jsx)(Autocomplete.A,{size:"medium",options:s.enum||[],value:model[s.id]||s.default||"",onChange:(event,newValue)=>{const c={};c[s.id]=newValue||"",onModelChange&&onModelChange(c)},inputValue:model[s.id]||s.default||"",onInputChange:(event,newInputValue)=>{if("change"===(null==event?void 0:event.type)){const c={};c[s.id]=newInputValue,onModelChange&&onModelChange(c)}},disabled:!s.permitted,freeSolo:!1!==s.freeSolo,renderOption:(props,option,state)=>(0,react.createElement)("li",(0,objectSpread2.A)((0,objectSpread2.A)({},props),{},{key:"".concat(s.id,"-option-").concat(state.index)}),option),renderInput:params=>(0,jsx_runtime.jsx)(TextField.A,(0,objectSpread2.A)((0,objectSpread2.A)({},params),{},{label:s.title.toUpperCase(),helperText:!hideDesc&&s.description?s.description:void 0})),sx:{width:"100%",mb:1}},s.id);default:return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Unsupported type:",s.type]})}})}),!hideToggle&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Divider.A,{style:{margin:"1rem 0 0.5rem 0"}}),(0,jsx_runtime.jsx)(FormControlLabel.A,{value:"start",control:(0,jsx_runtime.jsx)(Switch.A,{checked:!hideDesc,onChange:_e=>setHideDesc(!hideDesc)}),label:(0,jsx_runtime.jsxs)(DialogContentText.A,{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:0},children:["Show help text for fields",(0,jsx_runtime.jsx)(Info.A,{style:{marginLeft:"0.5rem"}})]}),labelPlacement:"end"})]})]})},SchemaForm_SchemaForm=SchemaForm;SchemaForm.__docgenInfo={description:"Dynamically render Forms based on a `schema` <br />\nmost schemas retrived from ledfx/api/schema are read-only <br />\nto enable write, please provide the key `permitted_keys`",methods:[],displayName:"SchemaForm",props:{schema:{required:!0,tsType:{name:"Schema"},description:"Schema to generate Form from. <br />\nin production this is provided by <br />\nan external api or a store-management. <br />\nSee examples, for manual usage..."},model:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},description:"Model is the current value of the schema"},hideToggle:{required:!1,tsType:{name:"boolean"},description:"Hide Field-Description Toggle"},onModelChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: any) => typeof e",signature:{arguments:[{type:{name:"any"},name:"e"}],return:{name:"e"}}},description:"onChange function for the given model"},type:{required:!1,tsType:{name:"string"},description:"internal"}}}},"./src/components/SchemaForm/components/Boolean/BBolean.tsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _mui_material__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@mui/material/esm/Switch/Switch.js"),_mui_material__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mui/material/esm/Typography/Typography.js"),_mui_material__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mui/material/esm/Checkbox/Checkbox.js"),_mui_material__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mui/material/esm/Button/Button.js"),_BladeFrame__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/SchemaForm/components/BladeFrame.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");const BBoolean=_ref=>{let{index,required,style,type="switch",onChange,defaultValue,value,title="",description="",hideDesc=!1}=_ref;switch(type){case"switch":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_BladeFrame__WEBPACK_IMPORTED_MODULE_4__.A,{index,required,style,title,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_0__.A,{defaultValue:defaultValue||value,checked:value,onChange,name:title,color:"primary"}),!hideDesc&&description?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_mui_material__WEBPACK_IMPORTED_MODULE_1__.A,{variant:"body2",className:"MuiFormHelperText-root",children:[description," "]}):null]});case"checkbox":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_BladeFrame__WEBPACK_IMPORTED_MODULE_4__.A,{index,title,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_2__.A,{defaultValue:defaultValue||value,checked:value,onChange,name:title,color:"primary"})});case"button":return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__.A,{color:"primary",variant:value?"contained":"outlined",onClick:onChange,children:title});default:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{children:"unset"})}},__WEBPACK_DEFAULT_EXPORT__=BBoolean;BBoolean.__docgenInfo={description:"## Boolean\n### render as `switch`,`checkbox` or `button`",methods:[],displayName:"BBoolean",props:{index:{required:!1,tsType:{name:"number"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},style:{required:!1,tsType:{name:"any"},description:""},type:{required:!1,tsType:{name:"union",raw:"'switch' | 'checkbox' | 'button'",elements:[{name:"literal",value:"'switch'"},{name:"literal",value:"'checkbox'"},{name:"literal",value:"'button'"}]},description:"",defaultValue:{value:"'switch'",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(_e: any) => void",signature:{arguments:[{type:{name:"any"},name:"_e"}],return:{name:"void"}}},description:""},defaultValue:{required:!1,tsType:{name:"any"},description:""},value:{required:!0,tsType:{name:"boolean"},description:""},title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},description:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},hideDesc:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}},"./src/components/SchemaForm/components/Boolean/BladeBoolean.tsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _BBolean__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/SchemaForm/components/Boolean/BBolean.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const BladeBoolean=_ref=>{let{onClick,index,required,style,type="switch",schema,model,hideDesc=!1,model_id}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_BBolean__WEBPACK_IMPORTED_MODULE_0__.A,{index,required,style,type,onChange:()=>onClick(model_id,model&&!model[model_id]),defaultValue:model&&model[model_id]||schema.default,value:!!model&&!!model[model_id],title:schema.title.replaceAll("_"," ").replaceAll("Color","c").replaceAll("Vertical","V ↕").replaceAll("Horizontal","H ↔"),description:schema.description,hideDesc})},__WEBPACK_DEFAULT_EXPORT__=BladeBoolean;BladeBoolean.__docgenInfo={description:"## Boolean for SchemaForm\n### render as `switch`,`checkbox` or `button`",methods:[],displayName:"BladeBoolean",props:{index:{required:!1,tsType:{name:"number"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},style:{required:!1,tsType:{name:"any"},description:""},onClick:{required:!1,tsType:{name:"any"},description:""},type:{required:!1,tsType:{name:"union",raw:"'switch' | 'checkbox' | 'button'",elements:[{name:"literal",value:"'switch'"},{name:"literal",value:"'checkbox'"},{name:"literal",value:"'button'"}]},description:"",defaultValue:{value:"'switch'",computed:!1}},schema:{required:!1,tsType:{name:"any"},description:""},model:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"unknown"}],raw:"Record<string, unknown>"},description:""},hideDesc:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},model_id:{required:!0,tsType:{name:"string"},description:""}}}},"./src/components/SchemaForm/components/GradientPicker/GradientPicker.tsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>GradientPicker_GradientPicker});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/react/index.js"),Popper=__webpack_require__("./node_modules/@mui/material/esm/Popper/Popper.js"),index_es=__webpack_require__("./node_modules/react-gcolor-picker/dist/index.es.js"),useTheme=__webpack_require__("./node_modules/@mui/material/esm/styles/useTheme.js"),Button=__webpack_require__("./node_modules/@mui/material/esm/Button/Button.js"),TextField=__webpack_require__("./node_modules/@mui/material/esm/TextField/TextField.js"),Add=__webpack_require__("./node_modules/@mui/icons-material/esm/Add.js");const utils_useClickOutside=(ref,handler)=>{(0,react.useEffect)(()=>{let startedInside=!1,startedWhenMounted=!1;const listener=event=>{!startedInside&&startedWhenMounted&&ref.current&&!ref.current.contains(event.target)&&handler(event)},validateEventStart=event=>{startedWhenMounted=ref.current,startedInside=ref.current&&ref.current.contains(event.target)};return document.addEventListener("mousedown",validateEventStart),document.addEventListener("touchstart",validateEventStart),document.addEventListener("click",listener),()=>{document.removeEventListener("mousedown",validateEventStart),document.removeEventListener("touchstart",validateEventStart),document.removeEventListener("click",listener)}},[ref,handler])};var Popover=__webpack_require__("./src/components/Popover/Popover.tsx"),Dialog=__webpack_require__("./node_modules/@mui/material/esm/Dialog/Dialog.js"),DialogTitle=__webpack_require__("./node_modules/@mui/material/esm/DialogTitle/DialogTitle.js"),DialogContent=__webpack_require__("./node_modules/@mui/material/esm/DialogContent/DialogContent.js"),Checkbox=__webpack_require__("./node_modules/@mui/material/esm/Checkbox/Checkbox.js"),DialogActions=__webpack_require__("./node_modules/@mui/material/esm/DialogActions/DialogActions.js"),OutlinedInput=__webpack_require__("./node_modules/@mui/material/esm/OutlinedInput/OutlinedInput.js"),InputLabel=__webpack_require__("./node_modules/@mui/material/esm/InputLabel/InputLabel.js"),MenuItem=__webpack_require__("./node_modules/@mui/material/esm/MenuItem/MenuItem.js"),FormControl=__webpack_require__("./node_modules/@mui/material/esm/FormControl/FormControl.js"),ListItemText=__webpack_require__("./node_modules/@mui/material/esm/ListItemText/ListItemText.js"),Select=__webpack_require__("./node_modules/@mui/material/esm/Select/Select.js"),useStore=__webpack_require__("./src/store/useStore.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const DeleteColorsDialog=_ref=>{let{dialogOpen,setDialogOpen}=_ref;const theme=(0,useTheme.A)(),MenuProps={PaperProps:{style:{maxHeight:224,width:250,background:theme.palette.background.paper}}},[colorsToDelete,setColorsToDelete]=(0,react.useState)([]),colors=(0,useStore.A)(state=>state.colors),deleteColors=(0,useStore.A)(state=>state.deleteColors),handleClose=()=>{setDialogOpen(!1)};return(0,jsx_runtime.jsxs)(Dialog.A,{PaperProps:{sx:{background:theme.palette.background.paper,color:theme.palette.text.primary}},open:dialogOpen,disableEscapeKeyDown:!0,onClose:handleClose,"aria-labelledby":"form-dialog-title",children:[(0,jsx_runtime.jsx)(DialogTitle.A,{id:"form-dialog-title",children:"Delete user-defined colors/gradients"}),(0,jsx_runtime.jsx)(DialogContent.A,{children:(0,jsx_runtime.jsxs)(FormControl.A,{sx:{m:1,width:300,"&&& fieldset, &&& fieldset:hover":{borderColor:theme.palette.text.primary}},children:[(0,jsx_runtime.jsx)(InputLabel.A,{sx:{"&&&":{color:theme.palette.text.primary}},id:"demo-multiple-checkbox-label",children:"Select to delete"}),(0,jsx_runtime.jsx)(Select.A,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:colorsToDelete,onChange:event=>{const{target:{value}}=event;setColorsToDelete("string"==typeof value?value.split(","):value)},input:(0,jsx_runtime.jsx)(OutlinedInput.A,{color:"primary",label:"To be deleted",sx:{"&&&":{color:theme.palette.text.primary}}}),renderValue:selected=>selected.join(", "),MenuProps,children:colors.colors&&colors.gradients&&[...Object.keys(colors.colors.user),...Object.keys(colors.gradients.user)].map(color=>(0,jsx_runtime.jsxs)(MenuItem.A,{value:color,sx:{background:theme.palette.background.paper,color:theme.palette.text.primary},children:[(0,jsx_runtime.jsx)(Checkbox.A,{color:"primary",checked:colorsToDelete.indexOf(color)>-1}),(0,jsx_runtime.jsx)(ListItemText.A,{primary:color}),(0,jsx_runtime.jsx)("div",{style:{width:150,height:50,background:colors.colors.user[color]||colors.gradients.user[color]}})]},color))})]})}),(0,jsx_runtime.jsxs)(DialogActions.A,{children:[(0,jsx_runtime.jsx)(Button.A,{onClick:handleClose,children:"Cancel"}),(0,jsx_runtime.jsx)(Button.A,{onClick:()=>{deleteColors(colorsToDelete),setColorsToDelete([]),setDialogOpen(!1)},children:"Delete"})]})]})},DeleteColors=DeleteColorsDialog;DeleteColorsDialog.__docgenInfo={description:"",methods:[],displayName:"DeleteColorsDialog",props:{dialogOpen:{required:!0,tsType:{name:"boolean"},description:""},setDialogOpen:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<boolean>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<boolean>",elements:[{name:"boolean"}]}]},description:""}}};const GradientPicker_styles=(0,__webpack_require__("./node_modules/@mui/styles/makeStyles/makeStyles.js").A)(()=>({paper:{border:"1px solid",borderRadius:10,display:"flex",flexWrap:"wrap",maxWidth:"308px",overflow:"auto","& .gradient-result":{display:"none"},"& .input_rgba":{display:"none"},"&.show_hex .input_rgba":{display:"block"},"&.show_hex .input_rgba .input_rgba-wrap .input_rgba-hex .input_rgba-hex-label":{color:"#eee",paddingTop:"1px"},"&.show_hex .input_rgba .input_rgba-wrap .input_rgba-hex input":{backgroundColor:"#333",color:"#eee",boxShadow:"none",border:"1px solid #999"},"& .gradient-interaction":{order:-1,marginBottom:"1rem"},"& .colorpicker":{display:"flex",flexDirection:"column"},"& .color-picker-panel, & .popup_tabs-header, & .popup_tabs, & .colorpicker, & .colorpicker .color-picker-panel, & .popup_tabs-header .popup_tabs-header-label-active":{backgroundColor:"transparent"},"& .popup_tabs-body":{paddingBottom:4}},addButton:{width:69,height:30,borderRadius:4,border:"1px solid #999",display:"flex",justifyContent:"center",alignItems:"center",fontSize:24,margin:"0 auto",cursor:"pointer","&:hover":{borderColor:"#fff"}},picker:{height:"30px",margin:"15px 10px 10px 10px",borderRadius:"10px",cursor:"pointer",border:"1px solid #fff"},wrapper:{border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"10px",position:"relative",width:"100%",minWidth:"230px",margin:"0.5rem 0","& > label":{top:"-0.75rem",display:"flex",alignItems:"center",left:"1rem",padding:"0 0.3rem",position:"absolute",fontVariant:"all-small-caps",fontSize:"0.9rem",letterSpacing:"0.1rem",boxSizing:"border-box"}}})),normalizeGradient=colorStr=>colorStr&&colorStr.includes("linear-gradient")?colorStr.match(/linear-gradient\s*\(\s*\d+deg/)?colorStr:colorStr.replace(/linear-gradient\s*\(/,"linear-gradient(90deg, "):colorStr,GradientPicker=_ref=>{var _colors$gradients,_colors$gradients2,_Object$entries,_colors$colors,_Object$entries2,_colors$colors2,_Object$entries3,_colors$colors3,_colors$gradients3,_Object$keys,_colors$colors4,_Object$keys2,_colors$gradients4,_colors$colors5,_colors$gradients5,_Object$values$filter;let{pickerBgColor="#800000",title="Color",index=1,isGradient=!1,wrapperStyle,colors,handleAddGradient,sendColorToVirtuals,showHex=!1}=_ref;const classes=GradientPicker_styles(),theme=(0,useTheme.A)(),popover=(0,react.useRef)(null),[anchorEl,setAnchorEl]=(0,react.useState)(null),[name,setName]=(0,react.useState)(""),[dialogOpen,setDialogOpen]=(0,react.useState)(!1),[pickerBgColorInt,setPickerBgColorInt]=(0,react.useState)(pickerBgColor),defaultColors={};null!=colors&&null!==(_colors$gradients=colors.gradients)&&void 0!==_colors$gradients&&_colors$gradients.builtin&&Object.entries(colors.gradients.builtin).forEach(_ref2=>{let[k,g]=_ref2;defaultColors[k]=g}),null!=colors&&null!==(_colors$gradients2=colors.gradients)&&void 0!==_colors$gradients2&&_colors$gradients2.user&&(null===(_Object$entries=Object.entries(colors.gradients.user))||void 0===_Object$entries||_Object$entries.forEach(_ref3=>{let[k,g]=_ref3;defaultColors[k]=g})),null!=colors&&null!==(_colors$colors=colors.colors)&&void 0!==_colors$colors&&_colors$colors.builtin&&(null===(_Object$entries2=Object.entries(colors.colors.builtin))||void 0===_Object$entries2||_Object$entries2.forEach(_ref4=>{let[k,g]=_ref4;defaultColors[k]=g})),null!=colors&&null!==(_colors$colors2=colors.colors)&&void 0!==_colors$colors2&&_colors$colors2.user&&(null===(_Object$entries3=Object.entries(colors.colors.user))||void 0===_Object$entries3||_Object$entries3.forEach(_ref5=>{let[k,g]=_ref5;defaultColors[k]=g}));utils_useClickOutside(popover,()=>{setAnchorEl(null)});const open=Boolean(anchorEl),id=open?"simple-popper":void 0;return(0,react.useEffect)(()=>{setPickerBgColorInt(normalizeGradient(pickerBgColor))},[pickerBgColor,setPickerBgColorInt]),(0,jsx_runtime.jsxs)("div",{className:"".concat(classes.wrapper," step-effect-").concat(index," gradient-picker"),style:(0,objectSpread2.A)({borderColor:theme.palette.divider,minWidth:"unset"},wrapperStyle),children:[(0,jsx_runtime.jsx)("label",{className:"MuiFormLabel-root",style:{background:theme.palette.background.paper},children:title&&title.replaceAll("_"," ").replaceAll("background","bg").replaceAll("name","")}),(0,jsx_runtime.jsx)("div",{className:classes.picker,style:{background:pickerBgColorInt},"aria-describedby":id,onClick:event=>{setAnchorEl(anchorEl?null:event.currentTarget)}}),(0,jsx_runtime.jsx)(Popper.A,{id,open,anchorEl,ref:popover&&popover,sx:{zIndex:1300},children:(0,jsx_runtime.jsxs)("div",{className:"".concat(classes.paper," gradient-picker ").concat(showHex?"show_hex":""),style:{padding:theme.spacing(1),backgroundColor:theme.palette.background.paper},children:[(0,jsx_runtime.jsx)(index_es.A,{colorBoardHeight:150,debounce:!0,debounceMS:300,format:"hex",gradient:isGradient,solid:!0,onChange:c=>{const normalized=normalizeGradient(c);return setPickerBgColorInt(normalized),sendColorToVirtuals(normalized)},popupWidth:288,showAlpha:!1,value:pickerBgColorInt,defaultColors:Object.values(defaultColors)}),(0,jsx_runtime.jsxs)("div",{style:{marginTop:2.5,width:"100%",display:"flex",justifyContent:"flex-end"},children:[(0,jsx_runtime.jsx)(Button.A,{style:{width:69,height:30,borderRadius:4,border:"1px solid #999",display:"flex",justifyContent:"center",alignItems:"center",fontSize:24,marginRight:16,cursor:"pointer"},onClick:()=>(setAnchorEl(null),void setDialogOpen(!0)),disabled:colors&&colors.length&&(null===(_colors$colors3=colors.colors)||void 0===_colors$colors3?void 0:_colors$colors3.length)&&(null===(_colors$gradients3=colors.gradients)||void 0===_colors$gradients3?void 0:_colors$gradients3.length)&&!((null===(_Object$keys=Object.keys(null==colors||null===(_colors$colors4=colors.colors)||void 0===_colors$colors4?void 0:_colors$colors4.user))||void 0===_Object$keys?void 0:_Object$keys.length)>0)&&!((null===(_Object$keys2=Object.keys(null==colors||null===(_colors$gradients4=colors.gradients)||void 0===_colors$gradients4?void 0:_colors$gradients4.user))||void 0===_Object$keys2?void 0:_Object$keys2.length)>0),children:"-"}),(0,jsx_runtime.jsx)(Popover.A,{className:classes.addButton,popoverStyle:{padding:"0.5rem"},color:"primary",content:(0,jsx_runtime.jsx)(TextField.A,{autoFocus:!0,onClick:e=>e.stopPropagation(),onKeyDown:e=>"Enter"===e.key&&handleAddGradient(name),error:(null==colors?void 0:colors.length)&&(null===(_colors$colors5=colors.colors)||void 0===_colors$colors5?void 0:_colors$colors5.length)&&(null===(_colors$gradients5=colors.gradients)||void 0===_colors$gradients5?void 0:_colors$gradients5.length)&&(Object.keys(colors.colors).indexOf(name)>-1||(null===(_Object$values$filter=Object.values(colors.colors).filter(p=>p===pickerBgColorInt))||void 0===_Object$values$filter?void 0:_Object$values$filter.length)>0||Object.keys(colors.gradients).indexOf(name)>-1||Object.values(colors.gradients).filter(p=>p===pickerBgColorInt).length>0),size:"small",id:"gradientNameInput",label:"Enter name to save as...",style:{marginRight:"1rem",flex:1},value:name,onChange:e=>{setName(e.target.value)}}),confirmDisabled:0===name.length,onConfirm:()=>{handleAddGradient(name,pickerBgColor),setName(""),setAnchorEl(null)},startIcon:"",size:"medium",icon:(0,jsx_runtime.jsx)(Add.A,{})})]})]})}),(0,jsx_runtime.jsx)(DeleteColors,{setDialogOpen,dialogOpen})]})},GradientPicker_GradientPicker=GradientPicker;GradientPicker.__docgenInfo={description:"",methods:[],displayName:"GradientPicker",props:{pickerBgColor:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'#800000'",computed:!1}},title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Color'",computed:!1}},index:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},isGradient:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},wrapperStyle:{required:!1,tsType:{name:"CSSProperties"},description:"",defaultValue:{value:"undefined",computed:!0}},colors:{required:!1,tsType:{name:"any"},description:"",defaultValue:{value:"undefined",computed:!0}},handleAddGradient:{required:!1,tsType:{name:"any"},description:"",defaultValue:{value:"undefined",computed:!0}},sendColorToVirtuals:{required:!1,tsType:{name:"any"},description:"",defaultValue:{value:"undefined",computed:!0}},showHex:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}},"./src/components/SchemaForm/components/Number/BladeSlider.tsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>Number_BladeSlider});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/react/index.js"),useTheme=__webpack_require__("./node_modules/@mui/material/esm/styles/useTheme.js"),Slider=__webpack_require__("./node_modules/@mui/material/esm/Slider/Slider.js"),Typography=__webpack_require__("./node_modules/@mui/material/esm/Typography/Typography.js"),Input=__webpack_require__("./node_modules/@mui/material/esm/Input/Input.js"),TextField=__webpack_require__("./node_modules/@mui/material/esm/TextField/TextField.js"),Box=__webpack_require__("./node_modules/@mui/material/esm/Box/Box.js");const BladeSlider_styles=(0,__webpack_require__("./node_modules/@mui/styles/makeStyles/makeStyles.js").A)(()=>({input:{marginLeft:"1rem",paddingLeft:"0.5rem",borderRadius:"5px",paddingTop:"3px"},wrapper:{width:"49%",padding:"16px 1.2rem 6px 1.2rem",borderRadius:"10px",position:"relative",display:"flex",margin:"0.5rem 0","@media (max-width: 580px)":{width:"100% !important"},"& > label":{top:"-0.75rem",display:"flex",alignItems:"center",left:"1rem",padding:"0 0.3rem",position:"absolute",fontVariant:"all-small-caps",fontSize:"0.9rem",letterSpacing:"0.1rem",boxSizing:"border-box"},"& .sortable-handler":{touchAction:"none"}}}));var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const BladeSliderInner=_ref=>{let{schema,model,model_id="",step,onChange,textfield,style,disabled,marks,hideDesc,full}=_ref;const classes=BladeSlider_styles(),theme=(0,useTheme.A)(),computedValue=model_id&&"number"==typeof model[model_id]?model[model_id]:"number"==typeof schema.default?schema.default:1,[value,setValue]=(0,react.useState)(computedValue),handleSliderChange=(0,react.useCallback)((_event,newValue)=>{newValue!==value&&setValue(newValue)},[value]),handleInputChange=(0,react.useCallback)(event=>{var _schema$minimum,_schema$maximum;const rawValue=event.target.value;if(""===rawValue)return void setValue("");const numValue=Number(rawValue),clampedValue=Math.max(null!==(_schema$minimum=schema.minimum)&&void 0!==_schema$minimum?_schema$minimum:-1/0,Math.min(null!==(_schema$maximum=schema.maximum)&&void 0!==_schema$maximum?_schema$maximum:1/0,numValue));setValue(clampedValue),onChange(model_id,clampedValue)},[model_id,onChange,schema.minimum,schema.maximum]),handleBlur=(0,react.useCallback)(()=>{""===value||value<schema.minimum?(setValue(schema.minimum||0),onChange(model_id,schema.minimum||0)):value>schema.maximum&&(setValue(schema.maximum),onChange(model_id,schema.maximum))},[value,schema.minimum,schema.maximum,model_id,onChange]),handleTextChange=(0,react.useCallback)(event=>{var _schema$minimum2,_schema$maximum2;const rawValue=Number(event.target.value),clampedValue=Math.max(null!==(_schema$minimum2=schema.minimum)&&void 0!==_schema$minimum2?_schema$minimum2:-1/0,Math.min(null!==(_schema$maximum2=schema.maximum)&&void 0!==_schema$maximum2?_schema$maximum2:1/0,rawValue));setValue(clampedValue),onChange(model_id,clampedValue)},[model_id,onChange,schema.minimum,schema.maximum]);return(0,react.useEffect)(()=>{setValue(computedValue)},[computedValue]),"number"!=typeof schema.maximum||textfield?schema.enum&&!textfield?(0,jsx_runtime.jsx)(Slider.Ay,{"aria-labelledby":"input-slider",valueLabelDisplay:"auto",disabled,marks:marks.map((m,i)=>({value:m,label:0===i||i===marks.length-1?m:""})),step:null,min:marks[0],max:marks[marks.length-1],value:"number"==typeof value?value:0,onChange:handleSliderChange,onChangeCommitted:(e,b)=>onChange(model_id,b),style:(0,objectSpread2.A)((0,objectSpread2.A)({},style),{},{width:"100%"})}):(0,jsx_runtime.jsx)(TextField.A,{disabled,variant:"standard",slotProps:{input:{disableUnderline:!0,endAdornment:"delay_ms"===model_id?"ms":null}},type:"number",value,onChange:handleTextChange,helperText:!hideDesc&&schema.description,style:(0,objectSpread2.A)((0,objectSpread2.A)({},style),{},{width:"100%",backgroundColor:theme.palette.background.paper,margin:0})}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{style:{width:"100%"},children:[(0,jsx_runtime.jsx)(Slider.Ay,{"aria-labelledby":"input-slider",valueLabelDisplay:"auto",disabled,step:step||(schema.maximum>1?.1:.01),valueLabelFormat:"delay_ms"===model_id?"".concat("number"==typeof value?value:0," ms"):"".concat("number"==typeof value?value:0),min:schema.minimum||0,max:schema.maximum,value:"number"==typeof value?value:0,onChange:handleSliderChange,className:"slider-".concat(full?"full":"half"),onChangeCommitted:(e,b)=>onChange(model_id,b),style:(0,objectSpread2.A)((0,objectSpread2.A)({color:"#aaa"},style),{},{width:"100%",marginBottom:.5,marginTop:.5})}),!hideDesc&&schema.description?(0,jsx_runtime.jsxs)(Typography.A,{variant:"body2",className:"MuiFormHelperText-root",children:[schema.description," "]}):null]}),(0,jsx_runtime.jsx)(Input.A,{disableUnderline:!0,disabled,className:classes.input,style:{minWidth:"delay_ms"===model_id?90:75,textAlign:"right",paddingTop:0,backgroundColor:theme.palette.divider,height:32},value,margin:"dense",onChange:handleInputChange,onBlur:handleBlur,endAdornment:"delay_ms"===model_id?"ms ":null,inputProps:{step:step||(schema.maximum>1?.1:.01),min:schema.minimum||0,max:schema.maximum,type:"number","aria-labelledby":"input-slider"}})]})},BladeSlider=_ref2=>{let{variant="outlined",schema={title:"Slide me"},model,model_id="",step,onChange,marks,index,required=!1,textfield=!1,disabled=!1,hideDesc=!1,style={},full=!1}=_ref2;const classes=BladeSlider_styles(),theme=(0,useTheme.A)();return"outlined"===variant?(0,jsx_runtime.jsxs)(Box.A,{className:"".concat(classes.wrapper," step-effect-").concat(index),sx:[(0,objectSpread2.A)((0,objectSpread2.A)({},style),{},{border:"1px solid",borderColor:theme.palette.divider,"& > label":{backgroundColor:theme.palette.background.paper},"& .MuiSliderValueLabel > span":{backgroundColor:theme.palette.background.paper}}),full?{width:"100%"}:{width:style.width}],children:[(0,jsx_runtime.jsxs)("label",{style:{color:disabled?theme.palette.text.disabled:theme.palette.text.primary},className:"MuiFormLabel-root",children:[schema.title,required?"*":""]}),(0,jsx_runtime.jsx)(BladeSliderInner,{style,schema,model,model_id,disabled,step,onChange,textfield,marks,hideDesc})]}):(0,jsx_runtime.jsx)(BladeSliderInner,{style,step,schema,model,model_id,onChange,disabled,textfield,marks,hideDesc})},Number_BladeSlider=BladeSlider;BladeSlider.__docgenInfo={description:"## Number\n### render as `input fields` or `sliders`\nRenders slider if:\n\n - schema.maximum && !textfield\n - schema.enum && !textfield",methods:[],displayName:"BladeSlider",props:{variant:{required:!1,tsType:{name:"string"},description:"`outlined` or not. More might come",defaultValue:{value:"'outlined'",computed:!1}},schema:{required:!1,tsType:{name:"any"},description:"Renders slider if:\n\n - schema.maximum && !textfield\n - schema.enum && !textfield\n\nElse: renders input field",defaultValue:{value:"{\n  title: 'Slide me'\n}",computed:!1}},model:{required:!1,tsType:{name:"any"},description:"current value representation of schema",defaultValue:{value:"undefined",computed:!0}},model_id:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},step:{required:!1,tsType:{name:"number"},description:"if steps not provided it will be calculated like:\n`schema.maximum > 1 ? 0.1 : 0.01`",defaultValue:{value:"undefined",computed:!0}},onChange:{required:!1,tsType:{name:"any"},description:"",defaultValue:{value:"undefined",computed:!0}},marks:{required:!1,tsType:{name:"any"},description:"",defaultValue:{value:"undefined",computed:!0}},index:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"undefined",computed:!0}},required:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},textfield:{required:!1,tsType:{name:"boolean"},description:"Forces input field rendering.\nno slider",defaultValue:{value:"false",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hideDesc:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},style:{required:!1,tsType:{name:"any"},description:"",defaultValue:{value:"{}",computed:!1}},full:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}}}]);